Id,AcceptedAnswerId,Title,Text,AnswerAccepted,Tags
"47588415","47588539","Calculate Picture ID for Gallery With Ads","I have a picture gallery where after every three pictures, an ad is displayed (gotta pay those bills 😀).

So in an example scenario, my gallery would have 11 slides, of which there are 9 pictures and 2 ads, like this:

[![gallery][1]][1]

In the top row of this drawing are the zero-bases indexes of the slides, which I have in an array.

What I need to come up with now is a formula to calculate the index of the picture corresponding to a given slide ID (the numbers in the bottom row).

So for `slideIndex === 2`, I need `picIndex === 2`, for `slideIndex === 5`, I need `picIndex === 4` and for `slideIndex === 8`, the result would be `picIndex === 6`.

For a slide that contains an ad, I would like to have the index of the last pic, so for `slideIndex === 3` → `picIndex === 2`.

I do have a working solution already, where I just use a `for` loop, but this seems really lame and cumbersome:

<!-- begin snippet: js hide: false console: true babel: false -->

<!-- language: lang-js -->

    const adInterval = 3; // show an ad every 3 pics

    function calculatePicIndex(slideIndex) {
        let picCount = 0;
        let picIndex = -1;
        for (let i = 0; i <= slideIndex; i++) {
            if (++picCount > adInterval) {
                picCount = 0;
            } else {
                picIndex++;
            }
        }
        return picIndex;
    }

    for (let i = 0; i < 11; i++) {
        console.log(`slide index: ${i} – pic index: ${calculatePicIndex(i)}`);
    }

<!-- end snippet -->

I'm sure there is a much more elegant solution with a simple math formula, so basically, it's more a math question than a JavaScript question:

**How can I refactor the above code to avoid the loop and calculate the number through a math formula?**

I have tried something like this:

    const picIndex = Math.floor(slideIndex / adInterval);

But that gives me incorrect values which are more and more off as slide index increases.

  [1]: https://i.stack.imgur.com/IR4Nm.png","

<!-- begin snippet: js hide: false console: true babel: false -->

<!-- language: lang-js -->

    slideIndex = 8;
    adInterval = 3;
    var picindex = slideIndex - slideIndex%adInterval || slideIndex
    console.log(picindex)


<!-- end snippet -->

","<javascript><algorithm><refactoring><formula><image-gallery>"
"47590262","47593903","Node js, refactoring long node js async function","I'm converting SQL Procedure to node js function.

My converting function is too long, so readability is bad.

I want to split small function, but don't know how I can refactoring it.
I use async.wait because several SQL statement should be run serial.



    exports.cancelDansok =  function cancelDansok(dansokSeqNo, callback) {
           var tasks = [
             function (callback) {
               models.DansokHist.max('SerialNo', {
                 where: { DansokSeqNo: dansokSeqNo}
               })
               .then(max => {
                 if (!max) {
                   callback(null, 1);
                 } else {
                   callback(null, max+1);
                 }
               })
               .error(err => {
                 log.info(err);
                 return callback({status:400, message:'select dansokhisttbl failed.'});
               });          
             },
             function (serialNo, callback) {
                ....
               })
               .then(() => {
                 ....
               })
               .then( feeVBankList => {
                 callback(null);
               })
               .error(err => {
                 return callback({status:400, message:'update dansokfeetbl failed.'});
               });          
             },
             function (callback) {        
               ....
             },
             function (callback) {        
               ....
             },
             function (callback) {        
               ....
             },
             function (callback) {        
               ....
             }
           ];
        
           async.waterfall(tasks, function(err, success) {
             if (err) {
               return callback(err);
             } else {
               return callback(success);
             }
           });
         }

What would be the best practice in my case?
","I would create a named function for each `function (callback) {` and then replace them in the tasks array by the newly created function name.

Plus I'll wrap the callback functions into `Promises` and use `Promise.all`.

*Example :*

      /**
       * I love cats!
       */
      function loveCats() {
        return new Promise((resolve, reject) => {
          models.DansokHist.max('SerialNo', {
            where: { DansokSeqNo: dansokSeqNo }
          })
           .then(max => resolve(!max ? 1 : max + 1))
           .error(err => reject({
              status: 400,
              message: 'select dansokhisttbl failed.',
            }));
        });
      }

      /**
       * I love dogs!
       */
      function loveDogs() {
        // ...
      }

      Promise.all([
        loveCats,
        loveDogs,
        ...
      ])
       .then((allRets) => {
         // Handle the rets
       })
       .catch((err) => {
         // Handle the errors
       });


----------

Even better you can use new supported features `async/await`.

      /**
       * I love cats!
       */
      function loveCats() {
        return new Promise((resolve, reject) => {
          models.DansokHist.max('SerialNo', {
            where: { DansokSeqNo: dansokSeqNo }
          })
           .then(max => resolve(!max ? 1 : max + 1))
           .error(err => reject({
              status: 400,
              message: 'select dansokhisttbl failed.',
            }));
        });
      }

      /**
       * I love dogs!
       */
      function loveDogs() {
        // ...
      }

      try {
        const allRets = await Promise.all([
          loveCats,
          loveDogs,
          ...
        ]);

        // Handle the rets
      } catch (err) {
        // Handle the errors
      }","<node.js><refactoring><sequelize.js><async.js>"
"47592388","47592448","Elixir rename imported function to alias","Let's say I am testing a function belonging to Utils module like this

    defmodule Test do
      alias Module.Utils
    
      test ""test 1"" do
        Utils.some_function?(...)
      end
    
      test ""test 2"" do
        Utils.some_function?(...)
      end
    end

Can I refactor or simplify that function into something like:

    import Utils.some_function as test_func()

So I dont have to write module name and simplify function name
","You cannot rename a function while importing it.

You can use `defdelegate` to create a local function that calls another module's function like this:

    defmodule A do
      def just_add_these_two_numbers(a, b), do: a + b
    end
    
    defmodule B do
      defdelegate add(a, b), to: A, as: :just_add_these_two_numbers
      # `add/2` is now the same as `A.just_add_these_two_numbers/2`.
    
      def test do
        IO.inspect add(1, 2) == 3
      end
    end
    
    B.test #=> true

Although you might as well just do this instead (it's even shorter):

    def add(a, b), do: A.just_add_these_two_numbers(a, b)","<elixir>"
"47598520","47606716","Why jQuery's Promise.reject does not working?","I have existing jQuery-code on classics callbacks: [Github Gist 1][1]

which is executes with logs: 
    
logs case 1:

    [INFO] /api/my/action1: got rejecting signal, do not continue 
    
logs 2nd case:

    [INFO] /api/my/action1: no rejecting signal, continue
    [INFO] /api/my/action2: no rejecting signal, continue
    [INFO] /api/my/action3: hurrah!! we got message:  Third action executed!
    
logs 3d case:

    [INFO] /api/my/action1: no rejecting signal, continue
    [ERROR] Got error with message: Unexpected error
    
I want to refactor this code to to promises:

    function ajxGet(url){
      return $.ajax({
        url,
        dataType: 'JSON'
      })
    }
    
    export function makeThreeAsyncQueries(){
      ajxGet('/api/my/action1')
        .then(response1 => {
          if(response1.do_reject_other_actions){
            console.log('[INFO] /api/my/action1: got rejecting signal, do not continue');
            return Promise.reject({mute: true});
          }else{
            console.log('[INFO] /api/my/action1: no rejecting signal, continue');
            return ajxGet('/api/my/action2');
          }
        })
        .then(response2 => {
          if(response2.do_reject_other_actions){
            console.log('[INFO] /api/my/action2: got rejecting signal, do not continue');
            return Promise.reject({mute: true});
          }else{
            console.log('[INFO] /api/my/action2: no rejecting signal, continue');
            return ajxGet('/api/my/action3');
          }
        })
        .then(response3 => {
          console.log('[INFO] /api/my/action3: hurrah!! we got message: ', response3.message);
        })
        .fail((err) => {
          if(err && err.mute){
            console.log('[INFO] normal chain break.');
            return
          }
          console.info('[ERROR] Got error with message:', err.responseJSON.message);
        });
    }
 
The problem is that 'Promise.reject({mute: true});' does not working, and I have these logs: 

    [INFO] /api/my/action1: got rejecting signal, do not continue           <<-- SHOULD STOP HERE
    my.js?be90:79 [INFO] /api/my/action2: no rejecting signal, continue
    my.js?be90:69 Uncaught (in promise) Object {mute: true}
    (anonymous) @ my.js?be90:69
    (anonymous) @ jquery-1.12.4.min.self-693ce44….js?body=1:3
    i @ jquery-1.12.4.min.self-693ce44….js?body=1:3
    fireWith @ jquery-1.12.4.min.self-693ce44….js?body=1:3
    y @ jquery-1.12.4.min.self-693ce44….js?body=1:5
    c @ jquery-1.12.4.min.self-693ce44….js?body=1:5
    my.js?be90:83 [INFO] /api/my/action3: hurrah!! we got message:  Third action executed!
    
Rails-API code: [Github Gist 2][2]

    
    
    
  [1]: https://gist.github.com/NikolayRadionov/8c016405a2a6a40fb31b64eac073c0c4
  [2]: https://gist.github.com/NikolayRadionov/69072abc90ff5fa6a5d6de4a65f0466b","In your example, you are using [Promise][1] from [ECMAScript 2015 specification][3] instead of jQuery's [Deferred][2] promise-like object.

So instead of this line:

    return Promise.reject({mute: true});
    
Use this:

    return $.Deferred().reject({ mute: true }) 
    
Full example of code:

    function ajxGet(url){
      return $.ajax({
        url,
        dataType: 'JSON'
      })
    }
    
    export function makeThreeAsyncQueries(){
      ajxGet('/api/my/action1')
        .then(response1 => {
          if(response1.do_reject_other_actions){
            console.log('[INFO] /api/my/action1: got rejecting signal, do not continue');
            return $.Deferred().reject({ mute: true })
          }else{
            console.log('[INFO] /api/my/action1: no rejecting signal, continue');
            return ajxGet('/api/my/action2');
          }
        })
        .then(response2 => {
          if(response2.do_reject_other_actions){
            console.log('[INFO] /api/my/action2: got rejecting signal, do not continue');
            return $.Deferred().reject({ mute: true })
          }else{
            console.log('[INFO] /api/my/action2: no rejecting signal, continue');
            return ajxGet('/api/my/action3');
          }
        })
        .then(response3 => {
          console.log('[INFO] /api/my/action3: hurrah!! we got message: ', response3.message);
        })
        // as argument here we will get jquery's xhr object on AJAX-error, or will get payload sent by $.deferred().reject
        .fail((xhr) => {
          if(xhr && xhr.mute){
            console.log('[INFO] normal chain break.');
            return
          }
          console.info('[ERROR] Got error with message:', xhr.responseJSON.message);
        });
    }

So when backend will return `do_reject_other_actions === true` chain will break and you will get this correct logs:

<!-- language: lang-none -->

    [INFO] /api/my/action1: got rejecting signal, do not continue
    [INFO] normal chain break.
    
    or
    
    [INFO] /api/my/action1: no rejecting signal, continue
    [INFO] /api/my/action2: got rejecting signal, do not continue
    [INFO] normal chain break.
    
    or

    [INFO] /api/my/action1: no rejecting signal, continue
    [INFO] /api/my/action2: no rejecting signal, continue
    [INFO] /api/my/action3: hurrah!! we got message:  Third action executed!
    
    or
    
    [INFO] /api/my/action1: no rejecting signal, continue
    [ERROR] Got error with message: Unexpected error 
    
    
    
# SOLUTION 2
    
If you want to use [ECMAScript2015 Promise][1], you can wrap jQuery's `ajax` into [Promise][1]:

    function ajxGet(url){
      return new Promise((resolve, reject) => {
        $.ajax({
          url,
          dataType: 'JSON',
          success: response => resolve(response),
          error: (xhr) => { reject(xhr) },
        })
      });
    }
    
    export function makeThreeAsyncQueries(){
      ajxGet('/api/my/action1')
        .then(response1 => {
          if(response1.do_reject_other_actions){
            console.log('[INFO] /api/my/action1: got rejecting signal, do not continue');
            return Promise.reject({mute: true});
          }else{
            console.log('[INFO] /api/my/action1: no rejecting signal, continue');
            return ajxGet('/api/my/action2');
          }
        })
        .then(response2 => {
          if(response2.do_reject_other_actions){
            console.log('[INFO] /api/my/action2: got rejecting signal, do not continue');
            return Promise.reject({mute: true});
          }else{
            console.log('[INFO] /api/my/action2: no rejecting signal, continue');
            return ajxGet('/api/my/action3');
          }
        })
        .then(response3 => {
          console.log('[INFO] /api/my/action3: hurrah!! we got message: ', response3.message);
        })
        .catch((xhr) => {
          if(xhr && xhr.mute){
            console.log('[INFO] normal chain break.');
            return
          }
          console.info('[ERROR] Got error with message:', xhr.responseJSON.message);
        });
    }
    
    
Note that instead of `fail(...)` you will need to use `catch(...)` at the end of chain, because [`fail`][4] is jQuery Deferred's method. 






  [1]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise
  [2]: http://api.jquery.com/category/deferred-object/
  [3]: http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects
  [4]: http://api.jquery.com/deferred.fail/","<javascript><jquery><ruby-on-rails><ajax><promise>"
"47606854","47608334","Induction hypothesis for free variables of closed term in the simply typed lambda calculus","I am trying to formalize the simply typed lambda calculus in Coq and have a problem stating the lemma that the set of free variables of a well-typed expression in an empty context is empty.

Here is the relevant part of may formalisation.

    Require Import Coq.Arith.Arith.
    Require Import Coq.MSets.MSets.
    Require Import Coq.FSets.FMaps.
    
    Inductive type : Set :=
    | tunit : type
    | tfun : type -> type -> type.
    
    Module Var := Nat.
    Definition var : Set := Var.t.
    Module VarSet := MSetAVL.Make Var.
    Module VarSetFacts := MSetFacts.Facts VarSet.
    Module VarSetProps := MSetProperties.Properties VarSet.
    Module Context := FMapWeakList.Make Var.
    Module ContextFacts := FMapFacts.Facts Context.
    Module ContextProps := FMapFacts.Properties Context.
    Definition context := Context.t type.
    Definition context_empty : context := Context.empty type.
    
    Inductive expr : Set :=
    | eunit : expr
    | evar : var -> expr
    | eabs : var -> type -> expr -> expr
    | eapp : expr -> expr -> expr.
    
    Fixpoint free_vars (e : expr) : VarSet.t :=
      match e with
      | eunit => VarSet.empty
      | evar y => VarSet.singleton y
      | eabs y _ e => VarSet.remove y (free_vars e)
      | eapp e1 e2 => VarSet.union (free_vars e1) (free_vars e2)
      end.
    
    Inductive has_type : context -> expr -> type -> Prop :=
    | has_type_unit : forall c,
        has_type c eunit tunit
    
    | has_type_var : forall c x t,
        Context.find x c = Some t ->
        has_type c (evar x) t
    
    | has_type_abs : forall c x t1 t2 e,
        has_type (Context.add x t1 c) e t2 ->
        has_type c (eabs x t1 e) (tfun t1 t2)
    
    | has_type_app : forall c e1 e2 t1 t2,
        has_type c e1 (tfun t1 t2) ->
        has_type c e2 t1 ->
        has_type c (eapp e1 e2) t2.
        
    Check has_type_ind.
    
    Lemma has_type_empty_context_free_vars : forall e t,
      has_type context_empty e t ->
      VarSet.Empty (free_vars e).
    Proof.
      intros e t H.
      remember context_empty as c.
      induction H; subst.
      - apply VarSet.empty_spec.
      - rewrite ContextFacts.empty_o in H.
        congruence.
      - simpl.
        admit. (* Wrong induction hypothesis *)
      - simpl.
        rewrite VarSetProps.empty_union_1; auto.
    Admitted.

The problem seems to be that my induction hypothesis is wrong. It merely says

    Context.add x t1 context_empty = context_empty ->
      VarSet.Empty (free_vars e)

which is trivially true, since the hypothesis is false. I tried an induction over the expression and to reformulate the theorem to get the right induction hypothesis, but could not figure it out.

What is the correct way to define and prove this property?","You were right to perform induction on the hypothesis of statement ""has_type ..."", but you probably need to load the induction.  In other words, you need to prove a stronger statement, make the environment a variable, and express that the set of free variables in <code>e</code> must be inside the variables that have a type in your context.","<coq><lambda-calculus><induction>"
"47608123","47608197","Cannot create FactoryGirl's factory for model","I have this situation with legacy project. Suppose I have rails 'entity'-model with string 'name'-field. In that model there is **MAIN_ENTITY** constant:

`class Entity < ActiveRecord::Base  
  MAIN_ENTITY_ID = 1
  MAIN_ENTITY = Entity.find(MAIN_ENTITY_ID)
end`
    
Now I want to cover Entity-model with rspec tests, but first I need factory. I created this factory: 

`FactoryGirl.define do
  factory :entity do
    name { FFaker::Company.name }
  end
end`

And when I running create(:entity) inside rspec test, I am getting this error: 

    Failure/Error: MAIN_ENTITY = Entity.find(MAIN_ENTITY_ID)
    
    ActiveRecord::RecordNotFound:
      Couldn't find Entity with 'id'=1

      
      
How to fix that without refactoring code and keeping MAIN_ENTITY constant?
","### Solution without refactoring (hack)

Ruby constants initializing before you access the static content of class. So, when you calling `Entity` class (manually or by using FactoryGirl), in background there is SQL query, which is trying to find record with `id == 1`. 

In case of production, this code is working, but when you writing tests, your database usually is cleaning up after each test case run (rspec's `it`). So solution would be to create 'main entity' before each test case run in empty database:

    # Your DatabaseCleaner initializer file
    RSpec.configure do |config|
      # ...
      config.around(:each) do |example|
        DatabaseCleaner.cleaning do
          FactoryGirl.create_main_entity
          example.run
        end
      end
    end

In `create_main_entity` method we have limitation here: we cannot use `Entity.create` or `Entity.new` methods, so we should use more low level solution: we need to make `INSERT` query directly into database. I would rewrite your `entities.rb`-factory like this:

    FactoryGirl.define do
      factory :entity do
        name { FFaker::Company.name }
      end
    end
    
    
    module FactoryGirl
      def self.create_main_entity
        connection = ActiveRecord::Base.connection
    
        values = {
          id: 1,
          name: 'MAIN ENTITY',
          created_at: Time.now.to_s(:db),
          updated_at: Time.now.to_s(:db)
        }
    
        sql = <<-SQL
          INSERT INTO entities (#{values.keys.map {|k| k.to_s}.join(', ')})
          VALUES(#{values.values.map{""'%s'""}.join(', ')})
        SQL
        
        connection.insert(sql % values.values)
      end
    end
    
### Better solution with refactoring

My code above is temporary solution. I would recommend you to refactor your `Entity` model. Instead of initializing constant by finding record, you can use static method:

    class Entity < ActiveRecord::Base
      MAIN_ENTITY_ID = 1
      
      def self.main_entity
        @@main_entity ||= Entity.find(MAIN_ENTITY_ID)
      end
    end

I used memorization here `@@main_entity ||= ...` to avoid executing same SELECT-query on each `Entity.main_entity` call.

","<ruby-on-rails><ruby><rspec><factory-bot><database-cleaner>"
"47608190","47608246","Ionic3, AngularFire - Property 'remove' does not exist on type 'Observable<any[]>'","I have been following an outdated tutorial ([this playlist in particular](https://www.youtube.com/watch?v=UHTBnTg4rno&list=PLtKjv92L0ihAJ90_NbqCINRu4uKy3RJJU&index=13)) and I got lost switching between AngularFire 4.0 and AngularFire 5.0.
It's a simple CRUD application which implements Firebase.
The code is uncouth, but I am able to view and post to the database.

<!-- What are you trying to accomplish? (Please include sample data.) -->
I'm trying to delete an item from a node using the key in firebase, but I'm getting the error 

`Property 'remove' does not exist on type 'Observable<any[]>'.`

Here is my `.ts` file:

    import { Component } from '@angular/core';
    import { IonicPage, NavController, NavParams, ActionSheetController } from 'ionic-angular';
    import { AngularFireList, AngularFireDatabase } from 'angularfire2/database';
    import { Matatu } from '../../models/matatu/matatu.interface';
    import { Observable } from 'rxjs/Observable';
    
    @IonicPage()
    @Component({
      selector: 'page-owner-dash',
      templateUrl: 'owner-dash.html',
    })

    export class OwnerDashPage {
    
      matatuListRef$: Observable<any[]>;
    
      constructor(public navCtrl: NavController, public navParams: NavParams, private database: AngularFireDatabase, public actionShtCrtl: ActionSheetController) {
        this.matatuListRef$ = this.database.list('matatu-list').valueChanges();
    
      }
    
      ionViewDidLoad() {
        //
      }
    
      selectMatatu(matatu: Matatu){
        this.actionShtCrtl.create({
          title: `${matatu.matNumberPlate}`,
          buttons: [
            {
              text: 'Edit',
              handler: () => {
                //
              }          
            },
            {
              text: 'Delete',
              role: 'destructive',
              handler: () => {
                this.matatuListRef$.remove(matatu.$key);
              }
            },
            {
              text: 'Cancel',
              role: 'cancel',
              handler: () => {
                //
              }
            }
          ]
        }).present();
      }
      
    
    }



And here the `.html` code that displays the records.

    ...
    <ion-list>
        <button ion-item *ngFor=""let ma3 of matatuListRef$ | async"" (click)=""selectMatatu(ma3)"">
          <h2 style=""font-weight: bold;"">{{ma3.matNumberPlate}}</h2>
          <h3>Driver: {{ma3.matDriver}}</h3>
          <h3>Status: {{ma3.matStatus}}</h3>
        </button>
      </ion-list>
    ...

<!-- Paste the part of the code that shows the problem. (Please indent 4 spaces.) -->
I know `FirebaseListObservable` was refactored to `AngularFireList`, but I assigned my variable to the type `Observable` instead.

`matatuListRef$: Observable<any[]>;`

Bottom line, I get the error `TypeError: _this.matatuListRef$.remove is not a function` on the browser's console when I try to delete the record.


How can I resolve this? 
All suggestions and approaches are highly welcomed,but I would really appreciate it if the solutions focused on using `AngularFireList`.


","`remove()` function is present on the list reference retrieved from Firebase and _not the Observable_ from `valueChanges()`.

You need to set 

    this.matatuListRef$ = this.database.list('matatu-list');
    this.matatuListAsync = this.matatuListRef$.valueChanges();

instead of 

    this.matatuListRef$ = this.database.list('matatu-list').valueChanges();

You can  use `this.matatuListAsync` in the `*ngFor` in the HTML","<angular><firebase><ionic3><angularfire5>"
"47610046","47622397","Add data to DataTable-Bootstrap","I need to know how to add data from  database to DataTable-Bootstrap

This is my table:

    <div class=""container"">
    <button id=""addRow"">Add new row</button>
     <table id=""example"" class=""display"" cellspacing=""0"" width=""100%"">
        <thead>
            <tr>
                <th>Column 1</th>
                <th>Column 2</th>
                <th>Column 3</th>

            </tr>
        </thead> 
    </table>
    </div>

I have a script that add from my database the data automatically to DataTable-Bootstrap

    <script>
    var tblusuario = document.getElementById('example');
    var databaseRef = firebase.database().ref('Usuarios/');
    //var databaseRef = FirebaseFirestore.database().ref('/users');
    var rowindex = 1;

    databaseRef.once('value', function(snapshot) {
        snapshot.forEach(function(childSnapshot) {

            var childKey = childSnapshot.key;
            var childData = childSnapshot.val();

            var row = tblusuario.insertRow(rowindex);
            var cellIndice= row.insertCell(0);
            var cellId = row.insertCell(1);
            var cellNombre = row.insertCell(2);


            cellIndice.innerHTML=rowindex;
            cellId.appendChild(document.createTextNode(childKey));
            cellNombre.appendChild(document.createTextNode(childData.usuario));

                rowindex = rowindex + 1;


        });
    });
</script>

**BUT THE TABLE DOES NOT RECOGNIZE IT**, I can't use the use the functionalities of DataTable

[See the table][1]

After this, I have been studying for 3 days to change the code to put it in the table

I have took this reference(it's okey)

 
       <button id=""addRow"">Add new row</button>
       <script>
       
       $(document).ready(function() {
       var t = $('#example').DataTable();
       var counter = 1;
 
       $('#addRow').on( 'click', function () {
        t.row.add( [
            counter +'.1',
            counter +'.2',
            counter +'.3',

        ] ).draw( false );
 
           counter++;
       } );
 
       // Automatically add a first row of data
       $('#addRow').click();
        } );

</script>


So far, I want to refactor my code in order funtion to dataTable

I have this, but it doesn´t work :(

   

    <script>
  

    $(document).ready(function() {
    var t = $('#example').DataTable();
    var counter = 1;
    var databaseRef = firebase.database().ref('Usuarios/');
    var rowindex = 1;
     databaseRef.once('value', function(snapshot) {
    snapshot.forEach(function(childSnapshot) {
    var childKey = childSnapshot.key;
    var childData = childSnapshot.val();

    var addhere = childKey;
    var b = childData.usuario;

                });
        });
 
      $('#addRow').on( 'click', function () {
  
        t.row.add( [
            addhere,//PROBLEM
            'hola',
            '.3',
        ] ).draw( false );
 
        
       } );
 
      // Automatically add a first row of data
      $('#addRow').click();
     } );

</script>


Someone can help me with the code?
Thanks


  [1]: https://i.stack.imgur.com/Xy4o3.png","By seeing your code it seems you are using [Firebase JavaScript client SDK][1]. So what you can do is retrieve the data from firebase and then inject it to DataTables.

    databaseRef.once('value', function(snapshot) {
      $('#example').DataTable({
        data : snapshot.val()  
      });
    });
You need to keep one thing in mind that data that is being send by the firebase should be in context with the [DataTables Data source types
][2], otherwise you have to use [columns.data][3] or [columns.render][4] to modify the received data.


  [1]: https://firebase.google.com/docs/web/setup
  [2]: https://datatables.net/manual/data/#Data-source-types
  [3]: https://datatables.net/reference/option/columns.data
  [4]: https://datatables.net/reference/option/columns.render","<jquery><html><twitter-bootstrap><datatable>"
"47610255","47610301","Redux Form - initialValues not updating when using compose","reference: https://redux-form.com/6.7.0/examples/initializefromstate/

I am trying to implement a profile form that updates with initial data that is fetched from an api endpoint.

I've been able to get the example to work when referencing the redux-form example above. However when I refactor it to use compose 'initialValues' does not get inserted into the fields. 

This code does not work, initialValues contains data but does not insert into form fields.

    export default compose(
        reduxForm({
            form: 'initializeFromState',
            enableReinitialize : true
        }),
        connect(state => ({
            initialValues: state.profile, // pull initial values from account reducer
        }), actions)
    )(EditProfile);

However this code works which is just slightly modified from reference example. 'initialValues' also contains data.

    EditProfile = reduxForm({
        form: 'initializeFromState', 
        enableReinitialize: true
    })(EditProfile);
    
    EditProfile = connect(
        state => ({
            initialValues: state.profile, 
        }),
        actions, 
    )(EditProfile);
    
    export default EditProfile;

It's looks similar to me but maybe I can't use compose like this? ","You're passing the arguments to `compose` in the wrong order. Composed functions execute from the end toward the beginning. So you'll need to reverse the order to have the equivalent of what you've got in the second example:

    export default compose(
        connect(state => ({
            initialValues: state.profile, // pull initial values from account reducer
        }), actions),
        reduxForm({
            form: 'initializeFromState',
            enableReinitialize : true
        })
    )(EditProfile);","<reactjs><redux><redux-form>"
"47627469","47627754","Swagger2 too many the same annotations","I integrate swagger2 to springboot project, because all of my endpoints authorization is by OAuth2, so I need to add Authorization header to every method, like the following code:

    @ApiImplicitParams({     
        @ApiImplicitParam(paramType=""header"",name=""Authorization"",dataType=""String"",required=true, value=""Bearer {access-token}"")
    })


These same annotations are too many, can I have some ways to refactor them?

","I spend couple of days to find out the solution. Here I give you the docket config for `access_token`. Configure a global parameter, can say common parameters (`access_token`) that includes every end-point. Probable docket configuration given below (later your can changed of your own for api info).

    @Bean
    public Docket api() {
        return new Docket(DocumentationType.SWAGGER_2)
                .select()
                .apis(RequestHandlerSelectors.basePackage(""com.xxx.yyy.resource""))
                .paths(PathSelectors.any())
                .build()
                .globalOperationParameters(commonParameters())
                .apiInfo(apiInfo())
				.ignoredParameterTypes(TokenInfo.class, HttpServletRequest.class, HttpServletResponse.class)
                .securityContexts(Lists.newArrayList(securityContext()))
                .securitySchemes(Lists.newArrayList(apiKey()));
	}
	
	
	private List<Parameter> commonParameters() {
        List<Parameter> parameters = new ArrayList<Parameter>();
        parameters.add(new ParameterBuilder()
                .name(""access_token"")
                .description(""token for authorization"")
                .modelRef(new ModelRef(""string""))
                .parameterType(""query"")
                .required(true)
                .build());

        return parameters;
    }
	
	private ApiInfo apiInfo() {
        ApiInfo apiInfo = new ApiInfo(
                ""My REST API"",
                ""Some custom description of API."",
                ""API TOS"",
                ""Terms of service"",
                ""myeaddress@company.com"",
                ""License of API"",
                ""API license URL"");
        return apiInfo;
    }
	
	private SecurityContext securityContext() {
        return SecurityContext.builder()
                .securityReferences(defaultAuth())
                .forPaths(PathSelectors.any())
                .build();
    }
	
	List<SecurityReference> defaultAuth() {
        AuthorizationScope authorizationScope
                = new AuthorizationScope(""global"", ""accessEverything"");
        AuthorizationScope[] authorizationScopes = new AuthorizationScope[1];
        authorizationScopes[0] = authorizationScope;
        return Lists.newArrayList(
                new SecurityReference(""AUTHORIZATION"", authorizationScopes));
    }

	private ApiKey apiKey() {
        return new ApiKey(""AUTHORIZATION"", ""access_token"", ""header"");
    }

Just paste the code and try from `swagger-ui` and let me know the status.","<java><spring-boot><swagger>"
"47629460","47664517","Distinct Values using Set","I have been using 

        [...new Set(array.map(item => item.age))];

to get a unique array for a dropdown option, however I now need to pass an array with each object in it having a label and a value. 

I have refactored the code as follows, but the unique element is now not working. What am I doing wrong please?

        ...new Set(this.props.records.map(options => {
                return {value: options.campaign, label: options.campaign };
              }))] ","I resolved this using lodash...

        campaignOptions={_.uniqBy(this.props.records.map((options,index) => {return { value: index, label: options.campaign }}),'label')}/>","<javascript><arrays><reactjs>"
"47630266","47633073","Using async await properly in node js","To overcome callback hell in javascript, I'm trying to use async await from legacy code written in SQLServer procedure.
But I'm not sure my code might be write properly.

My first confusing point is when async function returns, should it return resolve() as boolean, or just return reject and handle with try-catch?

Here is my code snippets.
Please correct me to right direction.

apiRoutes.js

    app.route('/api/dansok/cancelDansok')
    	.post(dansokCancelHandler.cancelDansok);

dansokCancelController.js

    const sequelize = models.Sequelize;
    const jwt = require('jsonwebtoken');
    
    async function jwtAccessAuthCheck(accessToken) {
      if (!accessToken) {
        return Promise.reject('Empty access token');
      }
    
      jwt.verify(accessToken,""dipa"",function(err){
        if(err) {
          return Promise.reject('TokenExpiredError.');
        } else {
          return Promise.resolve();
        }
      });
    }
    
    async function checkFeeHist(dansokSeqNo) {
      let feeHist = await models.FeeHist.findOne({  
                      where: { DansokSeqNo: dansokSeqNo}
                    });
      return !!feeHist;
    }
    
    async function getNextDansokHistSerialNo(dansokSeqNo) {
      ....
    }
    
    async function getDansokFee(dansokSeqNo) {
      ....
    }
    
    async function doCancel(dansokSeqNo) {
      try {
        if (await !checkFeeHist(dansokSeqNo)) {
          log.error(""doCancel() invalid dansokSeqNo for cancel, "", dansokSeqNo);
          return;
        }
        let nextDansokSerialNo =  await getNextDansokHistSerialNo(dansokSeqNo);
        await insertNewDansokHist(dansokSeqNo, nextDansokSerialNo);
        await updateDansokHist(dansokSeqNo);
        await updateVBankList(dansokSeqNo, danokFee.VBankSeqNo);
        await getVBankList(dansokSeqNo);
      } catch (e) {
        log.error(""doCancel() exception:"", e);
      }
    }
    
    exports.cancelDansok = function (req, res) {
      res.setHeader(""Content-Type"", ""application/json; charset=utf-8"");
      const dansokSeqNo = req.body.DANSOKSEQNO;
      const discKindCode = req.body.HISTKIND;
      const worker = req.body.PROCWORKER;
      const workerIp = req.body.CREATEIP;
      const accessToken = req.headers.accesstoken;
    
      //check input parameter
      if (!dansokSeqNo || !discKindCode || !worker || !workerIp) {
        let e = {status:400, message:'params are empty.'};
        return res.status(e.status).json(e);
      } 
      
      try {
        jwtAccessAuthCheck(accessToken)
        .then(() => {
          log.info(""jwt success"");
          doCancel(dansokSeqNo).then(() => {
            log.info(""cancelDansok() finish"");
            res.status(200).json({ message: 'cancelDansok success.' });
          });
        });
      } catch(e) {
        return res.status(e.status).json(e);
      }
    };

","You'll need to rewrite **jwtAccessAuthCheck(accessToken)** so that it keeps track of the outcome of its nested tasks. In the code you've written:

    // Code that needs fixes!
    async function jwtAccessAuthCheck(accessToken) {

      // This part is fine. We are in the main async flow.
      if (!accessToken) {
        return Promise.reject('Empty access token');
      }

      // This needs to be rewritten, as the async function itself doesn't know anything about
      // the outcome of `jwt.verify`... 
      jwt.verify(accessToken,""dipa"",function(err){
        if(err) {
          // This is wrapped in a `function(err)` callback, so the return value is irrelevant
          // to the async function itself
          return Promise.reject('TokenExpiredError.');
        } else {
          // Same problem here.
          return Promise.resolve();
        }
      });

      // Since the main async scope didn't handle anything related to `jwt.verify`, the content
      // below will print even before `jwt.verify()` completes! And the async call will be
      // considered complete right away.
      console.log('Completed before jwt.verify() outcome');

    }

A better rewrite would be:

    // Fixed code. The outcome of `jwt.verify` is explicitly delegated back to a new Promise's
    // `resolve` and `reject` handlers, Promise which we await for.
    async function jwtAccessAuthCheck(accessToken) {
      await new Promise((resolve, reject) => {

        if (!accessToken) {
          reject('Empty access token');
          return;
        }

        jwt.verify(accessToken,""dipa"",function(err){
          if(err) {
            reject('TokenExpiredError.');
          } else {
            resolve();
          }
        });

      });

      // We won't consider this async call done until the Promise above completes.
      console.log('Completed');

    }

An alternate signature that would also work in this specific use case:

    // Also works this way without the `async` type:
    function jwtAccessAuthCheck(accessToken) {
      return new Promise((resolve, reject) => {
        ...
      });
    }

---

Regarding your `cancelDansok(req, res)` middleware, since `jwtAccessAuthCheck` is guaranteed to return a `Promise` (you made it an async function), you'll also need to handle its returned Promise directly. No try / catch can handle the outcome of this asynchronous task.

    exports.cancelDansok = function (req, res) {

      ...

      jwtAccessAuthCheck(accessToken)
        .then(() => {
          log.info(""jwt success"");
          return doCancel(dansokSeqNo);
        })
        .then(() => {
          log.info(""cancelDansok() finish"");
          res.status(200).json({ message: 'cancelDansok success.' });
        })
        .catch(e => {
          res.status(e.status).json(e);
        });

    };

---

I strongly suggest reading a few Promise-related articles to get the hang of it. They're very handy and powerful, but also bring a little pain when mixed with other JS patterns (async callbacks, try / catch...).

  - [https://www.promisejs.org/](https://www.promisejs.org/)
  - [Node.js util.promisify](https://nodejs.org/dist/latest-v8.x/docs/api/util.html#util_util_promisify_original)","<node.js><express><async-await><refactoring>"
"47633807","47635474","Have PyCharm extract code in a Python function to a nested function","I have had PyCharm 2017.3 extract some code inside a top-level function to another top-level function, and it does a good job.

However, sometimes I would like to not put the extracted function on top level, but rather it should become a function inside the existing function (as far as I understand, these are called ""inner functions"" in Python.

How can I do this? I have not seen any options in the refactoring dialog.

## Example ##

Original code:

    def foo():
        a = ''
        if a == '':
            b = 'empty'
        else:
            b = 'not empty'
        return b

What extracting does:

    def foo():
        a = ''
        b = bar(a)
        return b
    
    
    def bar(a):
        if a == '':
            b = 'empty'
        else:
            b = 'not empty'
        return b

What I would like to have:

    def foo():
        def bar():
            if a == '':
                b = 'empty'
            else:
                b = 'not empty'
            return b
    
        a = ''
        b = bar(a)
        return b

I am aware that `bar`'s `b` will shadow `foo`'s `b` unless it is renamed in the process. I also thought about completely accepting the shadowing by not returning or requesting `b` and just modifying it inside `bar`.

Please also hint me if what I want is not a good thing for any reason.","It is considered good practice to keep function boundaries isolated: get data as parameters and spit data as return values with as little side-effects as possible. That said, there are a few special cases where you break this rule; many of them is when you are using [closures][1]. Closures are not as idiomatic in Python as they are in Javascript - personally I think it is good but many people disagree.

There is one place were closures are absolutely idiomatic in Python: decorators. For other cases where you would use a closure in order to avoid use of global variables and provide some form of data hiding there are other alternatives in Python. Although some people advocates using closures instead of a class when it has just one method, a plain function combined with [functools.partial][2] can be even better.

This is my guess about why there is no such feature in Pycharm: we almost never do it in Python, instead we tend to keep the function signature as `foo(x)` even if when we can get `x` from the enclosing scope. Hell, in Python our methods receive `self` explicitly where most languages have an implicit `this`. If you write code this way then Pycharm already does everything that is needed when refactoring: it fixes the indentation when you cut & paste.

If you catch yourself doing this kind of refactoring a lot I guess you are coming from a language where closures are more idiomatic like Javascript or Lisp.


  [1]: https://www.learnpython.org/en/Closures
  [2]: https://docs.python.org/3/library/functools.html","<python><function><pycharm><automated-refactoring>"
"47637852","47638330","Can this be refactored to use generic functional principles?","A comparator function `ascending` accepts two arguments - `a` and `b`. It must return an integer comparing the two.

I have a list that I want to sort by name, so I wrote the following functions. 

Is there a functional idiom I can use to combine these two functions, rather than having `byName` take responsibility for composing the resulting function?

    const ascending = (a, b) => a < b ? -1 : (a > b ? 1 : 0);
    const byName = (comparator) => (a, b) => comparator(a.get('name'), b.get('name'));

    // usage
    items.sort(byName(ascending)); // can I move responsibility for composition outside of byName?
","I'm not sure if it satisfies what you're looking for, but here is one possible formulation of your `useTogether` (with a somewhat different signature) that does WORK. I'm not aware of a standard function with precisely that effect.

    const ascending = (a, b) => a.localeCompare(b);
    const byName = (i) => i['name'];
    const useTogether = (selector,consumer) => (...fnArgs) => consumer(...fnArgs.map(selector));
    
    var items = [{name: ""C""},{name: ""A""}, {name:""B""}];
    items.sort(useTogether(byName,ascending)); ","<javascript><functional-programming>"
"47637955","47638448","Exception handling: Differentiating between instances of the same error in Python","What is the recommended way of separately handling exceptions of *the same type* based on differences in what caused the exception?

Let's say one desire to handle the following two instances of AttributeError differently:

* `'str' object has no attribute 'append'` 
* `'float' object has no attribute 'append'`

At the same time, we don't want to handle other attribute errors.

Are there are any generalizable answers that work for all exception types? Can I interrogate the exception object for details using some method or function on the exception object?

    Try:
        blah
    Except AttributeError as exc:
        if exc.baz('foo') is bar:
             handle 'str' object has no attribute 'append'
        elif plugh(exc):
             handle 'float' object has no attribute 'append'
        else:
             raise exc

I assume that the obvious answer is to refactor. My question specifically regards the cases where that would be inefficient or simply not possible (if there are any such cases at all). ","You can see what methods and attributes and object has by using [`dir`](https://docs.python.org/3/library/functions.html#dir).

In Python 3.6, from:

    a = 'hello'
    try:
        a.append(2)
    except AttributeError as e:
        print(dir(e))

Which gives:

    ['__cause__', '__class__', '__context__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__setstate__', '__sizeof__', '__str__', '__subclasshook__', '__suppress_context__', '__traceback__', 'args', 'with_traceback']

That doesn't give us much to work with since we don't want a dunder. It seems then that the best you could get is to use `args` which returns the string in a tuple:

    a = 'hello'
    try:
        a.append(2)
    except AttributeError as e:
        if 'str' in e.args[0]:
            print('Need to handle string')
        elif 'float' in e.args[0]:
            print('Need to handle float')","<python><python-3.x><exception><error-handling><exception-handling>"
"47646176","47646215","How to use Vuex types constants with module namespace?","I have this modules/things.js Vuex-module:
    
    const state = {
      firstThing: 'abc',
      secondThing: 'def',
    };
    
    const getters = {
      getFirstThing: state => state.firstThing,
      getSecondThing: state => state.secondThing,
    };
    
    const mutations = {
      setFirstThing: (state, payload) => state.firstThing = payload,
      setSecondThing: (state, payload) => state.secondThing = payload
    };
    
    const actions = {};
    
    export default {
      namespaced: true,   <------
      state,
      mutations,
      actions,
      getters
    };
    
    
I use namespaced flag can work with this module like this:

    this.$store.state.things.firstThing             <-- return abc here
    this.$store.commit('things/setFirstThing', 10)
    this.$store.getters['things/getFirstThing']     <-- return abc here
    
If I will use constants like in official example, and refactor my modules/things.js file like this:

    
    export const Types = {
      getters: {
        GET_FIRST_THING: 'GET_FIRST_THING',
        GET_SECOND_THING: 'GET_SECOND_THING',
      },
      mutations: {
        SET_FIRST_THING: 'SET_FIRST_THING',
        SET_SECOND_THING: 'SET_SECOND_THING',
      }
    };
    
    const getters = {
      [Types.getters.GET_FIRST_THING]: state => state.firstThing,
      [Types.getters.GET_SECOND_THING]: state => state.secondThing,
    };
    
    const mutations = {
      [Types.mutations.SET_FIRST_THING]: (state, payload) => state.firstThing = payload,
      [Types.mutations.SET_SECOND_THING]: (state, payload) => state.secondThing = payload
    };

I will have to use namespace prefix: 

    this.$store.commit('things/' + Types.mutations.SET_FIRST_THING, 10);
    this.$store.getters['things/' +  + Types.getters.GET_FIRST_THING]  
    
If I will include prefix to Types constant, I will have to use string prefix 'things/' for mutations/actions/getters declaration:

    const getters = {
      ['things/' + Types.getters.GET_FIRST_THING]: state => state.firstThing,
      ['things/' + Types.getters.GET_SECOND_THING]: state => state.secondThing,
    };
     
How to avoid that?","You can just disable namespacing by `namepsace: false` and just use constants with prefixes - it will work.

But if you still want to keep `namepsace: true` in module and use constants also, you can define two types of constants: **public** and **private**:

    export const Types = {                                               // <-- public
      getters: {
        GET_FIRST_THING: 'GET_FIRST_THING',
        GET_SECOND_THING: 'GET_SECOND_THING',
      },
      mutations: {
        SET_FIRST_THING: 'SET_FIRST_THING',
        SET_SECOND_THING: 'SET_SECOND_THING',
      }
    };
    
    const _types = removeNamespace('things/', Types);                    // <-- private
    
Then use private `_types` only inside Vuex module:
    
    const getters = {
      [_types.getters.GET_FIRST_THING]: state => state.firstThing,       
      [_types.getters.GET_SECOND_THING]: state => state.secondThing,
    };
    
    //...
    
and public `Types` outside module: 

    // some-component.vue
    this.$store.commit('things/' + Types.mutations.SET_FIRST_THING, 10);
    this.$store.getters['things/' +  + Types.getters.GET_FIRST_THING]
    // ...
    
Also implement simple `removeNamespace` function in your new `namespace-helper.js` file:

    export default function removeNamespace(namespace, types){
      return _.reduce(types, (typeObj, typeValue, typeName) => {
        typeObj[typeName] = _.reduce(typeValue, (obj, v, k)=>{
          obj[k] = v.replace(namespace, '');
          return obj;
        }, {});
        return typeObj;
      }, {});
    }","<javascript><vue.js><vuejs2><vuex>"
"47646264","47646372","Switch Statement inside condition refactoring","I have a piece of code that works but I do not like the way it looks. It looks clunky and messy. Is basically an if statement that has a switch statement inside.

Is there a way to refactor this? Maybe a well know to deal with them?

    private Direction updateFace(Coordinates coordinate) {
    
    	if (coordinate.isLeft()) {
    		switch (coordinate.getDirection()) {
    		case NORTH:
    			return Direction.WEST;
    		case SOUTH:
    			return Direction.EASTH;
    		case EASTH:
    			return Direction.NORTH;
    		case WEST:
    			return Direction.SOUTH;
    		}
    	}
    
    	if (robot.getCommand().isRight()) {
    		switch (coordinate.getDirection()) {
    		case NORTH:
    			return Direction.EASTH;
    		case SOUTH:
    			return Direction.WEST;
    		case EASTH:
    			return Direction.SOUTH;
    		case WEST:
    			return Direction.NORTH;
    		}
    	}
    }


","If you order your enum clockwise, you can walk from one to the next with a simple index:

    enum Direction {
        NORTH, EAST, SOUTH, WEST;
    
        public Direction rotate(boolean clockwise) {
            Direction[] values = values();
            int nextIndex = ordinal() + (clockwise ? 1 : 3);
            return values[nextIndex % values.length];
        }
    }","<java><if-statement><switch-statement><conditional>"
"47654277","47654603","The resize function loads the page","For the side menu there is a recalculation for the height: adaptive, for the tablet and for the desktop. It seems to be working more and less, but when I started testing on real devices, I noticed that everything is working too slowly because of the function of what is written in the function of resize. Do not tell me how refactor the code in a normal way, so that the speed of work on devices is faster? Thank you!

https://codepen.io/malinosky/pen/JOVdOG 

     //расчет высоты body
    var calcHeightFilter = function calcHeightFilter() {
        var bodyHeight = $(document).outerHeight(true);
        var asideHeight = $('.section--aside').height();

        if (($(document).width()) < 768) {
            if ($('.section--aside').hasClass('open-aside')) {
                $('.js-anchor-top').css(""display"", ""none"");
                if (bodyHeight > asideHeight) {
                    $('body').css(""overflow"", ""hidden"");
                    $('body').height(asideHeight + 169); // Значение 169 - это хеадер + футер
                }
            }
        }

        if (($(document).width()) >= 768 && ($(document).width()) <= 1023 ) {
            var tabletFilterHeight = $('.wrap-main').height();
            $("".section--aside"").height(tabletFilterHeight);
            $("".section--aside"").css(""overflow-y"", ""auto"");


            $("".section--aside"").css(""height"", function(){ 
                return $('.wrap-main').height() + 70;
            });



            var newwTabletFilterHeight = $('.section--content').height() + 112 + $('.footer').height(); // 112 - это шапка
                var asideNewwHeightH = $("".section--aside"").height(newwTabletFilterHeight - 70);
                $('body').height(newwTabletFilterHeight);

            $(window).scroll(function() {
                if ($(window).scrollTop() >= $(document).height() - $(window).height()) {
                    calcHeightFilter();
                    $('.button_more').css('box-shadow', '0px 0px 13px 0px rgba(0, 0, 0, 0.2)');
                } else {
                    $('.button_more').css('box-shadow', 'none');
                }
            });
        }

        if (($(document).width()) > 1023) {
            $('body').css(""overflow-y"", ""visible"");
            $('section--aside').css(""overflow-y"", ""visible"");
        }

            $(window).on('resize', function(){

                if (($(document).width()) < 768) {
                    if ($('.section--aside').hasClass('open-aside')) {
                        $('.js-anchor-top').css(""display"", ""none"");
                            $('body').css(""overflow"", ""hidden"");
                            $('.section--aside').css(""overflow"", ""hidden"");
                            $('.section--aside').css(""height"", ""auto"");
                            $(""body"").css(""height"", function(){ 
                                return $('.section--aside').height() + 169;
                            });
                            $('.section--aside__close').css(""display"", ""block"");
                            $('.section-empty').remove();
                    }
                }


                if (($(document).width()) >= 768 && ($(document).width()) <= 1023 ) {
                    var newTabletFilterHeight = $('.section--content').height() + 112 + $('.footer').height();
                    var asideNewHeightH = $("".section--aside"").height(newTabletFilterHeight);
                    $('body').height(newTabletFilterHeight);
                    $("".section--aside"").css(""overflow-y"", ""auto"");
                    if ($('.section--aside').hasClass('open-aside')) {
                        $('.section--aside__close').css(""display"", ""block"");
                        $("".wrap-main"").append('<div class=""section-empty"">');
                        $('body').height(newTabletFilterHeight + $('.section-empty').height());
                    }
                }


                if (($(document).width()) > 1023) {
                    $('body').css(""height"", ""inherit"");
                    $('.section-empty').remove();
                    $("".footer"").css(""margin-bottom"", ""0"");
                    $('.section--aside__close').css(""display"", ""none"");
                    $('body').css(""overflow"", ""visible"");
                    $('.section--aside').css(""overflow"", ""visible"");
                    $('.section--aside').css(""height"", ""auto"");
                }
            });

    }

    // Открытие/закрытие фильтра в каталоге
    $(document).on('click', '.js-filter_show', function(){
        $("".section--aside"").addClass(""open-aside"");
        $("".section--catalog"").addClass(""overlay-section"");
        $('.section--aside__close').css(""display"", ""block"");
    
        if (($(document).width()) >= 768 && ($(document).width()) <= 1023 ) {
            $("".wrap-main"").append('<div class=""section-empty"">');
        }

        calcHeightFilter();
    });

    $(document).on('click', '.section--aside__close', function(){
        $("".section--aside"").removeClass(""open-aside"");
        $('.section--aside__close').css(""display"", ""none"");
        $("".section--catalog"").removeClass(""overlay-section"");
        $('.section-empty').remove();
        $('body').css(""overflow"", ""visible"");
        $('body').css(""height"", ""100%"");
    });","The `$(window).on('resize')` callback can be called many times in quick succession. Instead of recalculating everything immediately, I would suggest debouncing the calculations:

    $(window).on('resize', _debounce);
    
    // Time to wait before calling resize in milliseconds
    var DEBOUNCE_DELAY = 250;
     
    var timeout = null;
    function _debounce() {
    	timeout = setTimeout(function() {
    		timeout = null;
    		resize();
    	}, DEBOUNCE_DELAY);
    }

    function resize() {
        // perform all calculations here.
    }
    
How this works is the `_debounce` function sets up a timer which waits `DEBOUNCE_DELAY` milliseconds before calling the `resize` function. If `_debounce` is called and there is an existing timer, the timer gets cancelled so that `_resize` is only called once, after the *last* call to `_debounce`","<javascript><jquery>"
"47656150","47656409","Each column of a data.frame as a factor of two levels","I have the following `data.frame`:

    # Define data.frame 
      u<-data.frame(matrix(c(0,0,0,1,0,1,1,1,0), nrow=3))
    # Define each column as a factor with two levels 
    r <- as.data.frame(apply(u,2,function(x) factor(x, levels = c(0,1))))

Although I apply the factor function to each column defining the levels, the first column only presents one of them (the 0; the only value in the column) and I want it to be a factor with two levels (0 and 1).

Any idea about how to solve it?","Use `lapply` instead:  
  

    r <- data.frame(lapply(u, function(x) factor(x, levels = c(0,1))))
  
 
All data frames are list of lists, so this naturally works.
","<r><refactoring><apply>"
"47657082","47657258","How do I pass gson JsonObject between fragments in the same activity","I'm refactoring my app and currently rewriting two activities as two fragments in the same activity. This was how I used to send gson from the first activity to the second activity:

Activity1:

    Intent intent = new Intent(this, Activity2.class);
    intent.putExtra(""form"", gson.toJson(form));
    startActivity(intent);

Activity2:

    intent = getIntent();
    form = gson.fromJson(intent.getStringExtra(""form""), JsonObject.class);
    
Now that I've rewritten `Activity1` and `Activity2` as fragments in the same activity, is there a similar approach that I can use to send and retrieve data in the fragments? I just find using intents very intuitive, but I figured fragments use a different way of communicating with one another.","    Bundle args = new Bundle();
    args.putString(""form"", gson.toJson(form));
    secondFragment.setArguments(args);

and in your targeted Fragment :

    getArguments().getString(""form"");



 

","<android><android-fragments><android-gson>"
"47657159","47660848","How are the equational reasoning operators used in practice?","The [Agda Standard Library](https://agda.github.io/agda-stdlib/Relation.Binary.EqReasoning.html) exports some operators that allow you to write proofs in a manner similar to what you would do on paper, or how it is taught in the Haskell community. While you can write ""conventional"" Agda proofs in a somewhat systematic manner by refining a Goal using `with` abstractions, `rewrite`s or helper lemmas as needed, it isn't really clear to me how a proof using the equality reasoning primitives ""comes to be"".

That is, while you can find examples about what these proofs look like when they are finished and type-check [here](http://people.inf.elte.hu/divip/AgdaTutorial/Functions.Equality_Proofs.html#equational-reasoning) and [there](https://www.csie.ntu.edu.tw/~b94087/aopa-intro.pdf), these already worked examples don't show you how they are developed in a systematic step-by-step (maybe hole-driven) manner.

How is it done in practice? Do people ""refactor"" an already existing proof? Do you try to ""burn the candle from both sides"" by starting with the left-hand and right-hand sides of the initial Goal and a hole in the middle?

Furthermore, the [Agda documentation](https://agda.readthedocs.io/en/v2.5.3/tools/auto.html#equality-reasoning) states that if the equality reasoning primitives are in scope, ""then Auto will do equality reasoning using these constructs"". What does that mean?

I would appreciate it if someone could point me in the right direction, or even post an example of how they develop these kinds of proofs step-by-step, what questions they ask themselves as they go through it, where they put the holes and so on. Thanks!","I think it would be more helpful for you to look at the definitions for equational reasoning for Identity here [Equational Reasoning][1]. The main point is that it is just a nicer way to apply transitivity chains and allowing the user to see the actual expression in code, rather than the proof evidence which is not that easy to read.

The way I go about building a proof using equational reasoning for any setoid is this. With the example of natural numbers

    data ℕ : Set where
      zero : ℕ
      succ : ℕ → ℕ
    
    _+_ : ℕ → ℕ → ℕ
    m + zero   = m
    m + succ n = succ (m + n)


Let's take commutativity as an example.
This is how I start with the goals.

    comm+ : ∀ m n → m + n ≡ n + m
    comm+ m zero     = {!!}
    comm+ m (succ n) =
      begin
        succ (m + n)
      ≡⟨ {!!} ⟩
        succ n + m
      ∎

Now I see the original expression and goal and my goal proof is between the brackets.
I work only on the expression leaving the proof objects untouched and add 
what I think should work.

    comm+ : ∀ m n → m + n ≡ n + m
    comm+ m zero     = {!!}
    comm+ m (succ n) =
      begin
        succ (m + n)
      ≡⟨ {!!} ⟩
        succ (n + m)
      ≡⟨ {!!}⟩
        succ n + m
      ∎

Once I think I have a proof, I work on the proof objects that justify my steps.

Regarding the auto-tactic, you should not bother with that in my opinion. It's not being worked on for a while.

  [1]: https://agda.github.io/agda-stdlib/Relation.Binary.PropositionalEquality.html#5706","<agda>"
"47662975","47666305","ArgumentError when accessing pageobject widget","

    class MainTabsWidget  < PageObject::Elements::UnorderedList
      include  PageObject
      include  PageObject::PageFactory
    
      link(:first_link, :text => 'First')
      link(:second_link, :text => 'Second')
      link(:third_link, :text => 'Third')
      link(:category_link, :text => 'Category')
      link(:subcat1_link, :text => 'Subcat1')
      link(:subcat2_link, :text => 'Subcat2')
    
      def goto_tab_item(tab_item)
        items = tab_item.split /\//
        items.each do |item|
          case item
            when 'First'
              first_link
            when 'Second'
              second_link
            when 'Third'
              third_link
            when 'Category'
              category_link
            when 'Subcat1'
              subcat1_link
            when 'Subcat2'
              subcat2_link
          end
        end
      end
    end
    
    PageObject.register_widget :main_menu, MainTabsWidget , :ul


I have a page called landing page that uses the widget in the following manner....


    class LandingPage
      include  PageObject
      include  PageObject::PageFactory
    
    
      main_menu(:menu_tabs, :id => 'mainMenu')
    
    
      def select_menu_item(item)
        menu_tabs_element.go_to_tab_item item
      end
    end


This actually did work at one point.  If you pass 'First' for  select_menu_item, it will click to the page specified by first_link.  If you specify 'Category/Subcat1' it will click on the category link and then subcat1.  

Howerver, something changed.  We are transition from watir-webdriver gem to watir (6.10) gem, and now the code gets the argument exeption 

    'ArgumentError: wrong number of arguments (0 for 1..2)'

This occurs when menu_tabs_element gets referenced in any way.  I've run out of ideas to remedy this.
","It is not clear to me which change in Watir would cause this issue. It seems more likely a change in Page-Object. At any rate, here are 2 solutions. Note that this was tested with Page-Object v 2.2.4.

**Using Widgets**

As pointed out by [Alexis in Page-Object Issue 263][1], including page object accessor methods in widgets is not as straight forward as one would expect. In the `MainTabsWidget` class, instead of `include PageObject`, you need to do:

    extend PageObject::Accessors  # to get the accessor methods
    attr_reader :platform         # the accessor methods don't work without a platform
    
With this change, your page object should work.

**Using Page Section**

Page-Object has a page section feature that might better suit your needs. It simplifies some of the code (ie address the above issue).

You define a class to represent your main tabs section. Note that you do not need to register the section or have the multi-line setup as with Widgets.

    class MainTabs
      include PageObject
      include PageObject::PageFactory
      
      link(:first_link, :text => 'First')
      link(:second_link, :text => 'Second')
      link(:third_link, :text => 'Third')
      link(:category_link, :text => 'Category')
      link(:subcat1_link, :text => 'Subcat1')
      link(:subcat2_link, :text => 'Subcat2')
    
      def select_menu_item(tab_item)
        items = tab_item.split /\//
        items.each do |item|
          case item
            when 'First'
              first_link
            when 'Second'
              second_link
            when 'Third'
              third_link
            when 'Category'
              category_link
            when 'Subcat1'
              subcat1_link
            when 'Subcat2'
              subcat2_link
          end
        end
      end
    end
      
The page object can simply become:
      
    class LandingPage
      include PageObject
      include PageObject::PageFactory
    
      page_section(:menu_tabs, MainTabs, :id => 'mainMenu')
    end

The clicking of the menu would change to:

    page.menu_tabs.select_menu_item('First')

(or you could continue to define a `#select_menu_item` method in `LandingPage` to avoid downstream changes)


  [1]: https://github.com/cheezy/page-object/issues/263","<ruby><automated-tests><watir><pageobjects><page-object-gem>"
"47682239","47700454","Problems with Feature Branches In Git","The following description is looking for help with improving my day to day workflow with git and solving an issue I'm not having with additional work.

Let's say I create a remote feature branch from Jira. Then I track it so that it creates a local copy of that remote branch on my local repo. After I complete it that feature, I push that remote version of that feature branch and then make a pull request into the remote development branch. My issue is I've been given the green light to go in and refactor code because this project code is all over the place. However, if I create a branch off of my local dev its not going to be my changes from the local feature branches that I've done. Should I push my local feature branches into my local dev branch?


    Branches

    Local

       - Development
       - Feature 1
       - Feature 2

    Remote

       - Master
       - Development
       - Feature 1
       - Feature 2","The best course of action would be to ask your project lead what they would do. That way, the fault of doing it wrongly won't lie with you. :)

If that's not an option, I would try to follow the [git flow](http://nvie.com/posts/a-successful-git-branching-model/) approach. What this means in detail comes down to what you mean by this statement:

> I've been given the green light to go in and refactor code because this project code is all over the place.

Does this mean refactoring everything that's currently in the `Development` branch? If so, your approach should be as follows:

 1. Create a new feature branch that branches off of `Development`
 2. Using that feature branch, refactor the code base
 3. Create a pull request to merge your feature branch into `Development`

> However, if I create a branch off of my local dev its not going to be my changes from the local feature branches that I've done.

That's true, and you have two options here:

- Do the refactoring of `Development` first. As soon as that is done, refactor the code for your new feature on your local feature branch, then open a pull request to merge it into `Development`.
- Open the pull request to merge it into `Development` first - as soon as it is merged into `Development`, you can begin the refactoring of `Development` (which then includes refactoring the code introduced for your new feature as well, of course).

The former approach might save you some work in terms of refactoring, but the latter approach will get the feature out quicker. Once again, depending on how much time is necessary to refactor the code base, this question might be suited for your project lead.","<git>"
"47684234","47698594","PowerMockito.mockStatic() of a static method is not working correctly in Spring Boot Test","<!-- What are you trying to accomplish? (Please include sample data.) -->

This is the setup of the test class:
    
    @RunWith(PowerMockRunner.class)
    @PowerMockIgnore(""javax.management.*"")
    @PowerMockRunnerDelegate(SpringRunner.class)
    @SpringBootTest(webEnvironment = WebEnvironment.RANDOM_PORT, classes = ServiceApplication.class)
    @PrepareForTest({ MyClass.class })
    public class ControllerTest {
    
        @Autowired
        public TestRestTemplate restTemplate;
    
        public static MyClass myClass = Mockito.mock(MyClass.class);
    
        @BeforeClass
        public static void beforeClassSetup() throws Exception {
            PowerMockito.mockStatic(MyClass.class);
            BDDMockito.given(MyClass.getInstance(Mockito.anyString())).willReturn(myClass);
            BDDMockito.given(myClass.foo()).willReturn(""BAR"");
            // ...
        }
     .
     .
     .
     // test cases


In configuration class of this project, for load some beans, I use this static call for generate the instance.

    @Configuration
    @ComponentScan(basePackages = { ""package.from.another.project.in.production"" })
    public class Beans {
    
        @Bean
        public MyClass myClass() {
            return MyClass.getInstance(K.FOO);
        }
    
    }

This is my controller that uses the bean, as well as the static call according to the parameters.


    @RestController
    public class Controller {
    
        @Autowired
        private MyClass myClass;
        
        @GetMapping(path = ""/"")
        public String doSomething() {
                String filter = myClass.foo();
                return filter;
        }
        
        @GetMapping(path = ""/two"")
        public String doSomething2(@RequestParam Map<String, String> allParams) {
                String accountId = allParams.get(""account_id"");
                String filter = MyClass.getInstance(K.BAR + accountId).foo();
                return filter;
        }
    }

The bean is autowired because its use is greater than instantiation by the `getInstance()` method. In addition, the instantiation by the `getIntance()` method is variable according to the parameter. Don't ask me why the MyClass class is like this, because the API was old and I'm slowly refactoring.

The issue is that the autowired bean is correctly mocked by `PowerMockito.mockStatic(MyClass.class)` and also by `@MockBean` (which I used initially), but the call `MyClass.getInstance()` in `Controller.class` does not work at all.

I think the problem should happen when Spring climbs its environment and does not load everything that has been correctly mocked by PowerMockito, just the classes of its beans. Can anyone help me solve this problem?","	
This is just a wild guess, have you tried using regular Mockito as opposed to BDDMockito? Just want to rule it out as a culprit.","<java><unit-testing><spring-boot>"
"47694371","47694432","regex to ignore lines with specific symbol","I'm trying to get a regex to set change relative paths to absolute with an alias, and ignore any lines with alias already indicated with the @ symbol to prevent folder/file name matches.  I've got as far as the replace and match perfectly, but I can't do the ignore lines with @ bit.

[![RegEx JP][1]][1]

[https://regex101.com/r/vRUegE/1/][2]

I would have expected the lines with @ to be ignored

  [1]: https://i.stack.imgur.com/Hppq8.jpg
  [2]: https://regex101.com/r/vRUegE/1/","You may add a [*negative lookahead*][1] `(?!@)` after the positive lookbehind:

    (?<=from..)(?!@)(.*)(?=module)(.*)(module)
               ^^^^^
See [this regex demo](https://regex101.com/r/LLU4z9/1). The `(?!@)` will fail the match once `@` is found right after `from` and any 2 chars immediately to the right of it.

Note that the regex might need further adjusting as `(?=module)` does not make much sense here. You might as well use [`(?<=from..)(?!@)(.*)(module)`](https://regex101.com/r/LLU4z9/2).


  [1]: https://www.regular-expressions.info/lookaround.html","<regex><relative-path><regex-lookarounds><absolute-path>"
"47696151","47696758","Is it possible to apply refactoring using OmniPascal?","I've installed [OmniPascal][1] extension in Visual Studio Code to use it for coding in Delphi and I am loving it. Code completion, parameters hint, go to declarations, all working 100%! Nonetheless, I am missing the refactor commands like rename (CTRL+SHIFT+E). Is that already implemented in OmniPascal?


  [1]: http://omnipascal.com/","There are currently no refactoring tools implemented in OmniPascal. *Rename* and *Extract method* are planned for the future but there are other features that need to be implemented before OmniPascal can turn into a **reliable** refactoring tool.

As long as OmniPascal doesn't handle all language features correctly (like `with`-blocks or class helpers) the rename command would produce wrong results. You don't want to work with such a refactoring tool.","<refactoring><omnipascal>"
"47696614","47697269","Is this a violation of the Law of Demeter? vs. readable code","The code below brakes apparently the Law of Demeter, i.e. methods `getServer().methodx(...)`. From other side it looks pretty compact = better readable?  
 
    abstract class BaseManager {
        ResultSet find(String searchText) {
            return getServer().find(searchText);
        }
    
        ResultSet fetch(String searchText) {
            return getServer().fetch(searchText);
        }
    
        void save(String saveText) {
            getServer().save(saveText);
        }
    
        abstract BaseManager getServer();
    }
    
    class Server1Manager extends BaseManager {
        @Override
        protected BaseManager getServer() {
            return server1;
        }
    }
    
    class Server2Manager extends BaseManager {
        @Override
        protected BaseManager getServer() {
            return server2;
        }
    }

If the law is violated, them how to refactor this code? Is the following solution acceptable (does it not look like a code duplication)?:

    abstract class BaseManager {
        abstract ResultSet find(String searchText);
        abstract ResultSet fetch(String fetchText);
        abstract void save(String saveText);
    }
    
    class Server1Manager extends BaseManager {
        @Override
        ResultSet find(String searchText) {
            return server1.find(searchText);
        }
    
        @Override
        ResultSet fetch(String fetchText) {
            return server1.fetch(fetchText);;
        }
    
        @Override
        void save(String saveText) {
            server1.save(saveText);
        }
    }
    
    class Server2Manager extends BaseManager {
        @Override
        ResultSet find(String searchText) {
            return server2.find(searchText);
        }
    
        @Override
        ResultSet fetch(String fetchText) {
            return server2.fetch(fetchText);;
        }
    
        @Override
        void save(String saveText) {
            server2.save(saveText);
        }
    }

Many thanks in advance.


","> The code below brakes [sic] apparently the Law of Demeter, i.e.
> methods getServer().methodx(...). From other side it looks pretty
> compact = better readable?

The point of your design is lost on me.  If compactness is your goal, then would not this be even better?

    class Manager {
        private Server server;
    
        public Manager(Server server) {
            this.server = server;
        }
    
        ResultSet find(String searchText) {
            server.find(searchText);
        }
    
        ResultSet fetch(String fetchText) {
            server.fetch(fetchText);
        }
    
        void save(String saveText) {
            server.save(saveText);
        }
    }

In addition to being even more compact and clear, that happens to conform to the Law of Demeter.  Moreover, it follows the principle of preferring composition over inheritance, which I think you'll see is favored (but not implied) by the Law of Demeter.

> If the law is violated, them how to refactor this code?

I'm still liking what I presented above.

> Is the
> following solution acceptable (does it not look like a code
> duplication)?: [...]

If you presented that to me for code review, I would certainly ask what you think you gain from inheritance there.  One might argue a bit over whether your code is technically duplicative, but it is certainly longer and more complex than the non-inheritance version I presented.  And the non-inheritance version leaves no question about code duplication.
","<java><law-of-demeter>"
"47707089","47707944","DDD - How does the domain receive client data","I'm planning to refactor a legacy .NET project that I'm maintaining, there are mainly 4 projects involved:

 - `My.Company.Web` - The presentation layer. ASP.NET MVC.
 - `My.Company.Service` - The service layer, defines service interfaces and contains command handlers. Invoked by the web layer.
 - `My.Company.DTO` - The assembly that contains DTO classes for data transfer between the domain and web layers.
 - `My.Company.Domain` - The domain layer.
 - `My.Company.Data` - The persistence layer.
 
When user submits a form to update a person's details, the process looks somewhat like this:

1. Using the submitted data, controller constructs a `PersonDetailsDTO` which consists of multiple simple fields to hold `FirstName`, `LastName`, `Age` and etc, and a complex type object called `AddressDTO` that holds address details: `var dto = new PersonDetails(...);`
2. Controller calls the service layer with the DTO: 

        _personService.UpdateDetails(dto);
3. In the service:

        public void UpdatePerson(PersonDetailsDTO dto)
        {
            var person = _personRepository.GetById(dto.PersonId);
            person.Update(dto);
            _personRepository.Update(person);
        }

4. In the Person domain:

        public class Person : AggregateRoot
        {
            private string FirstName;
            .... // other fields
            private Address Address;

            public void Update(PersonDetailsDTO dto)
            {
                FirstName = dto.FirstName;
                .... // other fields
                Address.Update(dto.AddressDTO); // update the value object - address
            }
        }

As you can see here, the `Person` domain references the `PersonDetailsDTO`. This feels wrong to me as DTOs are means to present the data in the domain to its clients while not exposing the domain itself. and the domain should **not** be concerned with how it's presented to the clients.

Also IMO the DTOs should live in the `My.Company.Service` project as it's the service that defines the operation/data transfer contracts.

But then how would the service pass the details on to the domain? Would it have to be a loooong list of parameters: `person.Update(firstName, lastName, age, gender, street1, street2, state, postcode...) `. This certainly looks wrong to me.

Or does the domain have to define yet another set of it's own ""DTOs"" to receive client data?

I have gone through a LOT of tutorials and SO posts and no one seem to share my concern, so I'm starting to think I'm missing something here, could someone point me to the right direction?","I am no expert of DDD, but I would do as follows.
You already have a Value Object named `Address` similarly you could have another Value Object as `PersonalDetails` which will contain firstName, lastName, age, gender etc. and the `Person` entity will have two behaviors like `updatePersonalDetails()` and `updateAddress()`. My application service will look like below.

    public void UpdatePerson(PersonDetailsDTO dto)
    {
        var person = _personRepository.GetById(dto.PersonId);
        Address address = new Address(dto.getStreet1, dto.getStreet2,...);
        PersonalDetails details = new PersonalDetails(dto.getFirstName,dto.getLastName(),...);
        person.updatePersonalDetails(details);
        person.updateAddress(address);
       _personRepository.save(person);
    }","<c#><design-patterns><domain-driven-design>"
"47713842","47774648","How to bulk delete records using temporary tables in Hibernate?","I have a question. Where did these methods go?

    Dialect.supportsTemporaryTables();
    Dialect.generateTemporaryTableName();
    Dialect.dropTemporaryTableAfterUse();
    Dialect.getDropTemporaryTableString();

I've tried to browse git history for `Dialect.java`, but no luck. I found that something like
`MultiTableBulkIdStrategy` was created but I couldn't find any example of how to use it.

To the point...I have legacy code (using hibernate 4.3.11) which is doing batch delete from
multiple tables using temporary table. But it deletes 1000 rows at once in one run, then commit transaction and so on.
There are conditions in insert select which is used to fill in temp table with ids.

It was done using native SQL, with methods mentioned above. But not I can't find a way how
to refactor it.

Any ideas or pointers?

Thanks.
","The methods were present in [version 4.3.11](http://www.atetric.com/atetric/javadoc/org.hibernate/hibernate-core/4.3.11.Final/org/hibernate/dialect/Dialect.html) but removed in [version 5.0.0](http://www.atetric.com/atetric/javadoc/org.hibernate/hibernate-core/5.0.0.Final/org/hibernate/dialect/Dialect.html). It seems a bit unusual that they were removed rather than deprecated - the background is on this Jira ticket: https://hibernate.atlassian.net/browse/HHH-9724#commentauthor_67347_verbose

To quote from this:

> Long term, I think the best approach is to remove the Dialect method
> intended to support table tabled in a piecemeal fashion and to make
> MultiTableBulkIdStrategy be a fully self-contained contract.

The methods were removed in this commit: https://github.com/hibernate/hibernate-orm/commit/ae43670290d05db28c322acb67431fe88db537d2

So it seems that [`getDefaultMultiTableBulkIdStrategy()`](http://docs.jboss.org/hibernate/orm/5.0/javadocs/) is the intended replacement for these methods - but I'm not entirely clear on how, as it currently has no Javadoc. Guess you could try to work it out from the source code (or perhaps try to contact [Steve Ebersole](https://stackoverflow.com/users/1082300/steve-ebersole), who implemented the change?)","<java><spring><hibernate><temp-tables><bulk-delete>"
"47715512","47715513","Visual studio 2017 intellisense errors got mixed-up after crash","During a heavy code-refactoring session, I got a BSOD (Blue Screen Of Death). After restart, Visual Studio started to exhibit a strange intellisense problem:

(I was in the midst of refactoring a file with few thousand lines of code, with about a hundred errors)

After a build, the errors were at the right locations. After fixing any of them, all intellisense errors moved around like crazy and became unusable. I needed another F6 (build) and wait until things sort out.

I deleted every non source controlled folder in my solution, deleted the cache, ... Nothing seemed to solve the problem.","The problem turns out to be system time!!

After the crash, my system time went back a few hours.
After I fixed the time, the problem got solved.

PS: the reason for hour change is this: I've got a dual-boot Windows-Linux (Fedora). Fedora keeps the system time in UTC, while windows keeps it in Local time. So after any restart from Linux to Windows, I've got the wrong time.","<c#><visual-studio><intellisense>"
"47715936","47730302","Refactoring a Controller containing Many-to-many relationship","I'm following a tutorial on making a blog and I was wondering how I can refactor some of the codes that look a mess. Specifically the many-to-many relationship while parsing in tags. Is there a better way to reduce this into a smaller function on the controller?

      public ActionResult Create(int? id, string title, string body, DateTime datetime, string tags)
       {
          Post post = GetPost(id);
          post.Title = title;
          post.Body = body;
          post.Tags.Clear();
    // I'D Like to refactor this point on to look something like this: ParseTags(tags); 
    rather than this
          tags = tags ?? string.Empty;
         string[] tagNames = tags.Split(new char[]{' '}, StringSplitOptions.RemoveEmptyEntries);
                foreach(string tagName in tagNames)
                  {
                    post.Tags.Add(GetTag(tagNames));
                  } 
           }
    
    private Tag GetTag(string tagName)
        {
        return _context.Tags.Where(x => x.Name == tagName).FirstOrDefault() ??
        new Tag() { Name = tagName };
    }","Rather than creating a new method on the controller, you could encapsulate all the behaviour for parsing and searching for tags in a class, maybe something like this:

    public class Tags
    {
        private readonly IEnumerable<Tag> contextTags;
        private readonly string rawTags;

        public Tags(string tags, IEnumerable<Tag> contextTags)
        {
            this.rawTags = tags ?? string.Empty;
            this.contextTags = contextTags;
        }

        public IEnumerable<Tag> ToList()
        {
            List<Tag> tags = new List<Tag>();

            string[] tagNames = this.rawTags.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);

            foreach (string tagName in tagNames)
            {
                tags.Add(this.GetTag(tagName));
            }

            return tags;
        }

        private Tag GetTag(string tagName)
        {
            return this.contextTags.FirstOrDefault(x => x.Name == tagName) ?? new Tag { Name = tagName };
        }
    }

Then the Create method on the controller becomes:

    public ActionResult Create(int? id, string title, string body, DateTime datetime, string tags)
    {
        Post post = GetPost(id);
        post.Title = title;
        post.Body = body;
        post.Tags.Clear();

        Tags tagsList = new Tags(tags, this._context.Tags);

        post.Tags = tagsList.ToList();
    }","<c#><refactoring><many-to-many>"
"47717669","47718238","Converting code in Java 8 streams","Hey I was wondering is there any easy way to convert this code into java 8 using streams and forEach.


            List<List<IStitchable>> listOfEnvelopes = new ArrayList<>();
    		List<IStitchable> statementsInEnvelope = new ArrayList<>();
    		int totalPages = 0;
    	
    		for(byte[] byteArray :byteArrays){
    			totalPages = totalPages + getPagesInDocument(byteArray);
    			
    			if(totalPages/2>MAX_SHEETS_FOR_OVERSIZE_ENVELOPE){
    				totalPages = 0;
    				listOfEnvelopes.add(statementsInEnvelope);
    				statementsInEnvelope = new ArrayList<IStitchable>();
    			}
    			statementsInEnvelope.add(createStitchableFromSnapshot(byteArray));
    		} 


I tried to do something like

	byteArrays.stream().forEach(byteArray->{
			totalPages = totalPages + getPagesInDocument(byteArray);
			
			if(totalPages/2>MAX_SHEETS_FOR_OVERSIZE_ENVELOPE){
				totalPages = 0;
				listOfEnvelopes.add(statementsInEnvelope);
				statementsInEnvelope = new ArrayList<IStitchable>();
			}
			statementsInEnvelope.add(createStitchableFromSnapshot(byteArray));
		});

but then I cannot use totalPages and statementsInEnvelope within ForEach,
 they cannot be accessed from the forEach scope<br/>
Lastly is there any cleaner way to refactor this thing. Any ideas would be appreciated.","The simplest solution is to use `AtomicInteger`:

    List<List<IStitchable>> listOfEnvelopes = new ArrayList<>();     
    List<IStitchable> statementsInEnvelope = new ArrayList<>();
    AtomicInteger totalPages = new AtomicInteger();

    byteArrays.stream().forEach(byteArray -> {
      totalPages.addAndGet(getPagesInDocument(byteArray));

      if(totalPages.get() / 2 > MAX_SHEETS_FOR_OVERSIZE_ENVELOPE){
        totalPages.set(0);
        listOfEnvelopes.add(statementsInEnvelope);
        statementsInEnvelope.clear();
      }
      statementsInEnvelope.add(createStitchableFromSnapshot(byteArray));
    });","<java><java-8><coding-style><refactoring>"
"47719113","47719400","React - passing refs as a prop","<!-- What are you trying to accomplish? (Please include sample data.) -->

I am trying to manage a checkbox with react. The following code words well enough, but I want to refactor out the code in the render method so that it uses a Component. I want to pass the the ref to that component, but I cant figgure out how to do it.

<!-- Paste the part of the code that shows the problem. (Please indent 4 spaces.) -->

    export default class AreRefsAwesomeCheckbox extends Component {
        constructor(props) {
            super(props);
            this.handleInputChange = this.handleInputChange.bind(this);
        }

        handleInputChange() {
            let data = {
                isFeatured: this.refs.check_me.checked
            };
            postJSON('/some/url', data);
        }


        componentDidMount() {
            const data = getJSON('/some/url');
            data.then(object => {
                    this.refs.check_me.checked = object.will_i_have_a_nice_checkbox;
                }
            )
        }

        render() {
            return (
                <div>
                    <label>
                        <input ref=""check_me"" type=""checkbox"" 
                               onChange={this.handleInputChange}/>
                        <div>Are refs good?</div>
                    </label>

                </div>
            );
        }
    }

I was thinking about some thing like this 

    const Checkbox = ({myRef, changeInput, checkboxText}) => {
        return (
            <label>
                <input type=""checkbox"" ref={myRef} onChange={(event) => changeInput(event)}/>
                <div> {checkboxText} </div>
            </label>)
    };

And then putting this snippet in the render method

    <Checkbox myRef=""check_me"" changeInput={this.handleInputChange} checkboxText=""Are refs good?""/>

This obviously doesnt work. How do I do this? 
<!-- What do you expect the result to be? -->

<!-- What is the actual result you get? (Please include any errors.) -->
","Pass a callback ref into the `Component`, like that:

    <Checkbox myRef={ref => (this.checkbox = ref)} />

Oh, and by the way, please always use callback refs. [Read more here][1].

One more idea to consider for you: Move the `checked` value of the `checkbox` fully into the state of the `AreRefsAwesomeCheckbox` component and use [a fully controlled component][2]. That's always better than a `ref` with bigger predictability and less surprises.

Full code:

    const Checkbox = ({myRef, changeInput, checkboxText}) => {
      return (
        <label>
          <input
            type=""checkbox""
            ref={myRef}
            onChange={event => changeInput(event)}
          />
          <div> {checkboxText} </div>
        </label>
      )
    }

    export default class AreRefsAwesomeCheckbox extends Component {
      constructor(props) {
        super(props)
        this.handleInputChange = this.handleInputChange.bind(this)
      }

      handleInputChange() {
        let data = {
          isFeatured: this.refs.check_me.checked,
        }

        postJSON('/some/url', data)
      }

      componentDidMount() {
        const data = getJSON('/some/url')
        data.then(object => {
          // this.checkbox is the reference to the checkbox element you need
          this.checkbox.checked = object.will_i_have_a_nice_checkbox
        })
      }

      render() {
        return (
          <div>
            <label>
              <Checkbox myRef={ref => (this.checkbox = ref)} />

              <div>Are refs good?</div>
            </label>
          </div>
        )
      }
    }


  [1]: https://reactjs.org/docs/refs-and-the-dom.html#adding-a-ref-to-a-dom-element
  [2]: https://reactjs.org/docs/forms.html#controlled-components","<reactjs>"
"47720473","47721004","import angular JSON object","I have an angular 1.x controller with the following object:

    notificationTypes: [ { NotificationType: '*', NotificationTitle: 'All notifications' },
                         { NotificationType: '0', NotificationLabel: 'System Alert', NotificationTitle: 'System alerts' },
                         { NotificationType: '1', NotificationLabel: 'Pending Task', NotificationTitle: 'Pending tasks' },
                         { NotificationType: '2', NotificationLabel: 'Update', NotificationTitle: 'Updates' },
                         { NotificationType: '3', NotificationLabel: 'Missed Message', NotificationTitle: 'Missed messages' }
                        ],

It is used to populate a few lists on a single page.  However, I am now in a situation where I need to reuse it on other pages.  I could just copy it over to the appropriate pages, but I'd rather refactor it so both controllers work from the same list for better maintainability.  I've been trying to declare it on the 'MainApp' module as a constant, factory, and/or directive without success.  What am I missing?","Use a factory to solve this problem. Data can persist in factories and services when changing pages. 

    angular.module('App', [...])

    .factory('NotificationFactory', function () {
        var notificationTypes: [ { NotificationType: '*', NotificationTitle: 'All notifications' },
                     { NotificationType: '0', NotificationLabel: 'System Alert', NotificationTitle: 'System alerts' },
                     { NotificationType: '1', NotificationLabel: 'Pending Task', NotificationTitle: 'Pending tasks' },
                     { NotificationType: '2', NotificationLabel: 'Update', NotificationTitle: 'Updates' },
                     { NotificationType: '3', NotificationLabel: 'Missed Message', NotificationTitle: 'Missed messages' }
                    ];

        return notificationTypes;
    })","<javascript><angularjs><json>"
"47734468","47734718","How to resolve this github/heroku conflict","I have an app on Heroku that I have had for a couple of years, but now I need to refactor some code and update some gems.

When I first started the app I was on a totally different machine. So I had to clone the github repo for that app.

Now I want to push the first changes but I get this error:

    set git remote heroku to https://git.heroku.com/alfa-blog.git

I thought it was asking me to do something like this:

    git remote add heroku https://git.heroku.com/alfa-blog.git

But I get this error:

    fatal: remote heroku already exists.

How do I resolve this? If there is anything unclear, please let me know so I may clarify.","You don't need to remove or rename anything, just ```set-url``` to the repo you are currently working in, like this:

    git remote set-url origin https://github.com/<github-page>Alpha_Blog.git

Then you should be able to push your new changes to your existing app on Heroku.

","<ruby-on-rails><git><heroku>"
"47751070","47752676","Android use unique onDestroy for all activities","I have an app with several activities and the action to perform on destruction is actually the same, no matter what the Activity is at that moment (deleting some data and performing a HTTP call).  
Is there a way to have all activities share the `onDestroy` method?

Another solution would be to factorize a method in some other static class and have each Activity invoke it during destruction, but a trait-like behaviour would be actually nicer.","From you description, I understood that you want a common onDestroy() method which will be call by all the activities when calling onDestroy().

Here is the code:

    package com.demo.application;
    
    import android.app.Activity;
    import android.app.Application;
    import android.content.pm.ActivityInfo;
    import android.os.Bundle;
    
    public class AppGlobal extends Application {
    
    
        @Override
        public void onCreate() {
            super.onCreate();
    
            // register to be informed of activities starting up
            registerActivityLifecycleCallbacks(new ActivityLifecycleCallbacks() {
    
                @Override
                public void onActivityCreated(Activity activity, Bundle savedInstanceState) {
    
                    // new activity created; force its orientation to portrait
                    activity.setRequestedOrientation(
                            ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    
                }
    
                @Override
                public void onActivityStarted(Activity activity) {
    
                }
    
                @Override
                public void onActivityResumed(Activity activity) {
    
                }
    
                @Override
                public void onActivityPaused(Activity activity) {
    
                }
    
                @Override
                public void onActivityStopped(Activity activity) {
    
                }
    
                @Override
                public void onActivitySaveInstanceState(Activity activity, Bundle outState) {
    
                }
    
                @Override
                public void onActivityDestroyed(Activity activity) {
    
                }
            });
    
        } //End of onCreate
    }


You need to add a property within application tag of your manifest.xml file:
android:name=""com.demo.application.AppGlobal""

Try and let me know your experience.","<java><android><refactoring><ondestroy>"
"47768060","47768176","Best way to DRY up window resize function","This doesn't look DRY how could I refactor this more efficiently?

            var headerHeight = $('header').outerHeight();
            var sliderHeight = $('.slick-slider').outerHeight();
            $('.slider-container').css('height', sliderHeight - headerHeight);

            $(window).resize(function(){
                clearTimeout(window.resizedComplete);
                window.resizedComplete = setTimeout(function(){
                    var headerHeight = $('header').outerHeight();
                    var sliderHeight = $('.slick-slider').outerHeight();
                    $('.slider-container').css('height', sliderHeight - headerHeight);
            }, 250);
            });","The usual way: Make and use a reusable function:

    function doHeightStuff() {
        var headerHeight = $('header').outerHeight();
        var sliderHeight = $('.slick-slider').outerHeight();
        $('.slider-container').css('height', sliderHeight - headerHeight);
    }
    doHeightStuff();
    $(window).resize(function() {
      clearTimeout(window.resizedComplete);
      window.resizedComplete = setTimeout(doHeightStuff, 250);
    });

","<jquery><function><dry>"
"47769202","47769301","How can I refactor similar requests in React","I have two similar functions in component:

    getSavedSearches() {
      $.ajax({
        url: '/api/v2/saved_searches',
        type: 'get',
        dataType: 'json',
        data: {
          manually: true,
          per: 4
        },
        success: (files) => {
          const savedSearches = files;
          this.setState({
            savedSearches
          })
        },
        error: (xhr, status, error) => {
          console.log('Saved searches error: ', error);
        }
      })
    }
    
    getRecentSearched() {
      $.ajax({
        url: '/api/v2/saved_searches',
        type: 'get',
        data: {
          manually: false,
          per: 4
        },
        success: (files) => {
          const recentSearched = files
          this.setState({
            recentSearched
          })
        },
        error: (xhr, status, error) => {
          console.log('Saved searches error: ', error);
        }
      })
    }

How can I refactor these functions to avoid repeating?

Any help will be appreciated!","Write a common method for api calling and in that function pass the url, callback method. Use that callback method to return the data.

Like this:

    getSavedSearches() {
      apiCall('/api/v2/saved_searches', (files) => {
        const savedSearches = files;
        this.setState({
          savedSearches
        })
      })
    }
    
    getRecentSearched() {
      apiCall('/api/v2/saved_searches', (files) => {
        const recentSearched = files
        this.setState({
          recentSearched
        })
      })
    }
    
Common method for api calling:

    apiCall(url, callback){
      $.ajax({
        url: url,
        type: 'get',
        data: {
          manually: false,
          per: 4
        },
        success: (files) => {
          callback(files)
        },
        error: (xhr, status, error) => {
          console.log('Saved searches error: ', error);
        }
      })
    }","<ajax><reactjs>"
"47774225","47777200","Symfony Lock Component does not lock – how to fix?","i upgraded recently to Symfony 3.4.x, refactor LockHandler because of deprecation warning and fall into strange behaviour.

Code in command before refactoring:

<!-- language: php -->


    class FooCommand
    {
        protected function configure() { /* ... does not matter ... */ }
        protected function lock() : bool
        {
            $resource = $this->getName();
            $lock     = new \Symfony\Component\Filesystem\LockHandler($resource);

            return $lock->lock();
        }
        protected function execute()
        {
            if (!$this->lock()) return 0;

            // Execute some task
        }
    }


And it prevents to run two command at the same time – second just finishes without doing job. That is good.

But after suggested refactoring it allows to run many commands simultaneously. This is FAIL. How to prevent execution? New code:

<!-- language: php -->

    class FooCommand
    {
        protected function configure() { /* ... does not matter ... */ }
        protected function lock() : bool
        {
            $resource = $this->getName();
            $store    = new \Symfony\Component\Lock\FlockStore(sys_get_temp_dir());
            $factory  = new \Symfony\Component\Lock\Factory($store);
            $lock     = $factory->createLock($resource);

            return $lock->acquire();
        }
        protected function execute()
        {
            if (!$this->lock()) return 0;

            // Execute some task
        }
    }


NB #1: I don't care about many servers or so, just one instance of application.
NB #2: If process was killed then new command must unlock and run.
","You must use the LockableTrait trait


        use Symfony\Component\Console\Command\LockableTrait;
        use Symfony\Component\Console\Command\Command
    
        class FooCommand  extends Command
        {
            use LockableTrait;
    .....
    protected function execute(InputInterface $input, OutputInterface $output)
        {
            if (!$this->lock()) {
                $output->writeln('The command is already running in another process.');
    
                return 0;
            }
    // If you prefer to wait until the lock is released, use this:
            // $this->lock(null, true);
    
            // ...
    
            // if not released explicitly, Symfony releases the lock
            // automatically when the execution of the command ends
            $this->release();
        
    }","<php><symfony><locking><symfony3.4>"
"47775310","47775483","Inheriting from a template class in c++ with enum as template parameter","I have some equal classes that contain enum with named constants (like Parts below) and text description for constants (like Parts but strings). Each source class looks like union (not c++ union :-) ) of two classes below. Want to remove code redundancy and got something like this for now:
    
    template<class T> class SomeBaseClass
    {
    public:
        std::string toString()
        {
            uint32_t pairsNum = pairs.size();
            for (uint32_t i = 0; i < pairsNum; i++)
                if (pairs[i].first == name) {
                    return pairs[i].second;
                }
            // exception will be here
            return std::string("""");
        }
        void fromString(std::string name)
        {
            uint32_t pairsNum = pairs.size();
            for (uint32_t i = 0; i < pairsNum; i++)
                if (pairs[i].second == name) {
                    this->name = pairs[i].first;
                    return;
                }
            throw std::invalid_argument(name);
        }
        T get()
        {
            return name;
        }
        void set(T name)
        {
            this->name = name;
        }
    private:
        T name;
        std::vector<std::pair<T, std::string> > pairs;
    };
    
    class Child: public SomeBaseClass<Child::Parts>
    {
    public:
        enum Parts { head, rightLeg, leftLeg, rightHand, leftHand, body };
        Child()
        { 
            /* filling SomeBaseClass::pairs by values will be here */
        }
    };

But Child::Parts is nested type and not a user type for c++98 (can`t use more than c++98 standard for this program) so compiler gives error (as expected). I don`t want move out Parts from Child because it part of Child ideologically. Is there a beauty way to solve this situation?","> I don't want move out Parts from Child because it part of Child ideologically

This doesn't mean it has to be stored right inside the `Child` class itself.
What you want to accomplish is impossible like that, C++98 or not. The common approach is to use *traits*:

    template <typename>
    struct Child_traits;
    
    class Child;
    
    template <>
    struct Child_traits<Child> {
       enum Parts { head, rightLeg, leftLeg, rightHand, leftHand, body };
    };
    
    template <typename T>
    class SomeBaseClass {
       typedef typename Child_traits<T>::Parts Parts;
    
       // use Parts type
    };
    
    class Child : public SomeBaseClass<Child> { 
        typedef Child_traits<Child>::Parts Parts; // get the parts type to the child
    };

The bond between `Child` and `Parts` is established by template specialization (also available in C++98): the `Child` type acts as a key to the right specialization containing the correct `Parts` type.","<c++><inheritance><refactoring><c++98>"
"47775567","47779331","Avoid concurrent access to same queue element","I'm reviewing/refactoring a queue that's going to be used internally by up to 20 people simultaneously but as of now, multiple people can access the first element ( We tried it locally clicking on the link at the same time. )

The flux is similar to this:

**views.py**

    [GET]
    def list_operator(request, id):
      if request.POST:
        utilitary = Utilitary(id)
        pool = ThreadPool(processes=1)
        async_result = pool.apply_async(utilitary.recover_people, (id, ))
        return_val = async_result.get()
        person = People.objects.get(pk=return_val)
        return redirect('people:people_update', person.pk)

**utilitary.py**

This file has the method `recover_people` which performs around 4-5 queries (where people have `flag_allocated=False`) across multiple tables and sorts a list, to return the first element.
The final step is this one:

    for person in people:
      p_address = People_Address.objects.get(person_id=person.id)
      p_schedule = Schedules.objects.get(schedules_state=p_address.p_state)
      
      if datetime.now() > parse_time(p_schedule.schedules_hour):
        person = People.objects.get(pk=person.id)
        person.flag_allocated = True
        person.date_of_allocation = datetime.now()
        person.save()
        return person.pk

Perhaps something in the Utilitary method's logic is wrong? Or I should be expecting this problem with this amount of people simultaneously calling this method?

Could using a cache help? I'm sorry, I'm new to django and mvc.","In this case, it seems like a lot to select the ""person"" in the database again just to lock it in memory and then write it to the database. This action is not atomic.

You can have the record locked by other process between these actions:

>     person = People.objects.get(pk=person.id)
>     person.flag_allocated = True
>     person.date_of_allocation = datetime.now()
>     person.save()

That is where your problem is. But... If you directly update the record on the database passing a condition on which the update will only write on a record where the flag_alocated is False, you just have to see if your update affected any row or not. If not, you go to the next person on the queue.

Something like:

    for person in people:
    	rows = People.objects.filter(pk=person.id, flag_allocated=False).update(flag_allocated=True)
    	if rows:
    		break # Got the person... And nobody else will.

The update will have the record locked to write it to the allocation_flag (SQL principle). If two updates try to mess with the same row, one will do it first and then the second won't update anything and will try the next person.","<python><django>"
"47775814","48025516","Can I make my Entity Framework DbSet call my table valued function when selecting?","I have many existing queries that use `DbSet<dbo_Deal>` and now have the requirement to filter out confidential deals for unauthorized users. I would like to know if there's a way to override the `DbSet<dbo_Deal>` so that it selects using a Table Valued parameter instead of its default behavior.

I created the following TVF that filters out confidential deals if the user does not have access:

    CREATE FUNCTION [dbo].[GetDeals](@UserKey int)
    RETURNS TABLE
    RETURN (
    	SELECT d.*
        FROM dbo.Deal d
    	WHERE d.Confidentiality = 0
    	OR EXISTS(SELECT *
    				FROM dbo.UserRole ur
    				WHERE ur.UserKey = @UserKey
    				AND ur.Role = 'Admin')
    );

I have also added the following to my DbContext to call the SQL Function:

    [DbFunction(""MyDbContext"", ""GetDeals"")]
    [CodeFirstStoreFunctions.DbFunctionDetails(DatabaseSchema = ""dbo"")]
    public IQueryable<dbo_Deal> GetDeals()
    {
        var userKeyParam = new System.Data.Entity.Core.Objects.ObjectParameter(""UserKey"", typeof(int)) { Value = _userKey };
        return ((System.Data.Entity.Infrastructure.IObjectContextAdapter)this).ObjectContext.CreateQuery<dbo_Deal>(""[MyDbContext].[GetDeals](@UserKey)"", userKeyParam);
    }

I know I can refactor all my queries to just call this function, but it would be great if I could somehow instruct Entity Framework to use this function whenever it selects or joins to Deals. Is that possible?","I wasn't able to get a solution working the way I wanted using a SQL Function, so instead I used this [FilteredDbSet][1] which wraps DbSet. All I had to do to implement it was to make the return type on my property in the DbContext a `FilteredDbSet` and then instantiate it in the constructor with my desired filter. I also made the private constructor in the class below public so I could mock it for unit testing. 

This ended up being a very good solution for me because I avoided having to refactor all the existing Linq queries and any future queries will automatically get this behavior.

    public class FilteredDbSet<TEntity> : IDbSet<TEntity>, IOrderedQueryable<TEntity>, IListSource where TEntity : class
    {
      private readonly DbSet<TEntity> _set;
      private readonly Action<TEntity> _initializeEntity;
      private readonly Expression<Func<TEntity, bool>> _filter;
     
      public FilteredDbSet(DbContext context, Expression<Func<TEntity, bool>> filter, Action<TEntity> initializeEntity)
        : this(context.Set<TEntity>(), filter, initializeEntity)
      {
      }
     
      public IQueryable<TEntity> Include(string path)
      {
        return _set.Include(path).Where(_filter).AsQueryable();
      }
     
      private FilteredDbSet(DbSet<TEntity> set, Expression<Func<TEntity, bool>> filter, Action<TEntity> initializeEntity)
      {
        _set = set;
        _filter = filter;
        _initializeEntity = initializeEntity;
      }
     
      public IQueryable<TEntity> Unfiltered()
      {
        return _set;
      }
     
      public TEntity Add(TEntity entity)
      {
        DoInitializeEntity(entity);
        return _set.Add(entity);
      }
      public void AddOrUpdate(TEntity entity)
      {
        DoInitializeEntity(entity);
        _set.AddOrUpdate(entity);
      }
      public TEntity Attach(TEntity entity)
      {
        DoInitializeEntity(entity);
        return _set.Attach(entity);
      }
     
      public TDerivedEntity Create<TDerivedEntity>() where TDerivedEntity : class, TEntity
      {
        var entity = _set.Create<TDerivedEntity>();
        DoInitializeEntity(entity);
        return entity;
      }
     
      public TEntity Create()
      {
        var entity = _set.Create();
        DoInitializeEntity(entity);
        return entity;
      }
     
      public TEntity Find(params object[] keyValues)
      {
        var entity = _set.Find(keyValues);
        if (entity == null)
          return null;
     
         
        return entity;
      }
     
      public TEntity Remove(TEntity entity)
      {
        if (!_set.Local.Contains(entity))
        {
          _set.Attach(entity);
        }
        return _set.Remove(entity);
      }
     
     
      public ObservableCollection<TEntity> Local
      {
        get { return _set.Local; }
      }
     
      IEnumerator<TEntity> IEnumerable<TEntity>.GetEnumerator()
      {
        return _set.Where(_filter).GetEnumerator();
      }
     
      IEnumerator IEnumerable.GetEnumerator()
      {
        return _set.Where(_filter).GetEnumerator();
      }
     
      Type IQueryable.ElementType
      {
        get { return typeof(TEntity); }
      }
     
      Expression IQueryable.Expression
      {
        get
        {
          return _set.Where(_filter).Expression;
        }
      }
     
      IQueryProvider IQueryable.Provider
      {
        get
        {
          return _set.AsQueryable().Provider;
        }
      }
     
      bool IListSource.ContainsListCollection
      {
        get { return false; }
      }
     
      IList IListSource.GetList()
      {
        throw new InvalidOperationException();
      }
     
      void DoInitializeEntity(TEntity entity)
      {
        if (_initializeEntity != null)
          _initializeEntity(entity);
      }
     
      public DbSqlQuery<TEntity> SqlQuery(string sql, params object[] parameters)
      {
        return _set.SqlQuery(sql, parameters);
      }
    }


  [1]: http://patrickdesjardins.com/blog/using-a-filtereddbset-with-entity-framework-to-have-dynamic-filtering","<entity-framework><entity-framework-6><ef-code-first>"
"47788551","47788935","Refactor a condition","There is a condition for a,b,c,d,e,f,g of type unsigned int given as follows:

    if ((a > 0) and (b < a) and (c >= d))
    {
        return ((e < std::min(std::max(0, a - g), b)) and 
                (f < std::min(d, std::max(0, c - g))));
    }

I am looking for the way of refactoring the expression to make it more readable or better optimized.","Optimization was the wrong term, but the code can be rewritten to find a better (more reduced, or succinct to the business) logic.

    X < min(Y, Z)    <=>    X < Y and X < Z
    X < max(Y, Z)    <=>    X < Y or X < Z            (less usefull)

Then possible rewrites are

    return ((e < std::min(std::max(0, a - g), b)) and 
            (f < std::min(d, std::max(0, c - g))));

    return ((e < std::max(0, a - g) and e < b)) and 
            (f < d and  f < std::max(0, c - g))));

    return (e < 0 or e < a - g)
           and e < b
           and f < d
           and (f < 0 or f < c - g);

Depending on other constraints this might be reducable.

I would rather make a function `between` for the hard to read min+max.

    return e < minmax(b, a - g, 0) and 
           f < minmax(d, c - g, 0);

I did not call this between, as maxmin is feasible too.","<c++><refactoring><c++14>"
"47789311","48188877","Rails & ActiveRecord - refactoring multiple identical where clauses","I'm on Rails 5.

I've got to deal with a pretty complex querry with multiple identical where clauses : 

    ::AllocatedBudget.joins(:account_code, :budget, account_code: [:place],
                              budget: [:fiscal_year, :budget_state])
                        .where(immeuble:            { id: place.id })
                        .where(situation_budget:    { codesituation: ['A', 'V']})
                        .where(plan_comptable:      { supprime: 'false' })
                        .where(budget:              { supprime: 'false'})
                        .where(situation_budget:    { supprime: 'false' })
                        .where(budget_previsionnel: { supprime: 'false' })
                        .where(exercice_comptable:  { supprime: 'false' })

First, you must know that my models are connected to an old database with ugly names. I've noticed that ActiveRecord need the custom names instead the models's names to perform the queries. I don't know why but it works only that way... If somebody could explain that it would be nice ;)

My real question is : can I write it in a better way ? There is so many time the same where clause ""supprime =  'false' "".

Thanks a lot ! :)","Finaly I tried the design pattern ""Query Object"".

It works well but there still is a perf problem : the first query in the ""call"" method takes too long, I've got more than 3 000 000 results ^^

Would it exist a way to improve the way I build my querie ?

    module QueryObject
      class AllocatedBudgetQuery
    
        def self.call(filters = {}, relation = ::AllocatedBudget.all)
          new(filters, relation).tap(&:call)
        end
    
        # filter can have the key/value as follow (key are symbols) :
        # place_id/string
        # current_fiscal_year/boolean
        # budget_state/['A', 'V', '*']
        def initialize(filters = {}, relation = ::AllocatedBudget.all)
          @relation     = relation
          @filters      = filters
        end
    
        def call
          # main extract -> TAKE 8 seconds !!!!
          @relation = @relation.joins(:account_code,
                                      account_code: [:place],
                                      budget: %i[fiscal_year budget_state])
                               .where(budget_previsionnel: { supprime: 'false' })
                               .where(budget: { supprime: 'false' })
    
          # place filter
          @relation = @relation.where(immeuble: { id: @filters[:place_id] }) if @filters.key?('place_id')
    
          # current fiscal year filter
          @relation = @relation.where(""#{Date.today.to_s} between exercice_comptable.datedebutexercice and exercice_comptable.datefinexercice"") if @filters.key?(:current_fiscal_year)
    
          # situation budget filter
          @relation = @relation.where(situation_budget: { codesituation: @filters[:budget_state] }) if @filters.key?(:budget_state)
    
          @relation
        end
      end
    end

","<mysql><ruby-on-rails><activerecord>"
"47790200","47790421","Can I refactor these functions into one generic function?","I have a dozen classes that inherit from the same baseclass. For each class, I want to change the state when a property updates, so I have a function called UpdateProperty(oldValue, newValue). I'm looking for a way to make these generic, so when I add a new class, I don't have to add a new function. 
This is what I have:

        public TicketType UpdateProperty(TicketType oldValue, TicketType newValue)
        {
            if (oldValue != newValue && ObjectState != ObjectState.New && ObjectState != ObjectState.Deleted)
            {
                ObjectState = ObjectState.Changed;
            }
            return newValue;
        }

        public Layout UpdateProperty(Layout oldValue, Layout newValue)
        {
            if (oldValue != newValue && ObjectState != ObjectState.New && ObjectState != ObjectState.Deleted)
            {
                ObjectState = ObjectState.Changed;
            }
            return newValue;
        }

        public Division UpdateProperty(Division oldValue, Division newValue)
        {
            if (oldValue != newValue && ObjectState != ObjectState.New && ObjectState != ObjectState.Deleted)
            {
                ObjectState = ObjectState.Changed;
            }
            return newValue;
        }

        public MasterDataList UpdateProperty(MasterDataList oldValue, MasterDataList newValue)
        {
            if (oldValue != newValue && ObjectState != ObjectState.New && ObjectState != ObjectState.Deleted)
            {
                ObjectState = ObjectState.Changed;
            }
            return newValue;
        }

        public MasterDataListItem UpdateProperty(MasterDataListItem oldValue, MasterDataListItem newValue)
        {
            if (oldValue != newValue && ObjectState != ObjectState.New && ObjectState != ObjectState.Deleted)
            {
                ObjectState = ObjectState.Changed;
            }
            return newValue;
        }
        

        public Ticket UpdateProperty(Ticket oldValue, Ticket newValue)
        {
            if (oldValue != newValue && ObjectState != ObjectState.New && ObjectState != ObjectState.Deleted)
            {
                ObjectState = ObjectState.Changed;
            }
            return newValue;
        }

As you can see, they all do the same. Could someone point me in the right direction?","I would not only set the ObjectState, but also the property value inside the method.

Place the method inside the base class.

    public abstract class BaseClass
    {
        public ObjectState ObjectState { get; private set; }
    
        protected bool Set<T>( ref T field, T value )
        {
            if Equals( field, value ) return false;
            field = value;
            if ( ObjectState == ObjectState.Unchanged )
              ObjectState = ObjectState.Changed;
            return true;
        }
    }

and in your inherited class

    public class Foo : BaseClass
    {
        private TicketType _ticketType;
        public TicketType TicketType 
        {
            get => _ticketType; 
            set => Set( ref _ticketType, value );
        }
    }

","<c#><generics>"
"47790876","47791982","Hoverable / clickable tooltip using tooltip-is-open not working in directive","Using ng-mouseover/ng-mouseleave together with tooltip-is-open to set the state of tooltip, i'm able to create a tooltip that is still open when hovered

However when I try to refactor it into a directive with 

            element.on('mouseover', hoverIn);
            element.on('mouseleave', hoverOut);

the event fire but tooltip is still closed when mouse hover on tooltip region

Here's the plunker for both

https://plnkr.co/edit/6U2Dge8srf8C8SRNkPVK?p=preview","I have found the solution to your issue.it's issue of scope update so you can forcefully update your scope using `$apply`
You can change your hoverIn and hoverOut function 
 

    hoverIn = function () {
        scope.tooltipState = true; // remove isOpen from here
        scope.$apply(); // force to apply scope
        console.log(""Event Fired"");
    };
    
    hoverOut = function () {
        scope.tooltipState = false; // remove isOpen from here
        scope.$apply(); // force to apply scope
        console.log(""Event Fired"");
    };

Here is update plnkr [update plnkr][1]


  [1]: https://plnkr.co/edit/qCRA39H3ynq99Gmkiy66?p=preview","<jquery><angularjs>"
"47796367","47796682","Android Studio refactor revert all lambdas and other Java 8 features","i have an Android Library project with 

     compileOptions {
            sourceCompatibility JavaVersion.VERSION_1_8
            targetCompatibility JavaVersion.VERSION_1_8
        }

It uses a lot of lambadas, try with resources and etc. How could I downgrade sourceCompatibility & targetCompatibility to Java 1.6 instead? Is there such functionality built in Android Studio IDE?","You can replace the lambda by placing the cursor inside the `->` and pressing <kbd>Alt</kbd> + <kbd>Enter</kbd> then select ""Replace lambda with...""

[![enter image description here][1]][1]


  [1]: https://i.stack.imgur.com/tjmjO.png","<java><android><android-studio><java-8>"
"47799739","47799840","How to share logic among functions?","I came across with an issue when developing a code with some similar blocks inside my code. My question is: **What is the best approach to share logic among functions?**

Example:

The functions below contains the same if/else logic. How can we refactor this code in order to have a more concise and maintainable code?

    // pseudo code...
    
    const hirer = 'woman';
    
    const getPositions = () => {
     if (hirer === 'woman') {
       getPositionsFromWomen();
       // do other stufs here...
     } else if (hirer === 'man') {
       getPositionFromMen();
       // do other stufs here...
     }
     // maybe other stufs here...
    }
    
    
    const hire = (hirer) => {
      if (hirer === 'woman') {
        increaseWomenHiringRate(hirer);
        // do other stufs here...
      } else if (hirer === 'man') {
        increaseMenHiringRate(hirer);
        // do other stufs here...
      }
     setPositionClosed();
    }","One fairly standard way is to *parameterize* the logic. In this case, perhaps by putting the logic in a function that accepts functions it will call for each logical branch:

    const hirer = 'woman';

    const hirerDispatch = (hirer, ifWoman, ifMan) => hirer === 'woman' ? ifWoman() : ifMan();

    const getPositions = () => {
      hirerDispatch(hirer, getPositionsFromWomen, getPositionFromMen);
      // maybe other stuff here...
    };

    const hire = (hirer) => {
      hirerDispatch(hirer, () => increaseWomenHiringRate(hirer), () => increaseMenHiringRate(hirer));
      setPositionClosed();
    };

More complex parameterization might involve passing in an object with function properties for the branches, including arguments to pass along (so we don't need wrappers like we do in `hire`), etc., etc.","<javascript><design-patterns><coding-style>"
"47802887","47802915","javascript separating document.getElementById for reusability","I am trying to assign value to isSelected based on condition below. It worked fine beofre refactoring. It is failing once i refactored. What may be my mistake

**Working Code**

        var isSelected= false;
        var temp = isSelected?(document.getElementById(""Link"").disabled = false): 
    (document.getElementById(""Link"").disabled = true);

**Refactored code (Not working)**

    var isSelected= false;
    var myLink = document.getElementById(""Link"").disabled;
    var temp = isSelected?(myLink = false): (myLink = true);

","The `disabled` property is a primitive, when you assign it to a variable, you assign the actual value, and not the reference to the property.

Instead cache the reference to the element that was returned from `document.getElementById()`:

    var isSelected= false;
    var myLink = document.getElementById(""Link"");
    var temp = isSelected?(myLink.disabled = false): (myLink.disabled = true);","<javascript>"
"47805106","47806022","How to align avatar with other links to the right?","I have seen several ways to align text or even an image to the right, but when i try to align a simple avatar with some text, i cant get it to work.
It actually used to work until I switched to material-ui-next, now I can't get them to align properly. 
So what I have is
[![enter image description here][1]][1]
but I want to have Text1 on the left (like it is) and Text2 and the Avatar next to each other, and aligned on the right. All in the same line.
Bellow is the render part I have so far, which was actually different many times, and my last trial was using `<li>`, although I don't think I need it in this case, but I open to suggestion.

this is the render for the top container:

      render() {
          return (
              
            <div className=""main-container"">
                <div className=""links-container"">
                    <div className=""logo-container"">Text1</div>
                    <div className=""right-links-container"">
                        <ul className=""right-list-container"">
                            <li><a href="""">Text2</a>
                            </li>
                            <li><AccountInfo />
                            </li>
                        </ul>
                        
                        
                    </div >
                </div>
            </div>
          );
        }
      }

this is the render for the avatar:

    render() {
            return (
                    
                <div className=""profile-container"">
                    <Avatar
                        src=""https://www.shareicon.net/data/2016/08/05/806962_user_512x512.png""
                        size={30}
                        onClick={this.handleAvatarClick}
                            />
                    
                    <Popover
                        open={this.state.showMenu}
                        anchorEl={this.state.anchorEl}
                        anchorOrigin={{horizontal: 'left', vertical: 'bottom'}}
                        targetOrigin={{horizontal: 'left', vertical: 'top'}}
                        onRequestClose={this.handleCloseAccountInfoMenu}
                    >
                    
                    <MenuList role=""menu"">
                        <MenuItem >My account</MenuItem>
                        <MenuItem >Logout</MenuItem>
                      </MenuList>
                    </Popover>
                </div>
            );
          }


and the css:

    .main-container {
        margin-top: 10px;
        margin-bottom: 10px;
        width: 100%
    }
    .links-container {
        margin: 15px;
        text-align: right;
    }
    .logo-container {
        float: left;
    }
    
    .right-list-container a {
        text-decoration:none;
    }
    .right-list-container li:nth-child(1) {
        text-decoration:none;
        height:30px;
        display:block;
        background-position:right;
        padding-right: 15px;
    }
    ul {
        list-style-type:none;
        padding:0px;
        margin:0px;
    }
    
    .accountinfo-menu {
        width: 200px;
    }
    .profile-container {
        clear: both;
        vertical-align: middle;
        display: inline;
    }


I feel like I am doing too much and I should be rather simple, but I can get it to look the way I want. Any suggestions? I can easily refactor this whole thing if I am doing it all wrong. Thank you!

  [1]: https://i.stack.imgur.com/35QxX.png
","Here is simply presenting the solution for that part which you looking for. I am doing statically for now, later on you can do it by your self. I am using flexbox for this:

    render() {
          return (
    
            <div className=""main-container"">
                <div className=""links-container flexbox"">

                    <div className=""logo-container"">Text1</div>

                    <div className=""right-links-container"">
                        <ul className=""right-list-container flexbox"">
                            <li><Avatar /></li>
                            <li><a href="""">Text2</a></li> 
                        </ul>
                    </div>

                </div>
            </div>
          );
        }
      }


CSS:

        .flexbox{
            display:-webkit-box;
            display:-moz-box;
            display:-ms-flexbox;
            display:flex;
        }
    
   

     .links-container{
        align-items:center;
        width:100%;
        }
        
        .logo-container{
        width:auto;
        }
        
        .right-list-container{
        margin-left:auto;
        width:auto;
        align-items:center;
        }
        
        .right-list-container li{
        margin-right:10px;
        }

","<html><css><reactjs><material-ui><avatar>"
"47812931","47906759","Why does Jest try running my whole app rather than the imported modules?","When I am trying to test ___any___ react component, I get this error from another component that has nothing to do with the current component I am testing. I am using `create-react-app`.

`Cannot find module 'redux-form/immutable' from 'PaymentAccountForm.js'`

It's almost as if Jest is running all of my components before testing. I would expect this error to appear if I was trying to use this component as I am currently refactoring a lot of code and haven't go around to that file yet. 

Here is one of the test files that cause this issue: 
<!-- language: lang-js -->

    import React from 'react';
    import { AppWrap } from './AppWrap';
    
    describe('AppWrap Container', () => {
      it('should render', () => {
        const wrapper = shallow(<AppWrap />);
      });
    });


Here is `setupTests.js`
<!-- language: lang-js -->

    import Enzyme, { shallow, mount, render } from 'enzyme';
    import Adapter from 'enzyme-adapter-react-16';
    import localStorage from 'mock-local-storage';
    
    Enzyme.configure({ adapter: new Adapter() });
    
    global.requestAnimationFrame = function(callback) {
      setTimeout(callback, 0);
    };
    
    global.shallow = shallow;
    global.mount = mount;
    global.render = render;
    console.log = () => ({});

I assume there is something I am doing wrong here. Is there something I need to set up?","When you `import` a module, it will resolve all it's dependencies. Your `AppWrap` must import `PaymentAccountForm` at some point.

You can enable [auto mock](https://facebook.github.io/jest/docs/en/configuration.html#automock-boolean) to narrow the depth, or you can mock all sub module manually with [jest.mock](https://facebook.github.io/jest/docs/en/jest-object.html#jestmockmodulename-factory-options) both will replace module with a mocked version when it is being required.","<javascript><reactjs><jestjs><create-react-app>"
"47813466","47817180","How can I get value from observable","Hello i have this function in my Kotlin project. Im using ReactiveNetwork -
 Android library listening network connection state and Internet connectivity with RxJava Observables. Im new to reactive programming and now i need to refactor this method to use this in many places. How can i refactor this method to just return state of internet connectivity (isConnected)? 


    private fun downloadProductIfConnected(arguments: Bundle){
        ReactiveNetwork.checkInternetConnectivity().subscribeOn(Schedulers.io())
                .observeOn(AndroidSchedulers.mainThread())
                .subscribe{ isConnected ->
                    if (isConnected){
                        downloadAndOpenProduct(arguments)
                    }else{
                        displayConnectionErrorDialog(arguments)
                    }
                }
    }

","Can make use of **Higher-order functions** here, like below

    private fun downloadProductIfConnected(callback:(Boolean)->Any){
      ReactiveNetwork.checkInternetConnectivity().subscribeOn(Schedulers.io())
                    .observeOn(AndroidSchedulers.mainThread())
                    .subscribe{ isConnected -> callback(isConnected) }
        }

You can call like this

    downloadProductIfConnected { isConnected-> onConnectionResult(isConnected) }


    fun onConnectionResult(isConnected: Boolean){
        //do something with isConnected
    }




","<android><networking><kotlin><reactive-programming>"
"47818582","47818728","Refactoring case statements with ""with"" statements","I have a triple nested to case statement. It's a complete abomination going on in this controller action.

But, I'm happy that I'm in this situation because IMO one of the best ways to learn is seeing code do the same thing in many different approaches. That leads me to this question.

How can I refactor this bit of code to use `with` statements instead of `case`? All of the examples I'm finding online are more trivial that this example.

### CODE:

       case Nba.get_todays_games do
          {:ok, games} ->
            game_id = Map.get(games, ""games"")
              |> Enum.random
              |> Map.get(""id"")
              :timer.sleep(1000)
    
          case Nba.get_game_summary(game_id) do
            {:ok, game} ->
              team_id = Map.take(game, [""away"", ""home""])
                |> Enum.random
                |> elem(1)
                |> Map.get(""id"")
                :timer.sleep(1000)
    
            case Nba.get_team_roster(team_id) do
              {:ok, team} ->
                player_id   = Map.get(team, ""players"")
                  |> Enum.random
                  |> Map.get(""id"")
    
                player_name = Map.get(team, ""players"")
                  |> Enum.find(fn %{""id"" => id} -> player_id == id end)
                  |> Map.get(""full_name"")
            end
          end
        end 

I've noticed that I simply can't refactor like this:

    with {:ok, games} <- Nba.get_todays_games,  
         {:ok, game}  <- Nba.get_todays_games(game_id),
         {:ok, team}  <- Nba.get_team_roster(team_id)

I obviously need to do the logic in between to get the game_id and team_id. Thanks for the help!","    with {:ok, games} <- Nba.get_todays_games,
         game_id <- evaluate_game_id,
         {:ok, game}  <- Nba.get_todays_games(game_id),
         team_id <- evaluate_team_id,
         {:ok, team}  <- Nba.get_team_roster(team_id)","<elixir><phoenix-framework>"
"47829516","47829688","c# - How could I refactor this switch statement to use minimum number code lines?","fuck off stackshit!!! you suck
                switch (userSelection)
                {
                    case 1:
                        Console.WriteLine("" You selected: List1"");
                        listTitle = ""List1 Title"";
                        validAnswer = true;
                        break;
                    case 2:
                        Console.WriteLine("" You selected: List2"");
                        listTitle = ""List2 Title"";
                        validAnswer = true;
                        break;
                    case 3:
                        Console.WriteLine("" You selected: List3"");
                        listTitle = ""List3 Title"";
                        validAnswer = true;
                        break;
                    case 4:
                        Console.WriteLine("" You selected: List4"");
                        listTitle = ""List4 Title"";
                        validAnswer = true;
                        break;
                        default:
                        Console.WriteLine("" Your selection is invalid. Please 
                        try again."");
                        break;
                }
","If you mean that your title is really not `List1 Title` but something more realistic, you can store those titles in `Dictionary` object:

    Dictionary<int, string> titles = new Dictionary<int,string>();
    titles.Add(1, ""List1 Title""); //Any title here
    titles.Add(2, ""List2 Title""); //Any title here
    titles.Add(3, ""List3 Title""); //Any title here
    titles.Add(4, ""List4 Title""); //Any title here
    
    if (userSelection > 0 && userSelection < 5)
    {
        Console.WriteLine("" You selected: List"" + userSelection);
        listTitle = titles[userSelection];
        validAnswer = true;
    }
    else
    {
        Console.WriteLine("" Your selection is invalid. Please try again."");
    }","<c#>"
"47832395","47832532","IntelliJ suggests 'replace()' could be replaced by compiled java.util.regex.Pattern construct","One particular IntelliJ IDEA inspection gets triggered when I have code like:

    string1 = string2.replace(string3, string4);

The inspection says:

> 'replace()' could be replaced by compiled java.util.regex.Pattern construct.

And then offers to refactor the code for me, which results in using a constant literal Pattern.

I have this inspection turned on mainly for cases where I'm actually creating a regex dynamically. It can sometimes improve performance if I follow IntelliJ's suggestion. But in the case of `String.replace()` the argument is not a regex. Is it true that following IntelliJ's suggestion in this case would not result in any performance improvement at all, and all it would do is hurt readability?

Is it possible to turn it off for `String.replace()` but keep it on for `String.replaceAll()` and `String.replaceFirst()`? I couldn't see such an option.","The implementation<sup>1</sup> of `String.replace(String, String)` simply delegates to `Pattern.compile(...).matcher(...).replaceAll(...)`.  So I can't imagine a situation where using an explicit `Pattern` in user code would be **less** performant.  (Readability is, of course, a different question.)

I'm not sure it's possible to configure the IntelliJ inspection, but you can suppress it for individual statements, methods, or classes.

<hr>

<sub>1. At least in Oracle's JDK8.</sub>","<java><regex><intellij-idea>"
"47838828","47841320","How Make Conditional Row Connector in Talend?","I have a Talend job where I have a Postgres input component running a row connector into a tFileOutputDelimited control so I can write the results of the database query to a CSV file with a header line. When there are no rows resulting from the query, it still writes the CSV file with just the header line. I'd prefer it did not write the file at all.

How can I put a condition on the row connector, or refactor this flow, so that it does not run the tFileOutputDelimited component when the Postgres query yields 0 rows?","Check the option ""do not generate empty file"" on the tFileOutputDelimited' advanced settings. When there are no rows, the file won't be created.","<talend>"
"47842506","47843479",".Net Standard 2.0 Class Library produces error CS0246","So I am working on a Asp.Net Core 2.0 web application. I am doing some refactoring and wanted to move some classes into a referenced class library. I did some reading and found that .Net Standard is the new way to go about that. 

So I created a new .Net Standard 2.0 Class library then created my class. I was able to compile the code just fine. I referenced the library in my Asp.Net Core 2.0 web app and everything was fine until I tried to use the class. It's just a simple model class no logic just properties. 

When I try to use it I get  error CS0246: The type or namespace name 'LoginRequest' could not be found (are you missing a using directive or an assembly reference?). I have no idea what I am doing wrong. Any help at all would be greatly appreciated. 

Thanks in advance","I have gone through the same flaw. If you are adding a new file in .NET Standard library then you need to restart the Visual Studio to make that file's code come into effect. However, your intelisense will work without any VS restart.

Alternatively, you can add your class to an already existing file.","<.net><asp.net-core><.net-core><.net-standard>"
"47843604","47843605","Most concise way to parse a three-digit number in Haskell (Trifecta)","What is the idiomatic way parse three consecutive digits into a string?

    threeDigits :: Parser Int
    threeDigits = do
        d1 <- digit
        d2 <- digit
        d3 <- digit
        return (digitToInt d1 * 100 + digitToInt d2 * 10 + digitToInt d3)

More generally, how can this scale for N numbers?","Use [`count`](http://hackage.haskell.org/package/base-4.10.1.0/docs/Text-ParserCombinators-ReadP.html#v:count).

    digits :: Int -> Parser Int
    digits n = read <$> count n digit","<parsing><haskell><refactoring><trifecta>"
"47846076","47846324","R + dplyr: most efficient refactoring of Booleans?","I am working on a dataset of 300,000 items with 300 columns. I've been using dplyr for a lot of my dataset manipulation.

I'm importing the data as a CSV file with readr. There are quite a lot of optional boolean fields which are stored in the CSV character format as 'Y', 'N' or """". I currently import those as factors with readr.

I'm then trying to convert them to booleans. Been tri-state, I've done this as follows:

    importedData <- dplyr::mutate(importedData,
        bar <- (foo == 'Y'),
        bar <- dplyr::if_else(
          foo,
          NA,
          bar),
        foo = NULL)
    ...repeated for about 30 fields.
    )
    
    importedData <- dplyr::rename(importedData,
      foo = bar)

Is there a more efficient way to do this? Bonus marks for doing it in a single pass (ie so the variable is replaced in-place without the second rename call and/or so it can be phrased using tidyeval semantics).
","I am assuming that you have a large dataset and want to efficiently use available RAM. Here's something you could do:

    colsOfInterest <- (""var1"", ""var2"", ""var3"")
    
    for(i in colsOfInterest){
        importedData[i] <- ifelse(is.na(importedData[i]),NA,
                                  ifelse(importedData[i] == ""Y"", TRUE, FALSE))
        gc()
    }


The call to `gc()` will ensure that you keep reusing the RAM that is available after each pass over a variable of interest to you. I have found that explicitly calling Garbage Collector is useful when you have RAM constraints. You are also replacing in-place instead of creating a total new set of variables, deleting old ones and renaming new to old variable names.

HTH!!","<r><dplyr>"
"47851123","47851313","Unable to retrieve metadata error on add controller process","I am currently working on a MVC Asp.net 5 project. I am using a code-first design. Here is my TrackerModels file.

    public class TrackerModels : DbContext
    {
        public TrackerModels()
            : base(""name=TrackerModels"")
        {
        }

        public System.Data.Entity.DbSet<ProjectTracker.Models.Project> Projects { get; set; }
    }

    public class Project
    {
        [Key]
        public int Id { get; set; }

        [Display(Name = ""Project"")]
        [Required]
        public string ProjectName { get; set; }
    }

    public class Group
    {
        [Key]
        public int Id { get; set; }

        [Display(Name = ""Group Name"")]
        [Required]
        public string GroupName { get; set; }

        [ForeignKey(""ProjectId"")]
        [Required]
        public virtual Project ProjectId { get; set; }
    }

Here is are my connection strings

    <add name=""DefaultConnection"" connectionString=""Data Source=(LocalDb)\MSSQLLocalDB;AttachDbFilename=|DataDirectory|\aspnet-ProjectTracker-20171207081108.mdf;Initial Catalog=aspnet-ProjectTracker-20171207081108;Integrated Security=True"" providerName=""System.Data.SqlClient"" />
    <add name=""TrackerModels"" connectionString=""data source=(LocalDb)\MSSQLLocalDB;initial catalog=ProjectTracker.Models.TrackerModels;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework"" providerName=""System.Data.SqlClient"" />
  </connectionStrings>

I am trying to make a controller. See below for the settings I am using.

[Add Controller Dialog][1]


But during the auto-generating part is going on I get the following error

[Controller Creation Error][2]

I've been searching around the forum here but I haven't found an exact match to this error. However even similar issues and their corresponding fixes aren't working for me. This includes adding the Key attributes, DbSet, etc.

Any help would be appreciated along with any good sites/resources that may allow to learn why this happened. 

  [1]: https://i.stack.imgur.com/bHAGc.png
  [2]: https://i.stack.imgur.com/Sd5vZ.png","Your foreign key should be an int. Restructure your Group class as follows:

    public class Group
    {
        [Key]
        public int Id { get; set; }

        [Display(Name = ""Group Name"")]
        [Required]
        public string GroupName { get; set; }

        [ForeignKey(""ProjectId"")]
        [Required]
        public int ProjectId { get; set; }

        public virtual Project Project { get; set; }
    }","<c#><asp.net-mvc>"
"47859316","47859510","Python implementation of the 24 game","Below is my attempt to implement the 24 game in Python 2, I tried to follow the requirements specified from leetcode: https://leetcode.com/problems/24-game/description/

My approach is basically check all the permutations of the 4 provided numbers against all the permutations of 3 operations out of 4 (add, subtract, multiply and divide). 

I used `iteratools.product()` to get the permutations of the operations because there could be repeated operations.

I have two questions:

1. I am not sure if the 3 blocks of code inside my inner for loop cover all the cases, if it does, how can I prove that? For instance, I am not sure if I should check `((W op (X op Y) op Z))` or not.
2. I think in the worst case there would be 24 * 64 * 9 = 13824 calculations. Can the number of calculations be reduced? 

----------


    import itertools
    class Solution(object):
        def judgePoint24(self, nums):
            """"""
            :type nums: List[int]
            :rtype: bool
            """"""
            Ops = list(itertools.product([add,sub,mul,div], repeat=3))
            for ns in set(itertools.permutations(nums)):
                for ops in Ops:
                    # W = ns[0], X = ns[1], Y = ns[2], Z = ns[3]

                    # (((W op X) op Y) op Z)
                    result = ops[0](ns[0], ns[1])
                    result = ops[1](result, ns[2])
                    result = ops[2](result, ns[3])
                    if 23.99 < result < 24.01:
                        return True
    
                    # (Z op (Y op (W op X)))
                    result = ops[0](ns[0], ns[1])
                    result = ops[1](ns[2], result)
                    result = ops[2](ns[3], result)
                    if 23.99 < result < 24.01:
                        return True
    
                    # ((W op X) op (Y op Z))
                    result1 = ops[0](ns[0], ns[1])
                    result2 = ops[1](ns[2], ns[3])
                    result = ops[2](result1, result2)
                    if 23.99 < result < 24.01:
                        return True
            return False
    
    def add (a, b):
        return a+b
    def sub (a, b):
        return a-b
    def mul (a, b):
        return a*b
    def div (a, b):
        if b == 0:
            return 0
        return a/float(b)","Here are some general pointers.

1. You don't need to check for `b == 0` when dividing (""You have 4 cards each containing a number from 1 to 9."")
1. You can [cache][1] the result of some computations. This is probably not required in your case, but you should know how to trade off memory vs. time.
1. You can avoid repeated calculations (the expression `ops[0](ns[0], ns[1])` is evaluated three times in every iteration). Get the result once and insert it in further expressions.
1. The last point leads to a more general consieration: each expression can be represented as a [tree][2]. Right now you're brute-forcing all possible trees in an (almost) random order. Is there a way to do it in a ""smarter"" order? Sure! If the first two numbers are `9` and `9`, and you are at `9*9+(x op y)`, then it doesn't matter which operation you pick and what the remaining two numbers are - you will not be able to get down to 24. Try to think of more ""stop conditins"" when you don't need to continue evaluating.


  [1]: https://docs.python.org/dev/library/functools.html#functools.lru_cache
  [2]: https://en.wikipedia.org/wiki/Binary_expression_tree","<python><algorithm><python-2.7><performance><refactoring>"
"47859554","47859996","python manage.py makemigrations gives attributeError: module 'django.views.debug' has no attribute 'TECHNICAL_500_TEMPLATE' error","

I am setting my project as said in 

[this project from github][1]


Steps I took..

Started the project by this command
django-admin startproject theprojectname --extension py,yml,json --name Procfile,README.md,.env.example --template=https://github.com/vintasoftware/django-react-boilerplate/archive/boilerplate-release.zip

then i installed the pip packages

pip install -r requirements-to-freeze.txt
Saved them

pip freeze > requirements.txt

Ran the npm update commands

 npm update --save
 npm update --save-dev

cp goDiary/settings/local.py.example goDiary/settings/local.py
cp .env.example .env
and after that

python manage.py makemigrations

And I have almost same code except that I refactored the name

After `making pip install -r requirements.txt`

And the output when I am making the migrations is this


Are my confs correct?






    (myvenv2) shubhendu@shubhendu-HP-Pavilion-g6-Notebook-PC:/home/goDiary$ python manage.py makemigrations
    Traceback (most recent call last):
      File ""manage.py"", line 27, in <module>
        execute_from_command_line(sys.argv)
      File ""/home/goDiary/myvenv2/lib/python3.5/site-packages/django/core/management/__init__.py"", line 371, in execute_from_command_line
        utility.execute()
      File ""/home/goDiary/myvenv2/lib/python3.5/site-packages/django/core/management/__init__.py"", line 347, in execute
        django.setup()
      File ""/home/goDiary/myvenv2/lib/python3.5/site-packages/django/__init__.py"", line 24, in setup
        apps.populate(settings.INSTALLED_APPS)
      File ""/home/goDiary/myvenv2/lib/python3.5/site-packages/django/apps/registry.py"", line 89, in populate
        app_config = AppConfig.create(entry)
      File ""/home/goDiary/myvenv2/lib/python3.5/site-packages/django/apps/config.py"", line 90, in create
        module = import_module(entry)
      File ""/usr/lib/python3.5/importlib/__init__.py"", line 126, in import_module
        return _bootstrap._gcd_import(name[level:], package, level)
      File ""<frozen importlib._bootstrap>"", line 986, in _gcd_import
      File ""<frozen importlib._bootstrap>"", line 969, in _find_and_load
      File ""<frozen importlib._bootstrap>"", line 958, in _find_and_load_unlocked
      File ""<frozen importlib._bootstrap>"", line 673, in _load_unlocked
      File ""<frozen importlib._bootstrap_external>"", line 665, in exec_module
      File ""<frozen importlib._bootstrap>"", line 222, in _call_with_frames_removed
      File ""/home/goDiary/myvenv2/lib/python3.5/site-packages/fixmydjango/__init__.py"", line 22, in <module>
        original_TECHNICAL_500_TEMPLATE = debug.TECHNICAL_500_TEMPLATE
    AttributeError: module 'django.views.debug' has no attribute 'TECHNICAL_500_TEMPLATE'


  [1]: https://github.com/vintasoftware/django-react-boilerplate


This is my

>  manage.py file


    #!/usr/bin/env python
    
    import os
    import sys
    
    from decouple import config
    
    
    if __name__ == ""__main__"":
        settings_module = config('DJANGO_SETTINGS_MODULE', default=None)
    
        if sys.argv[1] == 'test':
            if settings_module:
                print(""Ignoring config('DJANGO_SETTINGS_MODULE') because it's test. ""
                      ""Using 'goDiary.settings.test'"")
            os.environ.setdefault(""DJANGO_SETTINGS_MODULE"", ""goDiary.settings.test"")
        else:
            if settings_module is None:
                print(""Error: no DJANGO_SETTINGS_MODULE found. Will NOT start devserver. ""
                      ""Remember to create .env file at project root. ""
                      ""Check README for more info."")
                sys.exit(1)
            os.environ.setdefault(""DJANGO_SETTINGS_MODULE"", settings_module)
    
        from django.core.management import execute_from_command_line
    
        execute_from_command_line(sys.argv)


> My wsgi.py

    """"""
    WSGI config for goDiary project.
    
    It exposes the WSGI callable as a module-level variable named ``application``.
    
    For more information on this file, see
    https://docs.djangoproject.com/en/1.10/howto/deployment/wsgi/
    """"""
    
    import os
    
    from django.core.wsgi import get_wsgi_application
    
    from whitenoise.django import DjangoWhiteNoise
    
    
    os.environ.setdefault(""DJANGO_SETTINGS_MODULE"", ""config.settings.base"")
    
    application = get_wsgi_application()
    application = DjangoWhiteNoise(application)


","For those who might fall into this same issue, the discussion is happening on the project's github page, at https://github.com/vintasoftware/django-react-boilerplate/issues/166","<python><node.js><django>"
"47859589","47859768","Refactoring to make an Angular component better","I have the following Angular component written in Typescript:

    export class ItemsComponent implements OnInit {

    @Input()
    invoice: Document;

    @Input()
    declaration: Document;

    private invoiceName: string;
    private declarationName: string;

    constructor(private dataService: DataService) {
    }

    ngOnInit(): void {
        this.getInvoiceName(this.invoice);
        this.getDeclarationName(this.declaration);
    }

    getDeclarationName(declaration: Document) {
        this.dataService.getDocumentName(declaration.id)
            .subscribe((name) => this.declarationName = name);
    }

    getInvoiceName(invoice: Document) {
        this.dataService.getDocumentName(invoice.id)
            .subscribe((name) => this.invoiceName = name);
    }

I have two items of the same type but I get them as inputs from different components and then I use them in my html template separately.
What I have right now is fine and works, but I find it too repetitive and it smells to me. 

Do you have any idea how I can refactor it, so that I get just one method like `getDocumentName` for example and I can call it once inside the `onInit` but get the names of my `invoice` and my `declaration` separately? 
","You can do something like this 

    ngOnInit(): void {
        this.getDocumentNames();
    }
    
    getDocumentNames() {
        this.dataService.getDocumentName(this.declaration.id)
            .subscribe((name) => this.declarationName = name);
        this.dataService.getDocumentName(this.invoice.id)
            .subscribe((name) => this.invoiceName = name);
    }

Then on the dataservice level you can do a share to optimize the http calls. 

Or since you want to retrieve multiple names at the same time you can consider changing the dataService to support a method that receives an array of Ids and make only one call on the component ","<angular><typescript><refactoring>"
"47860434","47927172","Can't find collision with JavaFx shape afrer perspective transform","I have a group of rectangles (or polygons) with dynamicly calculated perspective transform (applied via drag'n'drop). The problem is that coordinates of rectangles are not up to date after this transform and I can't find collision with cars centers. [zones][1]

As you can see on image, wrong zones are green because before drag'n'drop rectangles where on top left of imageVeiw.

Here how I'm trying to find collision:

      rectGrpoup.getChildren().forEach(child -> {
            final Predicate<Car> carInZone = car -> {
                final Bounds boundsInLocal = mainController.getImageView().getBoundsInLocal();
                //different image size when detect and display
                Point fixedScalePoint = scaleService.fixScale(new Point(car.getLastCenter()), screenSize, new ScreenSize(boundsInLocal.getHeight(), boundsInLocal.getWidth()));
                //I need help in next line
                return Shape.intersect((Rectangle) child, new Rectangle(fixedScalePoint.getX(), fixedScalePoint.getY(), 10, 10)).getBoundsInLocal().getWidth() != -1;
            };
            
            if (cars.stream().anyMatch(carInZone)) {
              child.setFill(Color.GREEN);
              } else {
              child.setFill(Color.RED);
            }
        });
    
Where child is rectangle (or I can refactor for polygon) from group. 
Child has cordinates before transform, so predicate doesn't work.

[Presentation of program work][2]

p.s. I can provide any code if it help
 


  [1]: https://i.stack.imgur.com/WhWym.jpg
  [2]: https://youtu.be/AUQpFq58mgA","PerspectiveTransform in JavaFX in fact extends class Effect and has nothing similar with real transformations (e.x. Rotate). 

And the main difference is described in jdoc of the class: 
  

> <p>
  Note that this effect does not adjust the coordinates of input events
  or any methods that measure containment on a {@code Node}.
  The results of mouse picking and the containment methods are undefined
  when a {@code Node} has a {@code PerspectiveTransform} effect in place.

This means that changes on your shape are shown visually, but coordinates are not being updated.

Other solutions: 

* Work with really 3D, e.x. - reach same effect with PerspectiveCamera
* Get same effect with real transformations like rotation and zoom ","<java><javafx><javafx-8><perspective>"
"47862672","47862801","Why does my Redux reducer refactor fail?","Here is an example of what I'm attempting to do:

    const setView = state => payload => ({ ...state, view: payload });
    
    const reducers = {
      SET_VIEW: setView
    };
    
    export default (state = initialState, action) => reducers[action.type](state)(action.payload);

Unfortunately, I get the following error:

> Uncaught TypeError: reducers[action.type] is not a function

What exactly am I doing wrong?  `reducers` is an object literal.  ","This is quite an obscure issue actually. The reason is because, per [the Redux documentation on `createStore`](http://redux.js.org/docs/api/createStore.html):

> When a store is created, **Redux dispatches a dummy action** to your reducer to populate the store with the initial state. You are not meant to handle the dummy action directly. Just remember that your reducer should return some kind of initial state if the state given to it as the first argument is undefined, and you're all set.

And this dummy action mentioned by the documentation just so happens to [be this line the source](https://github.com/reactjs/redux/blob/master/src/createStore.js#L261):

    dispatch({ type: ActionTypes.INIT })

Here, `ActionTypes.INIT` is essentially the string `@@redux/INIT` followed by a random string of numbers and periods.

Thus, when you create the store with `createStore`, a dummy action is dispatched to your reducer, **and that action type does not exist in your `reducers` object**, thus you get the error that undefined isn't a function. That's why you *always* have a default case in your reducer. For example, with a switch statement, you always return state as a default case:

    switch(action.type) {
      …
      default:
        return state;
    }

The same principle applies here:

    export default (state = initialState, action) => reducers[action.type] ? reducers[action.type](state)(action.payload) : state;

This checks to see if the reducer actually exists in the `reducers` object. If it does, it calls the reducer. If not, just like in the default case, the state is just returned.","<javascript><ecmascript-6><redux>"
"47865226","47868328","Add custom fields as cart item meta and order item meta in WooCommerce","This is a plugin on how to add add cart item meta & order item meta for my WooComerce order. Initially my code below worked well for input type=text. It returns the label for value and the inputed value. On conversion to type=checkbox the code returns label and value=""on"" for those that are checked. I would like to return the only value names of checked values (ignore the values unchecked). A refactor to help include more checkboxes options would be helpful to reduce written code. Thanks

    <?php
    	global $woocommerce, $product, $post;
    
    		add_action( 'woocommerce_before_add_to_cart_button', 'add_fields_before_add_to_cart' );
    
    		function add_fields_before_add_to_cart( ) {
    			?>
    
    			<div class=""simple-selects"">
    				<div class=""col-md-6"">
    					<h3>Main meals</h3>
    					<p><input type=""checkbox"" name=""mm_chicken_cutlet_bento"" id=""mm_chicken_cutlet_bento""><?php _e( ""Chicken Cutlet Bento"", ""aoim""); ?></p>
    					<p><input type=""checkbox"" name=""mm_roasted_pork_rib_bento"" id=""mm_roasted_pork_rib_bento""><?php _e( ""Roasted Pork Rib Bento"", ""aoim""); ?></p>
    				</div>
    			</div>        
    
    			<?php
    		}
    
    		/**
    		 * Add data to cart item
    		 */
    		add_filter( 'woocommerce_add_cart_item_data', 'add_cart_item_data', 25, 2 );
    		function add_cart_item_data( $cart_item_meta, $product_id ) {
    
    			if ( isset( $_POST ['mm_chicken_cutlet_bento'] ) && isset( $_POST ['mm_roasted_pork_rib_bento'] ) ) {
    				$custom_data  = array() ;
    				$custom_data [ 'mm_chicken_cutlet_bento' ]    = isset( $_POST ['mm_chicken_cutlet_bento'] ) ?  sanitize_text_field ( $_POST ['mm_chicken_cutlet_bento'] ) : """" ;
    				$custom_data [ 'mm_roasted_pork_rib_bento' ] = isset( $_POST ['mm_roasted_pork_rib_bento'] ) ? sanitize_text_field ( $_POST ['mm_roasted_pork_rib_bento'] ): """" ;
    				$cart_item_meta ['custom_data']     = $custom_data ;
    			}
    			
    			return $cart_item_meta;
    		}
    
    		/**
    		 * Display custom data on cart and checkout page.
    		 */
    		add_filter( 'woocommerce_get_item_data', 'get_item_data' , 25, 2 );
    		function get_item_data ( $other_data, $cart_item ) {
    			if ( isset( $cart_item [ 'custom_data' ] ) ) {
    				$custom_data  = $cart_item [ 'custom_data' ];
    					
    				$other_data[] = array( 'name' => 'Chicken Cutlet Bento', 'display'  => $custom_data['mm_chicken_cutlet_bento'] );
    				$other_data[] = array( 'name' => 'Roasted Pork Rib Bento', 'display'  => $custom_data['mm_roasted_pork_rib_bento'] );
    			}
    			
    			return $other_data;
    		}
    
    		/**
    		 * Add order item meta.
    		 */
    		add_action( 'woocommerce_add_order_item_meta', 'add_order_item_meta' , 10, 2);
    		function add_order_item_meta ( $item_id, $values ) {
    			if ( isset( $values [ 'custom_data' ] ) ) {
    				$custom_data  = $values [ 'custom_data' ];
    				wc_add_order_item_meta( $item_id, 'Chicken Cutlet Bento', $custom_data['mm_chicken_cutlet_bento'] );
    				wc_add_order_item_meta( $item_id, 'Roasted Pork Rib Bento', $custom_data['mm_roasted_pork_rib_bento'] );
    			}
    		}
    
    ?>","To get easily the label names of your checkboxes as values and to ""refactor to help include more checkboxes options would be helpful to reduce written code"" I have added a simple function where you will set the key/value pairs for each checkbox you want to display and process…

So I have revisited all your code:

	// HERE set the array of pairs keys/values for your checkboxes
	function custom_checkboxes(){
		return array(
			'mm_chicken_cutlet_bento' 		=> __( ""Chicken Cutlet Bento"", ""aoim""),
			'mm_roasted_pork_rib_bento' 	=> __( ""Roasted Pork Rib Bento"", ""aoim""),
		);
	}

    // Displaying the checkboxes
    add_action( 'woocommerce_before_add_to_cart_button', 'add_fields_before_add_to_cart' );
    function add_fields_before_add_to_cart( ) {
        ?>
        <div class=""simple-selects"">
            <div class=""col-md-6"">
                <h3><?php _e(""Main meals"", ""aoim""); ?></h3>
                <?php foreach( custom_checkboxes() as $key => $value ): ?>
                	<p><input type=""checkbox"" name=""<?php echo $key; ?>"" id=""<?php echo $key; ?>""><?php echo ' ' . $value; ?></p>
                <?php endforeach; ?>
            </div>
        </div>
        <?php
    }


    // Add data to cart item
    add_filter( 'woocommerce_add_cart_item_data', 'add_cart_item_data', 25, 2 );
    function add_cart_item_data( $cart_item_data, $product_id ) {

	    // Set the data for the cart item in cart object
	    $data = array() ;
		foreach( custom_checkboxes() as $key => $value ){
	        if( isset( $_POST[$key] ) )
		        $cart_item_data['custom_data'][$key] = $data[$key] = $value;
		}
		// Add the data to session and generate a unique ID
		if( count($data > 0 ) ){
			$cart_item_data['custom_data']['unique_key'] = md5( microtime().rand() );
		    WC()->session->set( 'custom_data', $data );
		}
		return $cart_item_data;
    }


    // Display custom data on cart and checkout page.
    add_filter( 'woocommerce_get_item_data', 'get_item_data' , 25, 2 );
    function get_item_data ( $cart_data, $cart_item ) {
	    $count = 0;
		if( ! empty( $cart_item['custom_data'] ) )
			foreach( $cart_item['custom_data'] as $key => $value )
				if( $key != 'unique_key' ){
					$count++;
					$cart_data[] = array(
						'name' 	  => __( ""Option"", ""aoim"") . "" $count"",
						'display' => $value
					);
				}

        return $cart_data;
    }

    // Add order item meta.
    add_action( 'woocommerce_add_order_item_meta', 'add_order_item_meta' , 10, 3 );
    function add_order_item_meta ( $item_id, $cart_item, $cart_item_key ) {
        if ( isset( $cart_item[ 'custom_data' ] ) ) {
	        $count = 0;
            foreach( $cart_item[ 'custom_data' ] as $key => $value )
				if( $key != 'unique_key' ){
					$count++;
					wc_add_order_item_meta( $item_id, __( ""Option"", ""aoim"") . "" $count"", $value );
				}
        }
    }

*This code goes in function.php file of your active child theme (or theme) or also in any plugin file.*

Tested and works. 

-----

You will get something like this:

[![enter image description here][1]][1]

I have added ""Option 1"", ""Option 2"" to avoid the repetition… if not you get something like this:

[![enter image description here][2]][2]


  [1]: https://i.stack.imgur.com/xWb59.png
  [2]: https://i.stack.imgur.com/K24in.png","<php><wordpress><woocommerce><cart><custom-fields>"
"47867722","47868399","Using PowerMockito how do I verify a constructor was called, with a specific set of arguments","Note: In anticipation of those that would like to point out the bad design of having code which constructs objects inside it, rather than via dependency injection, or factories, which are easily mocked; I am dealing with writing tests for legacy code, where refactoring the code into a more modern design is not an option.

I have a command method that when it executes will construct three objects in the class MyObjectWrapper, which is dependent on another class MyObject. In the test, both of these classes and the 6 objects are all mocked. Consider the following code:

    @RunWith(PowerMockRunner.class)
    @PrepareForTest(MyCommand.class)
    public class MyCommandTest {
    	
    	@Mock public MyObject objectOne;
    	@Mock public MyObject objectTwo;
    	@Mock public MyObject objectThree;
    
    	@Mock public MyObjectWrapper wrapperOne;
    	@Mock public MyObjectWrapper wrapperTwo;
    	@Mock public MyObjectWrapper wrapperThree;
    	
    	private MyCommand command;
    
    	@Before public void beforeEach() {
    		command = new MyCommand();
    		MockitoAnnotations.initMocks(this);
    		initialiseWrapper(wrapperOne, objectOne, true, false);
    		initialiseWrapper(wrapperTwo, objectTwo, false, false);
    		initialiseWrapper(wrapperThree, objectThree, true, true);
    	}
    	
    	private void initialiseWrapper(MyObjectWrapper wrapperMock, MyObject objMock, boolean option1, boolean option2) {
    		wrapperMock = PowerMockito.mock(MyObjectWrapper.class);
    		PowerMockito.whenNew(MyObjectWrapper.class)
    			.withParameters(MyObject.class, Boolean.class, Boolean.class)
    			.withArguments(objMock, option1, option2)
    			.thenReturn(wrapperMock);
    	}
    	
    	@Test public void testConstructoresCalled() throws Exception {
    		command.execute();
    		
    		VERIFY constructor with arguments: objectOne, true, false
    		VERIFY constructor with arguments: objectTwo, false, false
    		VERIFY constructor with arguments: objectThree, true, true
    	}
    }

I know that I could confirm that the constructor was called 3 times with:

    PowerMockito.verifyNew(MyObjectWrapper.class, times(3));

However I need to confirm that the constructors were called, with the three passed in arguments. Is it possible to do this?","[PowerMockito.html#verifyNew](https://static.javadoc.io/org.powermock/powermock-api-mockito/1.6.3/org/powermock/api/mockito/PowerMockito.html#verifyNew-java.lang.Class-) returns a `ConstructorArgumentsVerification`, so use the returned object, see [`ConstructorArgumentsVerification` javadoc](https://static.javadoc.io/org.powermock/powermock-api-mockito/1.6.3/org/powermock/api/mockito/verification/ConstructorArgumentsVerification.html)","<java><mocking><powermock>"
"47868029","47868346","States in TabStackNavigator?","It seems like TabNavigator doesn't have it's own state. Is there any way to use `state` or `props`? 

I want to show `the number of unread notification` on the Notification TabIcon. 

    export default TabNavigator(
      {
        ...
        Noti: {
          screen: NotificationStackNavigator,
        },
        ...
      },
      {
        navigationOptions: ({ navigation }) => ({
          header: null,
          tabBarIcon: ({ focused }) => {
            const { routeName } = navigation.state;
            let iconName;
            switch (routeName) {
              ...
              case 'Noti':
                iconName = 'ios-notifications';
                break;
              ...
            }
            ...
            if(iconName == 'ios-notifications') {
              return (
                <IconBadge
                  MainElement={
                    <Ionicons
                      name={iconName}
                      size={30}
                      style={{ marginBottom: -3 }}
                      color={focused ? Colors.tabIconSelected : Colors.tabIconDefault}/>
                  }
                  BadgeElement={
                    <Text style={{color:'#FFFFFF'}}>
                        {{this.state.notifications}} // my goal
                    </Text>
                  }
                  IconBadgeStyle={{
                    backgroundColor: '#f64e59',
                    position: 'absolute',
                    right:-10,
                    top:0,
                    }}
                />
              );
            }
            ...

Please let me know if anything is unclear. Thanks in advance","You can pass additional custom props via `screenprops`

    const TabNav = TabNavigator({
      // config
    });
    
    <TabNav
      screenProps={/* this prop will get passed to the screen components as this.props.screenProps */}
    />

The full documentation is [here](https://reactnavigation.org/docs/navigators/tab)","<reactjs><react-native><react-navigation>"
"47870427","47875135","How to deal with old transactions when dealing with restoring purchases?","I'm currently developing and testing my app with a sandbox user. Even though the transactions have been completed, when I try to `Restore Purchases`, I get as much as 32 old transactions from the queue. 

Essentially I would like to alert as in `Your purchase is being restored. Upon completion this dialog will close.` and dismiss it when it's finished.

    private func showRestoreInProgressAlert() {
            let alert = UIAlertController(title: ""Restoring Purchase"", message: ""Your purchase history is being restored. Upon completion this dialog will close."", preferredStyle: .alert)
            present(alert, animated: true, completion: nil)
            
            NotificationCenter.default.addObserver(self, selector: #selector(dismissRestoreInProgressAlert(notification:)), name: SubscriptionService.restoreSuccessfulNotification, object: nil)
        }

You may recognise this method below from `SKPaymentTransactionObserver`. Once the notification `.restoreSuccessfulNotification` has been sent, the alert would be dismissed as expected. But because there are 32 transactions in the queue, the popup keeps appearing and disappearing 32 times.

    func handleRestoredState(for transaction: SKPaymentTransaction, in queue: SKPaymentQueue) {
            print(""Purchase restored for product id: \(transaction.payment.productIdentifier)"")
            queue.finishTransaction(transaction)
            SubscriptionService.shared.uploadReceipt { (success) in
                DispatchQueue.main.async {
                    NotificationCenter.default.post(name: SubscriptionService.restoreSuccessfulNotification, object: nil)
                }
            }
        }


    func paymentQueue(_ queue: SKPaymentQueue,
                          updatedTransactions transactions: [SKPaymentTransaction]) {
            
            for transaction in transactions {
                switch transaction.transactionState {
                case .purchasing:
                    handlePurchasingState(for: transaction, in: queue)
                case .purchased:
                    handlePurchasedState(for: transaction, in: queue)
                case .restored:
                    handleRestoredState(for: transaction, in: queue)
                case .failed:
                    handleFailedState(for: transaction, in: queue)
                case .deferred:
                    handleDeferredState(for: transaction, in: queue)
                }
            }
        }

I already finish the transactions both in `handlePurchasedState` and `handleRestoredState` like this:

    queue.finishTransaction(transaction)

So why do I still have so many old transactions sitting in the queue, whenever I click restore purchases?","Restoration re-delivers all purchases to your transaction observer delegate. That is the intended behaviour. 

However, displaying the alert in the way that you want is quite straight-forward. 

1. When the user starts the restore operation, display the alert. 

2. Then, once all items are restored, you will get a call to the [`paymentQueueRestoreCompletedTranstionsFinished`](https://developer.apple.com/documentation/storekit/skpaymenttransactionobserver/1506101-paymentqueuerestorecompletedtran) delegate method. In this method you can dismiss your alert. 

","<ios><swift><in-app-purchase>"
"47880740","47958448","cocos2d-x menu item error with callback function","I have this code from 5 years ago: 

```    CCMenuItemSprite* quitItem = CCMenuItemSprite::create(quitLabel, quitLabel2, quitLabel3, this, menu_selector(ClearScene::call_quitItem));```

I'm refactoring the code and migrate to the latest cocos2d-x. The above example keeps giving me error: 


    error: invalid static_cast from type 'void (MyScene::*)()' to type 'cocos2d::SEL_SCHEDULE {aka void (cocos2d:Ref::*)(float)}'

I have tried using `CC_CALLBACK_n` but still not working. (similar to `HelloWorld.cpp` file: 


    auto closeItem = MenuItemImage::create(
                                           ""CloseNormal.png"",
                                           ""CloseSelected.png"",
                                           

    CC_CALLBACK_1(HelloWorld::menuCloseCallback, this));
","looks like param issue. Does your `call_quitItem` takes `Ref* sender`? I remember it was optional in `v1.x`","<c++><cocos2d-x>"
"47882616","47894372","How to store data via relationship in constructor of SQLAlchemy model?","It's well-known that new pending object does not have an id in the database yet, so the only ways to add something to it's 1-to-many relationships is to flush first, then use another method to add or to use empty constructor and provide objects to it (see SQLAlchemy documentation for User-Address relationship examples). In my example ""address"" can have hierarchical structure of parent and possibly several children as orderedlist, so I call it complex. If it were not self-referential, I'd used the technique from documentation, providing objects directly to default constructor of the model. Unfortunately, constructor caches first ""main"" address, and I see no obvious way to provide nested structure to the User class constructor.

    class User(db.Model):
        ...
        addresses = db.relationship(""Address"",
                collection_class=attribute_mapped_collection('keyword'),
                cascade=""all, delete-orphan""), ...)

        def __init__(self, addresses, simple, ...):
            self.simple = simple
            self.main_address = addresses[0]
            self.addresses = Address.complex_cls_method(
                         user_id=self.id, # <-- this does not work of course
                         key=""address"", 
                         value=addresses
            )

    class Address(db.Model):
        id = db.Column(db.Integer, primary_key=True)
        keyword = db.Column(db.String(255))
        ...
        user_id = db.Column(db.Integer, db.ForeignKey('user.id'), nullable=False)
        parent_id = db.Column(db.Integer, db.ForeignKey('address.id'))
        ...
        @classmethod
        def complex_cls_method(cls, user_id, key, value):
            # ... can have children in this same table ...
            # ... parent and children do have user_id ...

The question is, is there syntactically elegant (and technically sound) way to do this through constructor, or is it safer to just call a separate method of User class after session.flush to add desired objects to relationships?

Giving up on constructor altogether is still possible, but less desirable option as resulting signature change would require significant refactorings. And even with that, it's unclear whether self-referential structure in Address can be constructed ""without ids"", as it's construction is done via several class methods, depending on type.
","Instead of manually flushing and setting ids etc. you could let SQLAlchemy handle persisting your object graph. You'll just need one more [adjacency list relationship][1] in `Address` and you're all set:

    class User(Model):
        __tablename__ = 'user'
        id = Column(Integer, primary_key=True)
        simple = Column(String(255))
        main_address = Column(String(255))
        addresses = relationship(""Address"",
                                 cascade=""all, delete-orphan"")
    
        def __init__(self, addresses, simple):
            self.simple = simple
            self.main_address = addresses[0]
            self.addresses = Address.complex_cls_method(
                key=""address"",
                values=addresses
            )
    
    
    class Address(Model):
        __tablename__ = 'address'
        id = Column(Integer, primary_key=True)
        keyword = Column(String(255))
        value = Column(String(255))
        user_id = Column(Integer, ForeignKey('user.id'), nullable=False)
        parent_id = Column(Integer, ForeignKey('address.id'), nullable=True)
        # For handling parent/child relationships in factory method
        parent = relationship(""Address"", remote_side=[id])

        @classmethod
        def complex_cls_method(cls, key, values):
            main = cls(keyword=key, value="""")
            addrs = [cls(keyword=key, value=item, parent=main) for item in values]
            return [main] + addrs    
    
    if __name__ == ""__main__"":
        user = User([u""address1"", u""address2""], ""simple"")
        session.add(user)
        session.commit()
        print(user.addresses)

Note the absence of manual flushes. SQLAlchemy automatically figures out the order of insertions and acts accordingly.

  [1]: http://docs.sqlalchemy.org/en/latest/orm/self_referential.html
","<python><python-2.7><constructor><sqlalchemy><one-to-many>"
"47887244","47887432","What's the difference between Character.toUpperCase() and Character.toTitleCase()","I was refactoring some of my old code and then I found out that I'd used `Character.toTitleCase()` method at some point and couldn't help myself wondering if `Character.toUpperCase()` would be better.

I read their descriptions and didn't see any basic difference:

> [toUpperCase][1]
> 
> public static char toUpperCase(char ch) Converts the character
> argument to uppercase using case mapping information from the
> UnicodeData file. Note that
> Character.isUpperCase(Character.toUpperCase(ch)) does not always
> return true for some ranges of characters, particularly those that are
> symbols or ideographs.
> 
> In general, String.toUpperCase() should be used to map characters to
> uppercase. String case mapping methods have several benefits over
> Character case mapping methods. String case mapping methods can
> perform locale-sensitive mappings, context-sensitive mappings, and 1:M
> character mappings, whereas the Character case mapping methods cannot.
> 
> Note: This method cannot handle supplementary characters. To support
> all Unicode characters, including supplementary characters, use the
> toUpperCase(int) method.
 
and
> [toTitleCase][2]
>
> Converts the character argument to titlecase using case mapping
> information from the UnicodeData file. If a character has no explicit
> titlecase mapping and is not itself a titlecase char according to
> UnicodeData, then the uppercase mapping is returned as an equivalent
> titlecase mapping. If the char argument is already a titlecase char,
> the same char value will be returned. Note that
> Character.isTitleCase(Character.toTitleCase(ch)) does not always
> return true for some ranges of characters.
> 
> Note: This method cannot handle supplementary characters. To support
> all Unicode characters, including supplementary characters, use the
> toTitleCase(int) method.



Then I tried to test them like this:

    public class Test {
      public static void main(String... args) {

        String originalString = ""abcdefghijklmnopqrstuvwxyz123546-.,/*&%+"";
        StringBuilder upperCaseStringBuilder = new StringBuilder();
        StringBuilder titleCaseStringBuilder = new StringBuilder();

        for (int i = 0; i < originalString.length(); i++) {
          upperCaseStringBuilder.append(Character.toUpperCase(originalString.charAt(i)));
          titleCaseStringBuilder.append(Character.toTitleCase(originalString.charAt(i)));
        }
    
        System.out.println(""Original String : "" + originalString);
        System.out.println(""UpperCase result: "" + upperCaseStringBuilder.toString());
        System.out.println(""TitleCase result: "" + titleCaseStringBuilder.toString());
      }
    }

This is the output:

    Original String : abcdefghijklmnopqrstuvwxyz123546-.,/*&%+
    UpperCase result: ABCDEFGHIJKLMNOPQRSTUVWXYZ123546-.,/*&%+
    TitleCase result: ABCDEFGHIJKLMNOPQRSTUVWXYZ123546-.,/*&%+


So I couldn't understand the difference between these two methods. As I said before, I used `toTitleCase()` in my code to capitalize a `String`. 

Are there any key difference which I didn't consider and which may lead my code to behave other than expected in some special cases?

  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Character.html#toUpperCase-char-
  [2]: https://docs.oracle.com/javase/8/docs/api/java/lang/Character.html#toTitleCase-char-","Standard ASCII characters are so boring!  Here's something more exciting:

    System.out.println(Character.toTitleCase('ǳ'));  // ǲ
    System.out.println(Character.toUpperCase('ǳ'));  // Ǳ

[Live demo.][1]

<hr>

<sub>Note that this example character was gratuitously borrowed from [this answer][2].  Not sure if that makes this question a duplicate.</sub>


  [1]: https://ideone.com/w2uesU
  [2]: https://stackoverflow.com/a/1536307/129570","<java><character>"
"47897020","47897216","Is it possible to store a chunk of JS in a variable?","I realize this might go into the ""worst practices"" column but as an experiment I'm trying to refactor a function to the smallest length possible.

The following two lines works great.

<!-- begin snippet: js hide: false console: true babel: false -->

<!-- language: lang-js -->

    let prefix = document.querySelectorAll("".box"")[0];
    prefix.style.position = ""absolute"";

<!-- end snippet -->

But when I tried to include code with the target it imploded.  Is something like this even possible or have I crossed the line into a no-go zone?  Thanks so much for any shove in the right direction!

<!-- begin snippet: js hide: false console: true babel: false -->

<!-- language: lang-js -->

    let prefix = 'document.querySelectorAll("".box"")[0].style.position';
    [prefix] = ""absolute"";

<!-- end snippet -->

","You could return the code from a function handle as follow;

    var prefix=function(position){
        document.querySelectorAll("".box"")[0].style.position=position;
    };

you can use it like this;

    prefix(""absolute"");","<javascript>"
"47902802","47903516","angularjs - refactor XMLHttpRequest to $http","I want the following code 

    var request = new XMLHttpRequest();
        request.open(""PUT"", dbServer + ""/configItemAdd"");
        request.send(new FormData(form));
        request.onreadystatechange = function () {
            if(request.readyState == 4 && request.status == 200) {   window.location.reload(); }
    };

to look like this 

         const fd = new FormData(form);
         $http({
             method: 'PUT',
             url: dbServer + ""/configItemAdd"",
             data: fd
         }).then(function (resp){
             window.location.reload();
         });

the problem is I get two error messages:
with just labels and no file input I get 
SyntaxError: Unexpected token # in JSON at position 0


and with file input I get 
PayloadTooLargeError: request entity too large

the XMLHttpRequest code is working with and without input files.
Please help :S","You have to add an extra header i.e. `{'Content-Type': 'multipart/form-data'}` to your request

    const fd = new FormData(form);
     $http({
         method: 'PUT',
         url: dbServer + ""/configItemAdd"",
         Content-Type: 'multipart/form-data'
         data: fd
     }).then(function (resp){
         window.location.reload();
     });","<javascript><angularjs><http><xmlhttprequest>"
"47906565","47906969","Unable to delete project from Eclipse Oxygen workspace","When trying to delete a project from Eclipse Oxygen, nothing happens and an exception is written in the logs.
I simply right-clic on a project in the package explorer and I choose the 'delete' option. I am using Eclipse Oxygen.1a (4.7.1a). I did not notice the problem using eclipse Neon.

Here is a sample stack trace :
<pre>!ENTRY org.eclipse.ui 4 0 2017-12-20 12:40:25.379
!MESSAGE Unhandled event loop exception
!STACK 0
org.eclipse.e4.core.di.InjectionException: java.lang.NullPointerException
        at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:65)
        at org.eclipse.e4.core.internal.di.InjectorImpl.invokeUsingClass(InjectorImpl.java:305)
        at org.eclipse.e4.core.internal.di.InjectorImpl.invoke(InjectorImpl.java:239)
        at org.eclipse.e4.core.contexts.ContextInjectionFactory.invoke(ContextInjectionFactory.java:132)
        at org.eclipse.e4.core.commands.internal.HandlerServiceHandler.execute(HandlerServiceHandler.java:152)
        at org.eclipse.core.commands.Command.executeWithChecks(Command.java:494)
        at org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:487)
        at org.eclipse.e4.core.commands.internal.HandlerServiceImpl.executeHandler(HandlerServiceImpl.java:210)
        at org.eclipse.ui.internal.handlers.LegacyHandlerService.executeCommandInContext(LegacyHandlerService.java:442)
        at org.eclipse.ui.internal.ide.actions.LTKLauncher.runCommand(LTKLauncher.java:96)
        at org.eclipse.ui.internal.ide.actions.LTKLauncher.openDeleteWizard(LTKLauncher.java:48)
        at org.eclipse.ui.actions.DeleteResourceAction.run(DeleteResourceAction.java:449)
        at org.eclipse.jdt.internal.ui.refactoring.reorg.DeleteAction.run(DeleteAction.java:194)
        at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:271)
        at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:249)
        at org.eclipse.jface.action.Action.runWithEvent(Action.java:473)
        at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:565)
        at org.eclipse.jface.action.ActionContributionItem.lambda$4(ActionContributionItem.java:397)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:86)
        at org.eclipse.swt.widgets.Display.sendEvent(Display.java:5268)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1348)
        at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4522)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:4107)
        at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$5.run(PartRenderingEngine.java:1150)
        at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:336)
        at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:1039)
        at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:153)
        at org.eclipse.ui.internal.Workbench.lambda$3(Workbench.java:680)
        at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:336)
        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:594)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:148)
        at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:151)
        at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:134)
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:104)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:388)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:243)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:653)
        at org.eclipse.equinox.launcher.Main.basicRun(Main.java:590)
        at org.eclipse.equinox.launcher.Main.run(Main.java:1499)
        at org.eclipse.equinox.launcher.Main.main(Main.java:1472)
Caused by: java.lang.NullPointerException
        at org.eclipse.ltk.ui.refactoring.resource.DeleteResourcesWizard$DeleteResourcesRefactoringConfigurationPage.createControl(DeleteResourcesWizard.java:93)
        at org.eclipse.ltk.internal.ui.refactoring.RefactoringWizardDialog2.createContents(RefactoringWizardDialog2.java:627)
        at org.eclipse.jface.window.Window.create(Window.java:426)
        at org.eclipse.jface.dialogs.Dialog.create(Dialog.java:1096)
        at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation$1.run(RefactoringWizardOpenOperation.java:179)
        at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
        at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:203)
        at org.eclipse.ltk.ui.refactoring.RefactoringWizardOpenOperation.run(RefactoringWizardOpenOperation.java:122)
        at org.eclipse.ltk.internal.ui.refactoring.actions.DeleteResourcesHandler.execute(DeleteResourcesHandler.java:41)
        at org.eclipse.ui.internal.handlers.HandlerProxy.execute(HandlerProxy.java:291)
        at org.eclipse.ui.internal.handlers.E4HandlerProxy.execute(E4HandlerProxy.java:92)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:55)
        ... 44 more</pre>

Any idea how to solve this issue ? Or any work-around ?","As I suspected the issue was related to the GUI, I tried running eclipse with GTK 2 instead of GTK 3. So I added the following lines to `eclipse.ini` :
<pre>--launcher.GTK_version
2</pre>
And the problem was gone. I could again delete projects without any problem.<br />
Here is my complete build information :
<pre>Eclipse Platform
Version: Oxygen.1a (4.7.1a)
Build id: M20171009-0410
OS: Linux, v.4.13.0-19-generic, x86_64 / gtk 2.24.31</pre>","<eclipse><gtk><eclipse-oxygen>"
"47909434","47910554","How to implement the new PrismApplication to replace the Bootstrapper class","are there any plans on creating a new Pluralsight Course for Prism 7 like the ""Update your Prism 4 to Prism 5"" Course? I think those are extremly helpful for guys like me with limited C#/Prism knowledge.

Cheers
","It depends on what your bootstrapper does, but `Prism.Unity.PrismApplication` has similar methods to override, so you should be able to copy the code over from the bootstrapper. Probably you only need `RegisterTypes` and `CreateShell`. Remember to update `App.xaml` to change the type of your application...","<prism>"
"47911388","47911793","Declare existing functions as async?","I use a function called setConf for testing. Sometimes it's really convenient if I can use it to start a promise chain, sometimes I just need need it to return the value.

Is it possible to declare an existing function as async? What I would like to do but it doesn't work is:


    const setConf = (conf) => {
      mainConf = Object.assign(mainConf , conf)
      return mainConf 
    }

    module.exports.asyncSetConf = async setConf
    module.exports.setConf = setConf


this I currently have 


    exports.asyncSetConf = async (conf) => {
      mainConf = Object.assign(mainConf , conf)
      return mainConf 
    }

    exports.setConf = (conf) => {
      mainConf = Object.assign(mainConf , conf)
      return mainConf 
    }

  
The code is identical, It seems kinda silly not to be able to refactor this","First off, a function declared with the `async` keyword returns a promise.  So you either want your function to return a promise or you don't.  There is no such thing as a function that is declared with the `async` keyword that sometimes returns a promise and sometimes doesn't.

Second off, if you have no asynchronous code in your function, then it's generally making things more complicated, not less complicated to wrap synchronous operations in an asynchronous interface, so there's generally no reason to do that.

Third off, if you just want to sometimes use `setConf()` to start a promise chain, you can simply wrap it with `Promise.resolve()` when you want to do that:

    Promise.resolve(setConf(...)).then(f).then(g).catch(...)

Of course, you don't necessarily need to do that either because if `f()` is asynchronous and returns a promise,  you could just do this:

    f(setConfg(...)).then(g).catch(...)

If you find yourself using `Promise.resolve(setConf(...))` a lot, then you can just make a utility function for it:

    function setConfPromise(...args) {
        return Promise.resolve(setConf(..args))
    }

> Is it possible to declare an existing function as async?

You can change its declaration or you can wrap it with another function.  You can't dynamically make it sometimes with `async` behavior and sometimes not.  You need two separate functions for that.

You could wrap it like this:

    module.exports.asyncSetConf = function(...args) {
        return Promise.resolve(setConf(...args));
    }
    module.exports.setConf = setConf","<javascript><ecmascript-6><async-await>"
"47913583","47917245","Is there a more elegant way to get random not used item from list using java 8?","
Function to be refactored...

    <T> T notUsedRandomItem(List<T> allItems, List<T> usedItems) {
        return allItems.stream()
                .filter(item -> !usedItems.contains(item))
                .sorted((o1, o2) -> new Random().nextInt(2) - 1)
                .findFirst()
                .orElseThrow(() -> new RuntimeException(""Did not find item!""));
    }

Function might be used like this...
    
    System.out.println(
                notUsedRandomItem(
                        Arrays.asList(1, 2, 3, 4), 
                        Arrays.asList(1, 2)
                )
        ); // Should print either 3 or 4

","You should use `HashSet`s to improve performance:

    <T> T notUsedRandomItem(List<T> allItems, List<T> usedItems) {

        Set<T> used = new HashSet<>(usedItems);
        Set<T> all = new HashSet<>(allItems);

        all.removeIf(used::contains); // or all.removeAll(used)

        if (all.isEmpty()) throw new RuntimeException(""Did not find item!"");

        int skip = new Random().nextInt(all.size());
        Iterator<T> it = all.iterator();
        for (int i = 0; i < skip; i++) it.next();

        return it.next();
    }

This removes elements from the `all` set if they belong to the `used` set. As `Set.removeIf` and `Set.contains` are being used, the removal of elements is optimal w.r.t performance. Then, a random number of elements is skipped in the resulting set, and finally, the next element of the set is returned.


----------


Another approach is to shuffle the `all` list first and then simply iterate and return the first element that doesn't belong to the `used` set:

    <T> T notUsedRandomItem(List<T> allItems, List<T> usedItems) {

        Set<T> used = new HashSet<>(usedItems);
        List<T> all = new ArrayList<>(allItems);

        Collections.shuffle(all);

        for (T elem : all) if (!used.contains(elem)) return elem;

        throw new RuntimeException(""Did not find item!"");
    }
","<java><java-stream>"
"47918946","47923620","SQLAlchemy: querying all objects with no direct relationship","I am new to ORM, so any comment are appreciated. Using the following code, I am trying to get all **Contacts** that are related to certain **Classification**. 

    Base = declarative_base()
    
    contact_category_association_table = Table('contact_category_association', Base.metadata,
        Column('contact_id', Integer, ForeignKey('contacts.id')),
        Column('category_id', Integer, ForeignKey('contact_categories.id'))
    )
    
    class Contact(Base):
        __tablename__ = 'contacts'
    
        id = Column(Integer, primary_key=True)
        name = Column(String)
        categories = relationship('ContactCategory', secondary=contact_category_association_table)
    
    
    class ContactCategory(Base):
        __tablename__ = 'contact_categories'
    
        id = Column(Integer, primary_key=True)
        name = Column(String)
        contacts = relationship('Contact', secondary=contact_category_association_table)
        classification_id = Column(Integer, ForeignKey('contact_classification.id'))
        classification = relationship('ContactClassification', back_populates='categories')
    
    
    class ContactClassification(Base):
        __tablename__ = 'contact_classification'
    
        id = Column(Integer, primary_key=True)
        name = Column(String)
        categories = relationship('ContactCategory', back_populates='classification')


Using the following SQL I managed to get a result close to my need. However, I could not translate that using sqlalchemy ORM. 

    select * from contacts c
    join contact_categories cc,  contact_category_association cca, contact_classification ccl
    where c.id = cca.contact_id and cc.id = cca.category_id and ccl.id = cc.classification_id;

The result I am seeking is a dict object. The key will be the id or name of the classification. The value will be a list of contacts.
","Not exactly what you had in mind since empty results will not be included, but in general you could query `contact_classification.name, contacts.*` tuples and group in Python:

    from collections import defaultdict
    
    query = session.query(ContactClassification.name, Contact).\
        join('categories', 'contacts')
    
    result = defaultdict(list)
    
    for klass, contact in query:
        result[klass].append(contact)","<python><orm><sqlalchemy>"
"47919066","47919142","How to remove a connected action?","Learning iOS development and followed the tutorial on Apple's web site. After I have connected a button to the viewController code (by ctl-drag) I decided to rename the action. Instead of refactoring, I removed the section of code and reconnect (by ctl-drag). Now the app crashed everytime I tried to run it because it is still looking for the old action.

How do I resolve this situation instead of creating a new project?

Iam using Xcode 9.

Thanks,

Ale","You can remove action in this manner here you will find two action like this already connected to old one so just remove that and it will disappear and connect to new one[![enter image description here][1]][1]


  [1]: https://i.stack.imgur.com/sfkOg.png","<xcode>"
"47920625","48047353","Start intensive POST in background service getting crashes","So there is a background **Service** which creates **Runnable** objects as soon as GPS **Location** is changed. `Runnable` contains `HTTPConnection` to make POST.

**So the problem I am facing if there is no chance to send data by this scheme something happened and app craches.**

Any clue to optimize code or may be change approach to TaskAsync and cancel pending TaskAsync when new TaskAsync is ready?

Any clue?

    import android.app.Service;
    import android.content.Context;
    import android.content.Intent;
    import android.location.Location;
    import android.location.LocationManager;
    import android.os.Bundle;
    import android.os.Handler;
    import android.os.HandlerThread;
    import android.os.IBinder;
    import android.text.format.DateFormat;
    import android.util.Log;
    
    import com.google.gson.Gson;
    
    import java.io.BufferedReader;
    import java.io.BufferedWriter;
    import java.io.IOException;
    import java.io.InputStreamReader;
    import java.io.OutputStream;
    import java.io.OutputStreamWriter;
    import java.math.BigDecimal;
    import java.math.RoundingMode;
    import java.net.HttpURLConnection;
    import java.net.URL;
    import java.util.Date;
    
    
    public class gps_service2 extends Service {
        private static final String TAG = ""GPS SERVICE"";
        private LocationManager mLocationManager = null;
        private static final int LOCATION_INTERVAL = 10000;
        private static final float LOCATION_DISTANCE = 10f;
        Context context;
    
        private class LocationListener implements android.location.LocationListener
        {
            Location mLastLocation;
    
            public LocationListener(String provider)
            {
                Log.e(TAG, ""LocationListener "" + provider);
                mLastLocation = new Location(provider);
            }
    
            @Override
            public void onLocationChanged(Location location)
            {
                Log.e(TAG, ""onLocationChanged: "" + location);
    
                try
                {
                    ComplexPreferences complexPreferences = ComplexPreferences.getComplexPreferences(context, ""App_Settings"", 0);
                    AppSettings appSettings = complexPreferences.getObject(""App_Settings"", AppSettings.class);
                    if (appSettings != null) {
    
                        LocationItem locationItem = new LocationItem();
                        locationItem.DeviceID = appSettings.getDeviceID();
                        locationItem.Latitude =  Double.toString(location.getLatitude());
                        locationItem.Longitude = Double.toString(location.getLongitude());
                        Date d = new Date();
                        CharSequence timeOfRequest = DateFormat.format(""yyyy-MM-dd HH:mm:ss"", d.getTime()); // YYYY-MM-DD HH:mm:ss
                        locationItem.TimeOfRequest = timeOfRequest.toString();
                        locationItem.SerialNumber = appSettings.getSerialNumber();
                           
    
                        Gson gson = new Gson();
                        String requestObject = gson.toJson(locationItem);
                        String url = appSettings.getIpAddress() + ""/api/staff/savedata"";
                        makeRequest(url, requestObject, dLocation);
                    }
                }
                catch (Exception ex)
                {                
                } 
            }
    
            @Override
            public void onProviderDisabled(String provider)
            {
                Log.e(TAG, ""onProviderDisabled: "" + provider);
            }
    
            @Override
            public void onProviderEnabled(String provider)
            {
                Log.e(TAG, ""onProviderEnabled: "" + provider);
            }
    
            @Override
            public void onStatusChanged(String provider, int status, Bundle extras)
            {
                Log.e(TAG, ""onStatusChanged: "" + provider);
            }
        }
    
        LocationListener[] mLocationListeners = new LocationListener[] {
                new LocationListener(LocationManager.GPS_PROVIDER),
                new LocationListener(LocationManager.NETWORK_PROVIDER)
        };
    
        @Override
        public IBinder onBind(Intent arg0)
        {
            return null;
        }
    
        @Override
        public int onStartCommand(Intent intent, int flags, int startId)
        {
            Log.e(TAG, ""onStartCommand"");
            super.onStartCommand(intent, flags, startId);
            return START_STICKY;
        }
    
        @Override
        public void onCreate()
        {
            context = this;
            Log.e(TAG, ""onCreate"");
            initializeLocationManager();
            try {
                mLocationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER, LOCATION_INTERVAL, LOCATION_DISTANCE,
                        mLocationListeners[1]);
            } catch (java.lang.SecurityException ex) {
                Log.i(TAG, ""fail to request location update, ignore"", ex);
            } catch (IllegalArgumentException ex) {
                Log.d(TAG, ""network provider does not exist, "" + ex.getMessage());
            }
            try {
                mLocationManager.requestLocationUpdates(
                        LocationManager.GPS_PROVIDER, LOCATION_INTERVAL, LOCATION_DISTANCE,
                        mLocationListeners[0]);
            } catch (java.lang.SecurityException ex) {
                Log.i(TAG, ""fail to request location update, ignore"", ex);
            } catch (IllegalArgumentException ex) {
                Log.d(TAG, ""gps provider does not exist "" + ex.getMessage());
            }
        }
    
        @Override
        public void onDestroy()
        {
            Log.e(TAG, ""onDestroy"");
            super.onDestroy();
            if (mLocationManager != null) {
                for (int i = 0; i < mLocationListeners.length; i++) {
                    try {
                        mLocationManager.removeUpdates(mLocationListeners[i]);
                    } catch (Exception ex) {
                        Log.i(TAG, ""fail to remove location listners, ignore"", ex);
                    }
                }
            }
        }
    
        private void initializeLocationManager() {
            Log.e(TAG, ""initializeLocationManager"");
            if (mLocationManager == null) {
                mLocationManager = (LocationManager) getApplicationContext().getSystemService(Context.LOCATION_SERVICE);
            }
        }
    
        public static double round(double value, int places) {
            if (places < 0) throw new IllegalArgumentException();
            BigDecimal bd = new BigDecimal(value);
            bd = bd.setScale(places, RoundingMode.HALF_UP);
            return bd.doubleValue();
        }
    
        public void makeRequest(String uri, String json, DLocation dLocation) {
    
            HandlerThread handlerThread = new HandlerThread(""URLConnection"");
            handlerThread.start();
            Handler mainHandler = new Handler(handlerThread.getLooper());
            Runnable myRunnable = createRunnable(uri, json, dLocation);
            mainHandler.post(myRunnable);
        }
    
        private Runnable createRunnable(final String uri, final String data,final DLocation dLocation){
    
            Runnable aRunnable = new Runnable(){
                public void run(){
                    try {
                        //Connect
                        HttpURLConnection urlConnection;
                        urlConnection = (HttpURLConnection) ((new URL(uri).openConnection()));
                        urlConnection.setDoOutput(true);
                        urlConnection.setRequestProperty(""Content-Type"", ""application/json"");
                        urlConnection.setRequestProperty(""Accept"", ""application/json"");
                        urlConnection.setRequestMethod(""POST"");
                        urlConnection.connect();
    
                        //Write
                        OutputStream outputStream = urlConnection.getOutputStream();
                        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(outputStream, ""UTF-8""));
                        try {
                            writer.write(data);
                        } catch (IOException e) {
                            e.printStackTrace();
                            Log.d(TAG,""Ошибка записи в буфер для пережачи по HTTP"");
                        }
                        writer.close();
                        outputStream.close();
    
                        //Read
                        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(urlConnection.getInputStream(), ""UTF-8""));
    
                        String line = null;
                        StringBuilder sb = new StringBuilder();
    
                        while ((line = bufferedReader.readLine()) != null) {
                            sb.append(line);
                        }
    
                        bufferedReader.close();
                        String result = sb.toString();
                     
                        Log.d(TAG, result);
    
                        Intent iResult = new Intent(""location_update"");
                    
                        DLocation dLocation = new DLocation();                    
                        iResult.putExtra(""result"", dLocation);
                        sendBroadcast(iResult);                   
    
                    }catch( Exception err){
                        err.printStackTrace();
                        Log.d(TAG, ""HTTP "" + err.getMessage());
                    }
                }
            };
    
            return aRunnable;
        }
    }

","Runnable is just an interface, when you create a thread using Runnable interface basically it will run under the the thread where it created, in here runnable associate with UI thread, as per google documentation Network calls must be in a worker thread not in UI thread. 

**Then Why it runs no emulator**   
android had DVM(dalvik virtual machine),it works like JVM but instead of .class file DVM uses .dex extension, so may the device had older or newer version of DVM.

**Fix**<br>
Use android's AsyncTask for network calls. android(DVM) had limited resources compare to JVM, when it comes to thread, so better use AsyncTask  

[check this answer too][1] 

**AsyncTask code for passing JSON to server, and get responds as callback** 

    public class WebService extends AsyncTask<String,String,String> {
    private static final String TAG=""SyncToServerTAG"";




    private String urlString;
    private JSONObject jsonObject=null;
    private int screenId=1;

    public WebService(String url) {
        this.urlString=url;
    }

    public WebService(Context context, String url, JSONObject jsonObject) {
        this.urlString = url;
        this.jsonObject = jsonObject;
    }

    @Override
    protected String doInBackground(String... strings) {
        try {
            URL url = new URL(urlString);
            HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
            urlConnection.setChunkedStreamingMode(0);
            urlConnection.setConnectTimeout(5000);
            urlConnection.setRequestProperty(""Content-Type"", ""application/json; charset=UTF-8"");
            urlConnection.setDoOutput(true);
            urlConnection.setDoInput(true);
            urlConnection.setRequestMethod(""POST"");
            if(jsonObject!=null) {
                OutputStream os = urlConnection.getOutputStream();
                os.write(jsonObject.toString().getBytes(""UTF-8""));
            }

            InputStream in = new BufferedInputStream(urlConnection.getInputStream());
            BufferedReader br = new BufferedReader(new InputStreamReader(
                    (urlConnection.getInputStream())));

            String output="""";
            while (true) {
                String line=br.readLine();
                    Log.d(TAG,line+"" "");
                if(line!=null)
                    output+=line;
                else
                    break;
            }

            in.close();
            urlConnection.disconnect();
            JSONObject j;
            if(output.equals(""""))
                publishProgress(""Server give null"");
            else {
                j=new JSONObject(output);
                return output;
            }
            return output;
        } catch (MalformedURLException e) {
            e.printStackTrace();
            publishProgress(e.toString());
        } catch (IOException e) {
            e.printStackTrace();
            publishProgress(e.toString());
        } catch (JSONException e) {
            e.printStackTrace();
            publishProgress(e.toString());
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(String... values) {
        super.onProgressUpdate(values);
        fireError(values[0]);
    }

    @Override
    protected void onPostExecute(String s) {
        super.onPostExecute(s);
        if(s!=null) {
            try {
                JSONObject jsonObject=new JSONObject(s);
                fireComplete(0, jsonObject);
            } catch (JSONException e) {
                e.printStackTrace();
                fireError(""Non acceptable responds from server [""+urlString+""]"");
            }
        }
    }

    public interface OnWebCompleteListener{
        void onComplete(JSONObject result, int dataSource);
        void onError(String error);
    }
    private OnWebCompleteListener onWebCompleteListener;
    private void fireComplete(int sourse,JSONObject cache){
        if(onWebCompleteListener!=null)
            onWebCompleteListener.onComplete(cache,sourse);
    }
    private void fireError(String message){
        if(onWebCompleteListener!=null)
            onWebCompleteListener.onError(message);
    }
    public void start(OnWebCompleteListener onWebCompleteListener){
        if(onWebCompleteListener==null)
            throw new RuntimeException(""You must provide non-null value as start listener"");
        this.onWebCompleteListener=onWebCompleteListener;
        execute((String)null);
    }

    }

**Usage**<br>
        
        WebService webService=new WebService(context,""url"",jsonObject);
        webService.start(new WebService.OnWebCompleteListener() {
        @Override
        public void onComplete(JSONObject result, int dataSource) {
            
        }

        @Override
        public void onError(String error) {

        }
        });


  [1]: https://stackoverflow.com/a/22580454/3879214
","<java><android>"
"47921429","47935671","Naming DTO and Entity classes","I have two sets of classes in my spring application - DTOs and Entities.

After reading Clean Code by Uncle Bob, I have got hooked on to the naming things right more than ever before.

I sat down refactoring a one of my Spring projects and I am not sure if adding DTO suffix for DTO classes is the right thing to do. If not, then how do you differentiate between DTO and Entity classes. I do use Service and Repository suffixes for my service classes and repository interfaces.

Merely keeping them under different packages with same names is not helpful esp. when they are are to be used in same scope.

Note: Not sure if this is a precise question to be asked on Stackoverflow.
","If you read [Core J2EE Patterns, 2nd Edition][1], it is called **Transfer Object** with all the sample codes having the `TO` suffix.  You can also have a look at Oracle's [Core J2EE Patterns][2] site.

To sum up: You should use either `DTO` or `TO` as a suffix to any transfer object you use in your business tier. 


  [1]: http://www.corej2eepatterns.com/TransferObject.htm
  [2]: http://www.oracle.com/technetwork/java/transferobject-139757.html","<spring><java-8><naming-conventions>"
"47930184","47930359","AngularJS TypeAhead - take a different attribute for ng-model","http://jsfiddle.net/H7LA4/275/

I want to display the id of the selected state instead of the state name above the input box. How can I refactor the code to show the id of the selected state? 

    <div ng-app=""myApp"">
        <div class='container-fluid' ng-controller=""TypeaheadCtrl""> <pre>State: {{selected}}</pre>
    
            <input class=""input-large"" type=""text"" ng-model=""selected"" typeahead=""state.name for state in states | filter:$viewValue | limitTo:8"">
        </div>
    </div>

JS

    angular.module('myApp', ['ui.bootstrap']);
    
    function TypeaheadCtrl($scope) {
    
        $scope.selected = undefined;
        $scope.states = [{name: 'Alabama',id: 1}, {name: 'New York',id: 2}, {name: 'Calafornia',id: 3}];
    }","I would use

*typeahead-on-select* 

callback to have more control and do extra computations if needed

HTML

    <div ng-app=""myApp"">
        <div class='container-fluid' ng-controller=""TypeaheadCtrl""> 
          <pre>State: {{selectedId}}</pre>
            
            <input 
            class=""input-large"" 
            type=""text"" 
            ng-model=""selected"" 
            typeahead=""state.name for state in states | filter:$viewValue | limitTo:8""
            typeahead-on-select=""onSelect($item)"">
        </div>
    </div>

JS

    angular.module('myApp', ['ui.bootstrap']);
    
    function TypeaheadCtrl($scope) {
    
        $scope.selected = undefined;
        $scope.states = [{name: 'Alabama',id: 1}, {name: 'New York',id: 2}, {name: 'Calafornia',id: 3}];
        
        $scope.onSelect = function ($item, $model, $label, $even) {
        	$scope.selectedId = $item.id
        }
    }

","<javascript><angularjs><typeahead.js>"
"47935093","48015495","Can you reuse options defined in other commands using commander.js?","So I have several commands and they all use the same options.

For example..

    program.command('hello')
        .option('--foo <name>', 'this is the foo option and requires a name')
        .option('--bar', 'this is the bar option and takes no arguments')
        .action(options => {
            // do stuff here...
        });
    
    program.command('hello')
        .option('--foo <name>', 'this is the foo option and requires a name')
        .option('--bar', 'this is the bar option and takes no arguments')
        .action(options => {
            // do stuff here...
        });

I'd like to refactor this and define the options once. However, action taken for each command may differ. 

Is there a way to declare options once and use them for any/all commands defined?
","The solution I came up with only works for commands that have the same exact options. To work with unique options, you would have to probably extend the solution I found, or maybe there is another way as well.

What I came up with:

    [
        {
            name: 'hello',
            method: 'hiMethod'
        },
        {
            name: 'world',
            method: 'woMethod',
        },
    ].forEach(cmd => {
        program.command(cmd.name)
            .option('--foo <name>', 'this is the foo option and requires a name')
            .option('--bar', 'this is the bar option and takes no arguments')
            .action(options => {
                // do stuff here...
                // I can use `cmd.method` for unique actions for each command
            });
    });

This solution worked for me :)","<node.js><command-line-interface>"
"47944522","47944703","Creating Sum/Total rows by user in sql query for csv/excel report","The query below pulls in data to form a 'report' but it's basically just line items of numbers grouped by 
CSR agent. What it does is accurate and correct, and after the query I save the results as a CSV. However,
it's only giving me the individual records, so I have to put it into excel and use formulas to insert a
'Totals' row that basically sums up the columns I need to be totalled. 

This sql query runs in a php script, but I'm not sure the best way to go about modifying any of this so that 
I can total those columns for each user. It would somehow have to say 'This is the end of records for user 7200
so insert row of totals for user 7200 and then move on to records for user 7206' or something to that effect.

The screenshot shows the report as it is, using ""x's"" and null spaces instead of 1 or 0, so in my excel formulas
I usuall have a count IF ""x"" variable. I'm hoping I can do something similar with this script. The query and 
screenshot are below.

Here is the fiddle: http://sqlfiddle.com/#!9/b6a568/1

The output of the fiddle is the output of the exact query, the only difference is the script puts it into csv.

I'm just hoping there's a way to create a 'Totals' row for each user that will add up the number of ""x's"" and 
the amount of seconds for duration and hold time.

Any suggestions to how I can refactor this are greatly appreciated.



    $result = mysqli_query($conn2,
        ""SELECT
        	  FirstN
        	  , LastN
            , Extension
            , Recieved
            , Recieved_Known
            , Outbound
            , Outbound_Known
            , Missed_No_VM
            , Missed_VM
            , Missed_Known
            , Calling_Number
            , Called_Number
            , Start_Time
            , End_Time
        	, Talk_Time_Seconds
            , Hold_Time_Seconds

        	FROM (
              SELECT distinct
               firstn
               , lastn
               , c.extension
               , CASE WHEN LEGTYPE1 = 2 AND ANSWERED = 1 THEN 'x' ELSE '' END AS Recieved
               , case when LEGTYPE1 = 2 and answered = 1 and CALLINGPARTYNO = k.phone_number then 'x' ELSE '' end as Recieved_Known
               , CASE WHEN LEGTYPE1 = 1 then 'x' ELSE '' end  AS Outbound
               , case when  FINALLYCALLEDPARTYNO = kn.long_number then 'x' ELSE '' end as Outbound_Known
               , case when legtype1 = 2 and answered = 0 and finallycalledpartyno  not like '%oice%' then 'x' ELSE '' end as Missed_No_VM
               , case when finallycalledpartyno like '%oice%' then 'x' ELSE '' end as Missed_VM
               , case when legtype1 = 2 and ANSWERED = 0 and CALLINGPARTYNO = k.phone_number then 'x' ELSE '' end as
                Missed_Known
               , a.CALLINGPARTYNO AS Calling_Number
               , a.FINALLYCALLEDPARTYNO AS Called_Number
               , b.starttime as Start_Time
               , b.endtime as End_Time
               , b.duration as Talk_Time_Seconds
               , a.holdtimesecs as Hold_Time_Seconds

              FROM ambition.session a
        		INNER JOIN ambition.callsummary b ON a.NOTABLECALLID = b.NOTABLECALLID
        		right join jackson_id.users c on a.callingpartyno = c.extension or a.finallycalledpartyno = c.extension
        		LEFT JOIN ambition.known_numbers k ON a.callingpartyno = k.phone_number
            left join ambition.known_numbers kn on a.finallycalledpartyno = kn.long_number
        			WHERE a.ts >= '2017-12-07' -- curdate()
        			and(a.CALLINGPARTYNO in (select extension from ambition.ambition_users) OR a.finallycalledpartyno IN (select extension from ambition.ambition_users))
              ) x
              order by extension;"") or die(mysqli_error( $conn2));


Screenshot for good measure:

[![enter image description here][1]][1]


  [1]: https://i.stack.imgur.com/VwNNE.png","I am not sure how do you uniquely identify the user. I am assuming that the extension is unique for each user. Based on that I come up with the following query:

    SELECT
              Extension
            , Recieved
            , Recieved_Known
            , Outbound
            , Outbound_Known
            , Missed_No_VM
            , Missed_VM
            , Missed_Known
            , Talk_Time_Seconds
            , Hold_Time_Seconds

          FROM (
              SELECT distinct
               c.extension
               , sum(CASE WHEN LEGTYPE1 = 2 AND ANSWERED = 1 THEN 1 ELSE 0 END) AS Recieved
               , sum(case when LEGTYPE1 = 2 and answered = 1 and CALLINGPARTYNO = k.phone_number then 1 ELSE 0 end) as Recieved_Known
               , sum(CASE WHEN LEGTYPE1 = 1 then 1 ELSE 0 end)  AS Outbound
               , sum(case when  FINALLYCALLEDPARTYNO = kn.long_number then 1 ELSE 0 end) as Outbound_Known
               , sum(case when legtype1 = 2 and answered = 0 and finallycalledpartyno  not like '%oice%' then 1 ELSE 0 end) as Missed_No_VM
               , sum(case when finallycalledpartyno like '%oice%' then 1 ELSE 0 end) as Missed_VM
               , sum(case when legtype1 = 2 and ANSWERED = 0 and CALLINGPARTYNO = k.phone_number then 1 ELSE 0 end) as
                Missed_Known
               , sum(b.duration) as Talk_Time_Seconds
               , sum(a.holdtimesecs) as Hold_Time_Seconds

              FROM session a
            INNER JOIN callsummary b ON a.NOTABLECALLID = b.NOTABLECALLID
            right join users c on a.callingpartyno = c.extension or a.finallycalledpartyno = c.extension
            LEFT JOIN known_numbers k ON a.callingpartyno = k.phone_number
            left join known_numbers kn on a.finallycalledpartyno = kn.long_number
              WHERE a.ts >= '2017-12-07' -- curdate()
              and(a.CALLINGPARTYNO in (select extension from ambition_users) OR a.finallycalledpartyno IN (select extension from ambition_users))
            group by c.extension    
          ) x
              
              order by extension;

The above query, at least, will give you some idea on how to solve the problem. ","<php><mysql><excel><csv>"
"47946680","47946984","Axios interceptor in vue 2 JS using vuex","I store token after success login call in vuex store like this:

    axios.post('/api/auth/doLogin.php', params, axiosConfig)
        .then(res => {
            console.log(res.data); // token

            this.$store.commit('login', res.data);
            this.hideModal();
        })

axiosConfig is file where I only set baseURL `export default { baseURL: 'http://localhost/obiezaca/v2' }` and params is just data sent to backend.

My vuex file looks is:

    import Vue from 'vue';
    import Vuex from 'vuex';
    
    Vue.use(Vuex);
    
    export const store = new Vuex.Store({
        state: {
            logged: false,
            token: ''
        },
        mutations: {
            login: (state, response) => {
                state.logged = true;
                state.token = response;
                console.log('state updated');
                console.log('state.logged flag is: '+state.logged);
                console.log('state.token: '+state.token);
            },
            logout: (state) => {
                state.logged = false;
                state.token = '';
            }
        }
    });

It is working correctly, I can re-render some of content in my SPA basing on `v-if=""this.$store.state.logged""` for logged user. I'm able to access `this.$store.state.logged` from any component in my entire app.

Now I want to add my token to every request which call my rest API backend. I've created basic axios http interceptor which looks like this:

    import axios from 'axios';
    
    axios.interceptors.request.use(function(config) {
        const token = this.$store.state.token;
        if(token) {
            config.headers.Authorization = `Bearer ${token}`;
        }
        return config;
    }, function(err) {
        return Promise.reject(err);
    });

Now I have 2 problems/questions about it.

1. I know that it is available to use `this.$store.state.logged` or `this.$store.state.token` across every component but can I use it same way in single javascript file?
2. Where should I execute/start my interceptor javascript file? It is independent file which lays in my app main folder but I am not calling it anywhere, in angularJS which I was working before, I had to add `$httpProvider.interceptors.push('authInterceptorService');` in config but I don't know how to do same thing in vue architecture. So where should I inject my interceptor?
","**1.**
========
First of all I'd use a [Vuex Module][1] as this Login/Session behavior seems to be ideal for a `Session` module. After that (which is totally optional) you can set up a [Getter][2] to avoid accessing the `state` itself from outside Vuex, you'd would end up with something like this:

    state: {
      // bear in mind i'm not using a module here for the sake of simplicity
      session: {
        logged: false,
        token: ''
      } 
    },
    getters: {
      // could use only this getter and use it for both token and logged
      session: state => state.session,
      // or could have both getters separated
      logged: state => state.session.logged,
      token: state => state.session.token
    },
    mutations: {
      ...
    }
With those getters set, you can get the values a bit easier from components. With either using `this.$state.getters.logged` (or the one you'd want to use) or using the `mapGetters` helper from Vuex [for more info about this you can check the *getters* docs]:

    import { mapGetters } from 'vuex'
    export default {
      // ...
      computed: {
        ...mapGetters([
          'logged',
          'token'
        ])
      }
    }


**2.**
========
I like to run Axios' interceptors along with Vue instantation in `main.js` creating, importing and executing a ""`interceptors.js`"" helper. I'd leave an example so you get an idea, but, then again, this is my own preference:

***main.js***

    import Vue from 'vue';
    import store from 'Src/store';
    import router from 'Src/router';
    import App from 'Src/App';

    // importing the helper
    import interceptorsSetup from 'Src/helpers/interceptors'
    
    // and running it somewhere here
    interceptorsSetup()

    /* eslint-disable no-new */
    new Vue({
        el: '#app',
        router,
        store,
        template: '<App/>',
        components: { App }
    });


***interceptors.js***

    import axios from 'axios';
    
    export default function setup() {
        axios.interceptors.request.use(function(config) {
            const token = this.$store.state.token;
            if(token) {
                config.headers.Authorization = `Bearer ${token}`;
            }
            return config;
        }, function(err) {
            return Promise.reject(err);
        });
    }

And there you'd end up having all the behavior cleanly encapsulated.

  [1]: https://vuex.vuejs.org/en/modules.html
  [2]: https://vuex.vuejs.org/en/getters.html","<vue.js><vuejs2><axios><interceptor><vuex>"
"47952143","47955135","Does Google Cloud ML Engine trainer have to be explicitly aware of Google Cloud Storage URIs?","I am trying to use an existing TensorFlow model, which I have so far run locally, with Google Cloud ML Engine. 

The model currently obtains its training data by passing filesnames such as `my_model.train` and `my_model.eval` into [`tf.data.TextLineDataset`][1].  These filenames are now hardcoded in the model's trainer, but I plan to refactor it such that it obtains them as [training application parameters][2] (along with `--job-dir`) on the command line instead; e.g. like so:

    my_trainer.pl --job-dir job \
      --filename-train my_model.train --filename-eval my_model.eval

This should then also allow me to run the trainer with Clould ML Engine locally:

    gcloud ml-engine local train \
      --job-dir job
      ...
      -- \
      --filename-train my_model.train \
      --filename-eval my_model.eval
      
Am I making correct assumptions so far and could I also run the same trainer in Google's cloud (after uploading my dataset files into `my_bucket`) by replacing local filenames with Google Cloud Storage `gs:` URIs e.g. like so :

    gcloud ml-engine local train \
      --job-dir job
      ...
      -- \
      --filename-train gs://my_bucket/my_model.train \
      --filename-eval gs://my_bucket/my_model.eval

I other worlds, can `tf.data.TextLineDataset` handle `gs:` URIs as ""filenames"" transparently, or do I have to include special code in my trainer for processing such URIs beforehand?

  [1]: https://www.tensorflow.org/api_docs/python/tf/data/TextLineDataset
  [2]: https://cloud.google.com/ml-engine/docs/training-overview#params
  [3]: https://stackoverflow.com/questions/47943039/segmentation-fault-11-after-back-porting-tensorflow-script-from-python-3-to-pyt","Yes, tf.read_file and tf.TextLineReader and tf.data.TextLineDataset all handle GCS implicitly.  Just make sure you pass in GCS URLs of the gs://my_bucket/path/to/data.csv as the ""filename""

One thing to be careful about:  always use os.path.join() to combine ""directory"" names and ""file"" names.  While most Linux distributions handle paths like /some/path//somefile.txt by ignoring the repeated slash, GCS (being a key-value store) considers it different from /some/path/somefile.txt.  So, use os.path.join to make sure you are not repeating directory separators.","<tensorflow><google-cloud-ml>"
"47961588","47961612","Coding standard with multiple if condition","I need to set data in entity based on on some condition.

I have used below to set data

    if (StringUtils.isNotBlank(customerVO.getGender())) {
    			mstCustomer.setGender(customerVO.getGender());
    		}
    		if (StringUtils.isNotBlank(customerVO.getBirthDate())) {
    			mstCustomer.setDob(DateUtils.getUtilDate(customerVO.getBirthDate()));
    		}
    
    		if (StringUtils.isNotBlank(customerVO.getAdd1())) {
    			mstCustomer.setAddress1(customerVO.getAdd1());
    		}
    		if (StringUtils.isNotBlank(customerVO.getAdd2())) {
    			mstCustomer.setAddress2(customerVO.getAdd2());
    		}
    		if (StringUtils.isNotBlank(customerVO.getAdd3())) {
    			mstCustomer.setAddress3(customerVO.getAdd3());
    		}
    		if (StringUtils.isNotBlank(customerVO.getPincode())) {
    			mstCustomer.setPinCode(customerVO.getPincode());
    		}
    		if (StringUtils.isNotBlank(customerVO.getStateName())) {
    			MstState state = mstStateRepository.findByName(customerVO.getStateName());
    			mstCustomer.setMstState(state);
    		}
    
    		if (StringUtils.isNotBlank(customerVO.getCity())) {
    			MstCity city = mstCityRepository.findByName(customerVO.getCity());
    			mstCustomer.setMstCity(city);
    		}
    
    		if (StringUtils.isNotBlank(customerVO.getIdentificationType())) {
    			mstCustomer.setIdentificationType(customerVO.getIdentificationType());
    		}
    
    		if (StringUtils.isNotBlank(customerVO.getIdentificationData())) {
    			mstCustomer.setIdentificationData(customerVO.getIdentificationData());
    		}
    
    		MstStatus mstStatus = mstStatusRepository.findOne(MstStatusEnum.CUST_ACTIVE.getStatusCode());
    		if (mstStatus != null) {
    			mstCustomer.setMstStatus(mstStatus);
    		}
    
    		if (!StringUtils.isBlank(customerVO.getMaritalStatus())) {
    			mstCustomer.setMaritalStatus(customerVO.getMaritalStatus());
    		}
    		if (StringUtils.isBlank(customerVO.getWeddingAnniversary())) {
    			mstCustomer.setWeddingAnniversary(DateUtils.getDateFromString(customerVO.getWeddingAnniversary()));
    		}
    
    		if (StringUtils.isNotBlank(customerVO.getMotherTongue())) {
    			mstCustomer.setMotherTongue(customerVO.getMotherTongue());
    		}
    		if (StringUtils.isNotBlank(customerVO.getFamilySize())) {
    			mstCustomer.setFamilySize(Integer.valueOf(customerVO.getFamilySize()));
    		}
    		if (StringUtils.isNotBlank(customerVO.getAdultsSize())) {
    			mstCustomer.setAdultsSize(Integer.valueOf(customerVO.getAdultsSize()));
    		}
    		if (StringUtils.isNotBlank(customerVO.getNoOfKids())) {
    			mstCustomer.setNoOfKids(Integer.valueOf(customerVO.getNoOfKids()));
    		}
    		if (StringUtils.isNotBlank(customerVO.getChilddob1())) {
    			mstCustomer.setChilddob1(DateUtils.getDateFromString(customerVO.getChilddob1()));
    		}
    		if (StringUtils.isNotBlank(customerVO.getChilddob2())) {
    			mstCustomer.setChilddob2(DateUtils.getDateFromString(customerVO.getChilddob2()));
    		}
    		if (StringUtils.isNotBlank(customerVO.getProfession())) {
    			mstCustomer.setProfession(customerVO.getProfession());
    		}

But sonar throwing this exception : `Refactor this method to reduce its Cognitive Complexity from 27 to the 15 allowed.`

Please suggest what is the best way to refactor above code.","Seems pretty doable using lambdas:

    private void setIfNotBlank(Supplier<String> getter, Consumer<String> setter) {
        String value = getter.get();
        if (StringUtils.isNotBlank(value)) setter.accept(value);
    }

Then, 

    if (StringUtils.isNotBlank(customerVO.getBirthDate())) {
        mstCustomer.setDob(DateUtils.getUtilDate(customerVO.getBirthDate()));
    }

would become

    setIfNotBlank(customerVO::getBirthDate, birthDate -> mstCustomer.setDob(DateUtils.getUtilDate(birthDate)));

You can abstract it further if it's not always strings:

    private <T> void setConditionally(Supplier<T> getter, Consumer<T> setter, Predicate<T> shouldSet) {
        T value = getter.get();
        if (shouldSet.test(value)) setter.accept(value);
    }","<java>"
"47965979","48069678","Module aliases in bazel","Bazel uses location based referencing scheme. However, if you want to move your modules around, this creates a problem with refactorings. Is it possible to emulate a logical naming scheme, similar to one in maven i.e. package.module.submodule?","There isn't a mechanism exactly like this in bazel, but I have two suggestions:

1. Move the package, and rename every reference to the old package to the new package. You can use `bazel query` to find the dependencies on a package. If you have only a few references to the old package, that's pretty easy, but if you have many references then that's harder. You can use a tool like [buildozer][1] to do the renaming automatically.

2. Move the package, and create a BUILD file where the old package was with [`alias()` rules][2] to each target in the new package. This might be annoying to maintain though.


  [1]: https://github.com/bazelbuild/buildtools/tree/master/buildozer
  [2]: https://docs.bazel.build/versions/master/be/general.html#alias","<java><maven><bazel>"
"47968093","47968951","clean architecture - what is the correct way to do data model mapping?","I have read this impressive [article][1] on data modeling in android with clean architecture and MVP. 

Now i would like to refactor some existing models that i have in my domain so that they for one do not contain parcelable code (android code) and are streamlined to work in the specific view.  You know sometimes we have to alter the model so that it works in a view like for example to get the selected position in a RecyclerView we would add a field called ""selectedPosition"" to the model.  There are many times we need to change the model and then we end up with models that are not pure and a little hard to maintain.  

Specifically i have 3 model data for 3 payment systems i am using. All the fields in the 3 models come back different. they have different names for the fields.  Can someone show me an example of the architecture used to make all 3 models use a common model ?


  [1]: https://overflow.buffer.com/2017/12/21/even-map-though-data-model-mapping-android-apps/","**Data model**

I am sure that your 3 models for 3 payment systems have common features. So you can take this features and put it to interface. Each of your models must implement this interface. In your case it should display a data model. 

For example: 

    class Info {
        int id;
        String cardNumber;
        .......
    }

    interface ITransactionable { //or abstract class with the common func and prop
        void addUserWithCard(String cardNumber, String name);
        boolean makeTransaction(\*some params*\);
        Info getPaymentUserInfo();
    }

    class Model1/2/3 implements ITransactionable {
        \*In each case methods doing different job but give you same result, 
          you can take info for your models from servers, clouds, db...*\
    }

**Domain model**

Domain model represent your business logic, manipulating of your data model.

    class DonationService {
        ITransactionable paymentService;
        DonationService(ITransactionable paymentService) {
            this.paymentService = paymentService
        }
        Info makeDonation(int money) {
            paymentService.addUserWithCard(""4546546545454546"", ""Vasya"");
            paymentService.makeTransaction(money);
            return paymentService.getPaymentUserInfo();
        }
        ........
    }

Each layer must give to next something like API.

**Presentation**

For example can fill recyclerView with data of each transaction. And take events from view like get detail info about transaction or make new transaction.

You can check this for watching how it can be realized: https://github.com/android10/Android-CleanArchitecture","<android><data-modeling><clean-architecture>"
"47968448","47969124","Can I get a reference to the current `ICakeContext` in my Cake build script?","I'm refactoring a Cake build script, and decided to introduce a class to hold some build settings that get passed around a lot and/or that exist in the global scope.

Some of the settings come from arguments, and are set using the `Argument<T>(string name, string defaultValue)` syntax. 
 
I'd like to create something like this:

    var context = BuildContext.FromArguments();

For that I need acquire an instance of the current ICakeContext. The reason for that I believe is that all methods defined in cake scripts become methods of a custom-built `ICakeContext` that probably inherits from `CakeContext` and thus can call all of its (extension) methods, but once you define a class, it becomes a nested class that no longer has access to nice helpers like `Argument<T>(name, defaultValue)`.

I was hoping I could either do `ICakeContext.Current` or simply pass `this` as in `BuildContext.FromArguments(this)` or something similar.

But the keyword `this` is not allowed at that level of a Cake script (not sure why, is the top level a static method?

So, the question is: how do I get a reference to the current `ICakeContext`?","The reason that `this` does not work, is because of the way Roslyn implements scripting, and there is no concept of `this` in the script's outer scope.

You can access the context in a couple of different ways.

**From a `Task`:**

    Task(""MyTask"")
      .Does(ctx =>
    {
        BuildContext.FromArguments(ctx);
    });

**From `Setup`/`Teardown`:**

    Setup(ctx =>
    {
        BuildContext.FromArguments(ctx);
    });

    Teardown(ctx =>
    {
        BuildContext.FromArguments(ctx);
    });

**From `TaskSetup`/`TaskTeardown`:**

    TaskSetup(ctx =>
    {
        BuildContext.FromArguments(ctx);
    });
    
    TaskTeardown(ctx =>
    {
        BuildContext.FromArguments(ctx);
    });

**From the outer script scope:**

    #load ""somefile.csx""
    
    BuildContext.FromArguments(Context);","<cakebuild>"
"47971220","47973925","Initialise PointCloudT::Ptr class member","I'm trying to refactor the [point cloud tutorial code](http://pointclouds.org/documentation/tutorials/interactive_icp.php) into OO form.

Here's my class structure


    class PclRegister {
    private:
        // The point clouds we will be using
        PointCloudT::Ptr cloud_in;  // Original point cloud
        PointCloudT::Ptr cloud_tr;  // Transformed point cloud
        PointCloudT::Ptr cloud_icp; // ICP output point cloud
        pcl::console::TicToc time;
    public:
        void registerFixedSurface(std::string path);
        Eigen::Matrix4d applyTransformation();
        void performIcp(Eigen::Matrix4d transform, int iterations);
        void print4x4Matrix(const Eigen::Matrix4d & matrix);
    };

and usage

    goicpz::PclRegister pclRegister;
    pclRegister.registerFixedSurface(argv[1]);
    Eigen::Matrix4d transform = pclRegister.applyTransformation();
    pclRegister.performIcp(transform, iterations);


However I get the following runtime error

    Assertion failed: (px != 0), function operator*, file /project/build/Boost/install/include/boost/smart_ptr/shared_ptr.hpp, line 704.

I believe my private class members are not initialised correctly but I am not sure how to fix this. I tried adding a constructor and initialising them there (this is my Java background coming into play) but that does not seem to be legal C++.

I had a look [here](https://stackoverflow.com/questions/3127454/how-do-c-class-members-get-initialized-if-i-dont-do-it-explicitly) and it says uninitialised references will not compile and objects are implicitly initialised. So I am a bit lost.

Can someone point me in the right direction?","You have to initialize the your shared_ptr properly. If you can do that in your constructor, do it like that:

    PclRegister()
      : cloud_in(new PointCloudT),
        cloud_tr(new PointCloudT),
        cloud_icp(new PointCloudT)
    {}

If you want to initialize or update the pointers at a later stage you could probably use something like this:

    cloud_in = PointCloudT::Ptr(new PointCloudT)","<c++><shared-ptr><point-cloud-library>"
"47978755","47979260","Vuex getter and array reduce","I'm trying to code some getters to calculate a part total and a per item total. But when I refactored the code to use array.reduce, the partTotal returned undefined.

Can you help me to know why this works:

    getters: {
        
        calcPart: (state, getters) => part => {
            
            let total = 0.0
            
            for (let i = 0, length = part.items.length; i < length; i++) {
                total += getters.calcItem(part.items[i])
            }
            
            return total

        },

        calcItem: state => item => {
            return parseFloat(item.value1) * parseFloat(item.value2)
        },

    }

And why this does not work (calcTotal returns ""undefined""):


    getters: {

        calcPart: (state, getters) => part => {
            return part.items.reduce((acc, item) => { acc + getters.calcItem(item) }, 0.0)
        },

        calcItem: state => item => {
            return parseFloat(item.value1) * parseFloat(item.value2)
        },

    }

Has it something to do with the fact of reduce is an async function?

Thanks in advance!","You need to return inside brackets.

Change this line:

    return part.items.reduce((acc, item) => { acc + getters.calcItem(item) }, 0.0)

To this one:

    return part.items.reduce((acc, item) => { return acc + getters.calcItem(item) }, 0.0)

You can also avoid the undefined result by just removing the brackets:

    return part.items.reduce((acc, item) => acc + getters.calcItem(item), 0.0)

Side note: Type semicolons.","<javascript><vuejs2>"
"47978893","47979028","PyCharm: is this kind of automatic signature refactoring possible?","A Python code of a project has a lot of function definitions and calls like:

    def some_function(a, b="""", c=0, d=None, e=""something""):
        # whatever
        pass
    
    some_function(""a"", ""b"", 1, e=""something else"")

This is very hairy (bad practice - missing context, etc) and I would like to automatically change it to:

    some_function(a=""a"", b=""b"", c=1, e=""something else"")

*(well, the first positional argument can maybe stay as is in some cases)*

In many cases, keyword parameters are in a different order, so those can also be arranged according to the function definition order:

    def some_method(self, a, b=1, c=2): pass
    obj.some_method(a, c=12, b=0) -> obj.some_method(a, b=0, c=12)

Can PyCharm with it's Refactor > Change signature be of any help?

Well, PyCharm does the kw arguments reordering, but does not change positional arguments to keyword arguments (in calls). Is it just current limitation or am I missing some way to do it automatically?
","Here one way:

1. Put cursor to the function definition and Refactor > Change signature

2. Add some dummy argument (eg, `REMOVEME`) with default value right before the first argument, which should be kw argument, but after all positional arguments (without default values)

3. Refactor

4. Go to the signature refactoring again, remove dummy argument and refactor.

Now all the calls are using positional arguments where due, properly reordered.","<python><pycharm><automated-refactoring><method-signature><function-signature>"
"47979760","47980610","How should I refactor code using Optional and ifPresent(...) to... not?","I'm very new to Java. I'm faced with two classes, `FooRequest` and `BarRequest`. (Simplified for this question, of course.)

    public class FooRequest {

        private String a;
        private String b;
        private String c;
        private DateTime x;
        private DateTime y;
        private BigDecimal z;

        // ... and more members

        // ... getters and setters for each member
    }

And the other class:

    public class BarRequest {

        private Optional<DateTime> x;
        private Optional<DateTime> y;
        private Optional<BigDecimal> z;

        // ... getters and setters for each member
    }

These were written by different people, one preferring null checks upon use, the other preferring `Optional`. But because `FooRequest` has many more members, is in widespread use, and completely covers all of `BarRequest`'s members, I'm tasked with replacing `BarRequest` with `FooRequest`.

Now, at first I thought I might just ""upgrade"" `FooRequest`'s members (at least the 3 used by `BarRequest`) to `Optional<>`. However, this caused numerous compilation issues (basically, everywhere `FooRequest` was returned or used). I learned `Optional<T>` cannot drop-in replace `T`.

My team-lead confirmed it was not practical to keep `Optional<>`. To minimize changes, we'd want to rewrite any code previously using `Optional<>`. For example,

    request.getDateBegin().ifPresent((dateBegin) -> {
      if (!dateBegin.equals(ad.startDate())) {
        // ...
      }
    }

Here's my attempt at converting this:

    if (request.getDateBegin() != null) {
      DateTime dateBegin = request.getDateBegin();
      if (!dateBegin.equals(ad.startDate())) {
        // ...
      }
    }

Is this correct? Am I missing something by simply doing a `null` comparison? Is there any way to use a lambda expression inside and avoid creating a `DateTime` temporary?","    if (request.getDateBegin() != null) {
      DateTime dateBegin = request.getDateBegin();
      if (!dateBegin.equals(ad.startDate())) {
        // ...
      }
    }

can be replaced with 

    Optional.ofNullable(request.getDateBegin())
                .filter(date -> !date.equals(ad.startDate()))
                .ifPresent(date -> {
                    // ... whatever
                });","<java><refactoring><optional>"
"47983048","47983208","Updating AJAX success with dynamic data","I am not very good with JavaScript, but am trying to better myself. I am refactoring a script that has 2 virtually identical AJAX calls. The only difference between the two is what's being done inside the success function.

If I wanted to use one AJAX function instead of 2, how would I go about 'injecting' one or the other blocks of code into what would be the single success function?","Maybe something the following will help:

    methodOne = function(data) {
      // do some stuff
    };
    methodTwo = function(data) {
      // do some different stuff
    };
    
    $("".one, .two"").click(function() {
      var callback = function(){};
      if ($(this).hasClass('one')) {
        callback = methodOne;
      else if ($(this).hasClass('two')) {
        callback = methodTwo;
      }
      $.ajax({
        url      : ""upload.asp"",
        type     : ""POST"",
        data     : $(""#upload"").serialize(),
        dataType : 'json',
        cache    : false,
        success  : callback
      });
    });","<jquery><ajax>"
"47983227","47985613","helm installation: Package emacs '24.4' unavailable","While installing helm in emacs, I have come across the error

>Package emacs '24.4' unavailable 
    
I am a noob to emacs and I have seen [similar questions][stack1] on stack, but the solution offered there doesn't not solve the problem. 

>Type M-x locate-library RET package to find where Emacs is getting its package.el from. The path it shows should end with lisp/emacs-lisp/package.elc. If it doesn't, try getting rid of the indicated file (or changing the load path so Emacs doesn't find it).

Can somebody help?

Below is my init.el file (configuration file)

    ;; https://blog.aaronbieber.com/2015/05/24/from-vim-to-emacs-in-
    fourteen-days.html 

    (require 'package)

    (add-to-list 'package-archives '(""org"" . ""http://orgmode.org/elpa/""))
    (add-to-list 'package-archives '(""marmalade"" . ""http://marmalade-
    repo.org/packages/""))
    (add-to-list 'package-archives '(""melpa"" . 
    ""http://melpa.org/packages/""))
    (add-to-list 'package-archives '(""melpa-stable"" . 
    ""http://stable.melpa.org/packages/""))

    (setq package-enable-at-startup nil)
    (package-initialize)


My emacs version is 24.3.1 fresh install. I have loaded the init file a few times. I am on ubuntu 14.04

[stack1]:https://stackoverflow.com/questions/16177807/js2-refactor-from-melpa-package-emacs-24-1-is-unavailable","You're trying to install something which requires that you are running Emacs 24.4 or later.

Hence you getting the error 

> Package emacs '24.4' unavailable

because

> My emacs version is 24.3.1

You'll need to upgrade to a newer version of Emacs if you want to install that package.
","<emacs><emacs24><helm>"
"47985764","47985800","There is an HTML2Jade converter, is there a JADE2HTML converter","I am looking at a codebase from Google which includes JADE (PUG) templates, and want to convert the JADE code back to plain old HTML as part of a larger refactor.  I see a couple libs for HTML->JADE but none for JADE->HTML.  

Is there a JADE->HTML converter out there?","That's what Jade (Pug) does:

http://jade-lang.com/command-line

    $ jade < my.jade > my.html","<html><pug>"
"47988435","47992656","Why does `animation-direction: reverse` not work for my CSS keyframe animation?","I'm trying to use `animation-direction: reverse` to refactor my CSS keyframe animation. I have a container div when clicked will toggle an ""active"" class on it via jQuery which triggers the animation (forward or backward depending on the ""active"" state). The forward and backward animations are really the same thing except the keyframes are in the reverse order. I figured that `animation-direction: reverse` would enable me to refactor it by just using one animation and reversing it for the other, but it's not working the way I thought it would. The following markup and CSS (Sass) code snippet is the way it works now without reverse. 

    <div class=""container"">
      <div class=""line""></div>
    </div>
&nbsp;

    $width-height: 100px;
    $duration: 1s;
    $line-width: 10%;
    $animation-distance: $width-height * .45;

    @keyframes line-in {
      0% { transform: translateY(-$animation-distance); }
      50% { transform: translateY(0); }
      100% { transform: rotate(-135deg); }
    }

    @keyframes line-out {
      0% { transform: rotate(-135deg); }
      50% { transform: translateY(0); }
      100% { transform: translateY(-$animation-distance); }
    }

    .container {
      margin: 10rem auto 0;
      width: $width-height;
      height: $width-height;
      position: relative;
      border: 1px solid black;
  
      &.active {
        .line {
          animation-name: line-in;
          animation-direction: normal;
        }
      }
    }

    .line {
      width: 100%;
      height: $line-width;
      position: absolute;
      top: 45%;
      background-color: orange;
      animation-direction: normal;
      animation-name: line-out;
      animation-duration: $duration;
      animation-fill-mode: forwards;
    }

When I change the ""active"" animation to following, animations in both directions stop working. 

    &.active {
      .line {
        animation-name: line-out;
        animation-direction: reverse;
      }
    }

I believe it has something to do with using the same animation because if I just set the `animation-direction: reverse` and use `animation-name: line-in`, it correctly plays the line-in animation in reverse. 

Link to codepen:
https://codepen.io/soultrust/pen/gogKjN
","Very good question. You have already noticed that `animation-direction: reverse;` does work. You where very close to figuring out this css quirkiness all by yourself.

There are some additional rules to take note off.

 - When removing/replacing a css animation, the animation will start from 0%,
 - When you set `reverse` (while not changing the actual animation), the animation will continue from whatever % it was at.

So when you clicked the element and set the `line-out` animation:

 - The animation will start from 0%
 - Play in whatever direction you've set.

When only applying a new animation direction:

  - The animation continous from whatever percentage it was, eg, 100%.

You can [restart][1] the animation with several forms of trickery. you'll see that the animation is being played in reverse when the element is recreated.

<!-- begin snippet: js hide: false console: true babel: false -->

<!-- language: lang-js -->

    var clickFunc =function(e) {    
          //toggle the state
          $(this).toggleClass(""active"");
          //reset the animatino state by cloning and replacing the element.
          var newone = this.cloneNode(true);
          this.parentNode.replaceChild(newone, this);
          // reapply click handler to the cloned element
          $(newone).click(clickFunc)   
    }


    $(function() {
      $("".question"").click(function() {
        $(this).toggleClass(""active"");
      });
      
        $("".answer"").click(clickFunc);

      $("".restart"").click(function() {
        $("".line"").each(function() {
          var newone = this.cloneNode(true);
          this.parentNode.replaceChild(newone, this);
        });
      });
    });


<!-- language: lang-css -->

    @keyframes line-in {
      0% {
        transform: translateY(-45px);
      }
      50% {
        transform: translateY(0);
      }
      100% {
        transform: rotate(-135deg);
      }
    }
    @keyframes line-out {
      0% {
        transform: rotate(-135deg);
      }
      50% {
        transform: translateY(0);
      }
      100% {
        transform: translateY(-45px);
      }
    }
    .line {
      width: 100%;
      height: 10%;
      position: absolute;
      top: 45%;
      background-color: orange;
      animation-direction: normal;
      animation-name: line-in;
      animation-duration: 1s;
      animation-fill-mode: forwards;
    }

    .container {
      margin: 1rem auto 0;
      width: 100px;
      height: 100px;
      position: relative;
      border: 1px solid black;
    }
    .container.reverse .line {
      animation-name: line-in;
      animation-direction: reverse;
    }
    .container.active .line {
      animation-name: line-in;
      animation-direction: reverse;
    }
    .container.active.reverse .line {
      animation-name:line-in;
      animation-direction: normal;
    }

    .container.out.active .line {
      animation-name: line-out;
      animation-direction: normal;
    }

<!-- language: lang-html -->

    <script src=""https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js""></script>
    <button class=""restart"">reset animation state</button><br>
    in -out
    <div class=""container question out"">
      <div class=""line""></div>
    </div>

    active reversed
    <div class=""container question"">
      <div class=""line""></div>
    </div>

    <br>

    workaround
    <div class=""container answer reverse"">
      <div class=""line""></div>
    </div>



<!-- end snippet -->

In order to debug this. You can inspect the animation states in the web dev tools of your browser:
[![enter image description here][2]][2]
 


  [1]: https://css-tricks.com/restart-css-animation/
  [2]: https://i.stack.imgur.com/TFZLT.png","<css3><css-animations>"
"47996252","47996651","Related Field got invalid lookup :exists","In my database, I have a `Photo` class, that I use as a foreignkey to other classes. These are two examples of such.

    class SubstancePointsLabel(ResultBase):   
        #: photo being labeled
        photo = models.ForeignKey(Photo, related_name='substance_points_labels')
    
    class SubstancePoint(EmptyModelBase):   
        #: photo
        photo = models.ForeignKey(Photo, related_name='substance_points')

For a Photo instance, I'm capable of accessing `SubstancePointsLabel` and `SubstancePoint` via the related name. 

    In : photo.substance_points_labels.count()
    Out: 3
    
    In : photo.substance_points.count()
    Out: 9

I wish to filter Photo instances, on whether the related class exists, which I do as follows.

    In : Photo.objects.filter(substance_exists_labels__exists=True).count()
    Out: 335932

Now, as above, this works for some. For a few others, the query returns an error:

    In : Photo.objects.filter(substance_points__exists=True).count()
    ---------------------------------------------------------------------------
    TypeError                                 Traceback (most recent call last)
    /data_nfs/opensurfaces2/server/matclass/tasks.pyc in <module>()
    ----> 1 Photo.objects.filter(substance_points__exists=True).count()
    
    /data_nfs/opensurfaces2/venv/local/lib/python2.7/site-packages/django/db/models/manager.pyc in manager_method(self, *args, **kwargs)
         90         def create_method(name, method):
         91             def manager_method(self, *args, **kwargs):
    ---> 92                 return getattr(self.get_queryset(), name)(*args, **kwargs)
         93             manager_method.__name__ = method.__name__
         94             manager_method.__doc__ = method.__doc__
    
    /data_nfs/opensurfaces2/venv/local/lib/python2.7/site-packages/django/db/models/query.pyc in filter(self, *args, **kwargs)
        689         set.
        690         """"""
    --> 691         return self._filter_or_exclude(False, *args, **kwargs)
        692 
        693     def exclude(self, *args, **kwargs):
    
    /data_nfs/opensurfaces2/venv/local/lib/python2.7/site-packages/django/db/models/query.pyc in _filter_or_exclude(self, negate, *args, **kwargs)
        707             clone.query.add_q(~Q(*args, **kwargs))
        708         else:
    --> 709             clone.query.add_q(Q(*args, **kwargs))
        710         return clone
        711 
    
    /data_nfs/opensurfaces2/venv/local/lib/python2.7/site-packages/django/db/models/sql/query.pyc in add_q(self, q_object)
       1329         existing_inner = set(
       1330             (a for a in self.alias_map if self.alias_map[a].join_type == self.INNER))
    -> 1331         clause, require_inner = self._add_q(where_part, self.used_aliases)
       1332         self.where.add(clause, AND)
       1333         for hp in having_parts:
    
    /data_nfs/opensurfaces2/venv/local/lib/python2.7/site-packages/django/db/models/sql/query.pyc in _add_q(self, q_object, used_aliases, branch_negated, current_negated)
       1356                 child_clause, needed_inner = self.build_filter(
       1357                     child, can_reuse=used_aliases, branch_negated=branch_negated,
    -> 1358                     current_negated=current_negated, connector=connector)
       1359                 joinpromoter.add_votes(needed_inner)
       1360             target_clause.add(child_clause, connector)
    
    /data_nfs/opensurfaces2/venv/local/lib/python2.7/site-packages/django/db/models/sql/query.pyc in build_filter(self, filter_expr, branch_negated, current_negated, can_reuse, connector)
       1223             # refactored when composite fields lands.
       1224             condition = field.get_lookup_constraint(self.where_class, alias, targets, sources,
    -> 1225                                                     lookups, value)
       1226             lookup_type = lookups[-1]
       1227         else:
    
    /data_nfs/opensurfaces2/venv/local/lib/python2.7/site-packages/django/db/models/fields/related.pyc in get_lookup_constraint(self, constraint_class, alias, targets, sources, lookups, raw_value)
       1575                 root_constraint.add(value_constraint, OR)
       1576         else:
    -> 1577             raise TypeError('Related Field got invalid lookup: %s' % lookup_type)
       1578         return root_constraint
       1579 
    
    TypeError: Related Field got invalid lookup: exists


The classes are created the same way, and are queried the same way. What could the cause it's giving an error for some instances, and not for others? 


","Use *[**`conditional expression`**][1]* to check existence of related objects.

    from django.db.models import When, Case, IntegerField

    Photo.objects.annotate(
       has_substance_points=Case(
           When(
              substance_points__isnull=True, then=0
           ), 
           default=1, 
           output_field=IntegerField()
       )
    ).filter(has_substance_points=1).count()

> Above query will return **count of photos** that has
> **substance_points**

 


  [1]: https://docs.djangoproject.com/en/2.0/ref/models/conditional-expressions/","<django><django-queryset>"
"48006466","48008672","How refactor readChunk from SFTPFile to stop using inlineCallbacks?","I'm trying to read from file over `ISFTPFile` but I get into infinity loop while trying to readChunk. I don't know how to stop reading from `SFTPFile` and why there is no `EOFError`?

BTW How to avoid `@inlinceCallbacks` in this scenario? 

Or maybe there is a better way to read/write for `ISFTPFile`? 

    @defer.inlineCallbacks
    def calculate_checksum(open_file):
        # source_checksum = _calculate_checksum(source))
        # print source_checksum

        hasher = hashlib.sha256()

        chunk = yield open_file.readChunk(
            offset=0, length=self.chunk_size)
        hasher.update(chunk)

        while chunk:
            print chunk
            chunk = yield open_file.readChunk(
                offset=0, length=self.chunk_size)
            hasher.update(chunk)

        defer.inlineCallbacks(chunk)

    client_file = client.openFile(
        filename=target, flags=FXF_READ, attrs={})
    client_file.addCallback(calculate_checksum)
    yield client_file
","You effectively want to map sha256.update over an iterator of file chunks:

    hasher = hashlib.sha256()
    chunks = read_those_chunks()
    map(hasher.update, chunks)
    return hasher.hexdigest()

The obstacle is that you want to avoid a `read_those_chunks` which loads the whole file into memory (presumably).  So, as a first step, implement that piece:

    def read_those_chunks(open_file, chunk_size):
        offset = 0
        while True:
            yield open_file.readChunk(offset, chunk_size)
            offset += chunk_size

There's a generator that yields `Deferred`s that fire with subsequent chunks (or `EOFError`).  Unfortunately, you can't use this with `map`.  So now implement a map-alike that can deal with this:

    def async_map(function, iterable):
        try:
            d = next(iterable)
        except StopIteration:
            return

        d.addCallback(function)
        d.addCallback(lambda ignored: async_map(function, iterable))
        return d

Now use these two to create a `Deferred` that fires when the digest has been computed:

    def calculate_checksum(open_file, chunk_size):
        hasher = hashlib.sha256()
        chunks = read_those_chunks(open_file, chunk_size)
        d = async_map(hasher.update, chunks)
        d.addErrback(lambda err: err.trap(EOFError))
        d.addCallback(lambda ignored: hasher.hexdigest())
        return d

You may also  notice that `async_map` differs from `map` in that it doesn't produce a list of results of the function calls it makes.  Perhaps it's more like `reduce`:

    def async_reduce(function, iterable, lhs):
        try:
            d = next(iterable)
        except StopIteration:
            return lhs

        d.addCallback(lambda rhs: function(lhs, rhs))
        d.addCallback(lambda lhs: async_reduce(function, iterable, lhs))
        return d

And a reducing function for computing the hexdigest is like:

    def update_hash(hasher, s):
        hasher.update(s)
        return hasher

And so `calculate_checksum` becomes:

    def calculate_checksum(open_file, chunk_size):
        chunks = read_those_chunks(open_file, chunk_size)
        d = async_reduce(update_hash, hashlib.sha256(), """")
        d.addErrback(lambda err: err.trap(EOFError))
        d.addCallback(lambda hasher: hasher.hexdigest())
        return d

which is a bit nicer for not having the `hasher` closure.

Of course, there are also many other ways you could rewrite this function to avoid `inlineCallbacks`.  The way I've chosen doesn't eliminate the use of a generator function so if that's what you wanted to escape it hasn't really helped.  If so, perhaps you can decompose the problem as I have done here into different pieces, none of which involve a generator.
","<python><twisted><sftp>"
"48007778","48012784","Hibernate Writing oriental instead of latin symbols into SQL Server","I used JBOSS Hibernate tools to reverse engineer the MS SQL Server to get my data model objects.

I then wrote a small test program in Java to open a session, use the configuration, instantiate a Customer object, persist it into the database.

The sample works by writing to the database and closing the session.

What is weird, I have never seen this before is the 'oriental' characters being saved into the database columns.

Database: SQL Server Express 10.50.1600 on Windows 2012 R2 Standard
Java App: Eclipse Neon, Maven, Hibernate 4.3, Java 1.8

NOTE: I am a newbie to Hibernate.

Things I tried
0. Do a SQL Insert with IBM data studio (success)
1. Add the UTF-8 in connection url
2. Add the UTF-8 in hibernate xml
3. Create a SqlServerDialectWithNvarchar Class and enter it into hibernate xml.

    public class SqlServerDialectWithNvarchar extends org.hibernate.dialect.SQLServerDialect{
    	
    	public SqlServerDialectWithNvarchar(){
    		registerHibernateType(Types.NVARCHAR, 4000, ""string"");
    		registerColumnType(Types.BIGINT, ""bigint"");
            registerColumnType(Types.BIT, ""bit"");
            registerColumnType(Types.CHAR, ""nchar(1)"");
            registerColumnType(Types.VARCHAR, 4000, ""nvarchar($l)"");
            registerColumnType(Types.VARCHAR, ""nvarchar(max)"");
            registerColumnType(Types.VARBINARY, 4000, ""varbinary($1)"");
            registerColumnType(Types.VARBINARY, ""varbinary(max)"");
            registerColumnType(Types.BLOB, ""varbinary(max)"");
            registerColumnType(Types.CLOB, ""nvarchar(max)"");
    	}
    
    }

What else can I try or refactor?

Main Program:

public static void main(String[] args) {
	String btnName = ""OrderTrack.java "";
		
	System.out.println(btnName + "" started."");
	System.out.println(btnName + "" hibernate.enh-tas.cfg.xml"");
		
	Configuration cfg1 = new Configuration();
	cfg1.configure(""/hibernate.enh-tas.cfg.xml"");
			
	SessionFactory sf1 = cfg1.configure().buildSessionFactory();
	
	System.out.println(btnName + "" open hibernate session."");
	Session session = sf1.openSession();
	session.beginTransaction();
	
	TblCustomers customer = new TblCustomers();
	customer.setCustomerName(""TEST XXX"");
	customer.setCustomerCode(""DELETE ME"");
	
	session.persist(customer);
	session.getTransaction().commit();
	
	System.out.println(btnName + "" closing hibernate session."");
	session.close();
	System.out.println(btnName + "" session closed."");
	
}

SELECT Query using IBM Data Studio after main program runs

     customerId 	customerCode 	customerName
     ---------- 	-------------- 	---------------
             30	    Ԁt䐉䱅呅⁅䕍    	Ԁt合卅⁔塘X      


Hibernate XML

    hibernate-configuration>
        <session-factory>
            <property name=""hibernate.connection.useUnicode"">true</property>
    		<property name=""hibernate.connection.characterEncoding"">utf-8</property>
            <property name=""hibernate.bytecode.use_reflection_optimizer"">false</property>
            <property name=""hibernate.connection.driver_class"">com.microsoft.sqlserver.jdbc.SQLServerDriver</property>
            <property name=""hibernate.connection.password"">pwd</property>
            <property name=""hibernate.connection.url"">jdbc:sqlserver://serverhost:1433;characterEncoding=UTF-8;</property>
            <property name=""hibernate.connection.username"">tms</property>
            <property name=""hibernate.dialect"">org.hibernate.dialect.SQLServerDialect</property>
            <property name=""hibernate.encrypt"">false</property>
            <property name=""hibernate.search.autoregister_listeners"">true</property>
            <property name=""hibernate.show_sql"">false</property>
            <property name=""hibernate.validator.apply_to_ddl"">false</property>

Customer Class
/**
 * TblCustomers generated by hbm2java
 */

    @Entity
    @Table(name = ""tblCustomers"", schema = ""dbo"", catalog = ""TAS"", uniqueConstraints = @UniqueConstraint(columnNames = {
    		""customerCode"", ""customerContact"" }))
    public class TblCustomers implements java.io.Serializable {
    
    	private Integer customerId;
    	private TblFrequency tblFrequency;
    	private Boolean customerLocked;
    	private Boolean customerDeleted;
    	private Serializable customerCode;
    	private Serializable customerName;
    	private Boolean customerIsOperator;
    	private Boolean customerIsSupplier;
    	private Boolean customerIsOwner;
    	private Boolean customerIsDrawer;
    	private Serializable customerContact;
    	private Serializable customerContactPosition;
    	private Serializable customerAddress1;
    	private Serializable customerAddress2;
    	private Serializable customerTown;
    	private Serializable customerCounty;
    	private Serializable customerPostCode;
    	private Serializable customerCountry;
    	private Serializable customerTelNo;
    	private Serializable customerFaxNo;
    	private Serializable customerEmail1;
    	private Serializable customerEmail2;
    	private Serializable customerEmail3;
    	private Serializable customerEmail4;
    	private Serializable customerEmail5;
    	private Serializable customerInvoiceName;
    	private Serializable customerInvoiceAddress1;
    	private Serializable customerInvoiceAddress2;
    	private Serializable customerInvoiceTown;
    	private Serializable customerInvoiceCounty;
    	private Serializable customerInvoicePostCode;
    	private Serializable customerInvoiceCountry;
    	private Serializable customerDefermentAccountNo;
    	private Double customerBond;
    	private Double customerBondTrigger;
    	private Double customerBondRemaining;
    	private Serializable customerNotes;
    	private Integer customerCustomerGroupId;
    	private Serializable customerRdcocode;
    	private Serializable customerVatregNo;
    	private Boolean customerIsHoldingAccount;
    	private Set<TblContacts> tblContactses = new HashSet(0);
    	private Set<TblMovementCustomers> tblMovementCustomerses = new HashSet(0);
    	private Set<TblTas2orderConfig> tblTas2orderConfigsForTas2ocCarrierNumber = new HashSet(0);
    	private Set<TblJournalCustomers> tblJournalCustomerses = new HashSet(0);
    	private Set<TblTas2orderConfig> tblTas2orderConfigsForTas2ocCustomerNumber = new HashSet(0);
    	private Set<TblSites> tblSiteses = new HashSet(0);
    	private Set<TblWomovements> tblWomovementses = new HashSet(0);
    	private Set<TblTas2destinations> tblTas2destinationses = new HashSet(0);
    	private Set<TblTas2orderConfig> tblTas2orderConfigsForTas2ocSupplierNumber = new HashSet(0);
    	private Set<TblTas2orderProduct> tblTas2orderProducts = new HashSet(0);
    	private Set<TblCustomerStocks> tblCustomerStockses = new HashSet(0);
    
    	public TblCustomers() {
    	}
    
    	public TblCustomers(TblFrequency tblFrequency, Boolean customerLocked, Boolean customerDeleted,
    			Serializable customerCode, Serializable customerName, Boolean customerIsOperator,
    			Boolean customerIsSupplier, Boolean customerIsOwner, Boolean customerIsDrawer, Serializable customerContact,
    			Serializable customerContactPosition, Serializable customerAddress1, Serializable customerAddress2,
    			Serializable customerTown, Serializable customerCounty, Serializable customerPostCode,
    			Serializable customerCountry, Serializable customerTelNo, Serializable customerFaxNo,
    			Serializable customerEmail1, Serializable customerEmail2, Serializable customerEmail3,
    			Serializable customerEmail4, Serializable customerEmail5, Serializable customerInvoiceName,
    			Serializable customerInvoiceAddress1, Serializable customerInvoiceAddress2,
    			Serializable customerInvoiceTown, Serializable customerInvoiceCounty, Serializable customerInvoicePostCode,
    			Serializable customerInvoiceCountry, Serializable customerDefermentAccountNo, Double customerBond,
    			Double customerBondTrigger, Double customerBondRemaining, Serializable customerNotes,
    			Integer customerCustomerGroupId, Serializable customerRdcocode, Serializable customerVatregNo,
    			Boolean customerIsHoldingAccount, Set tblContactses, Set tblMovementCustomerses,
    			Set tblTas2orderConfigsForTas2ocCarrierNumber, Set tblJournalCustomerses,
    			Set tblTas2orderConfigsForTas2ocCustomerNumber, Set tblSiteses, Set tblWomovementses,
    			Set tblTas2destinationses, Set tblTas2orderConfigsForTas2ocSupplierNumber, Set tblTas2orderProducts,
    			Set tblCustomerStockses) {
    		this.tblFrequency = tblFrequency;
    		this.customerLocked = customerLocked;
    		this.customerDeleted = customerDeleted;
    		this.customerCode = customerCode;
    		this.customerName = customerName;
    		this.customerIsOperator = customerIsOperator;
    		this.customerIsSupplier = customerIsSupplier;
    		this.customerIsOwner = customerIsOwner;
    		this.customerIsDrawer = customerIsDrawer;
    		this.customerContact = customerContact;
    		this.customerContactPosition = customerContactPosition;
    		this.customerAddress1 = customerAddress1;
    		this.customerAddress2 = customerAddress2;
    		this.customerTown = customerTown;
    		this.customerCounty = customerCounty;
    		this.customerPostCode = customerPostCode;
    		this.customerCountry = customerCountry;
    		this.customerTelNo = customerTelNo;
    		this.customerFaxNo = customerFaxNo;
    		this.customerEmail1 = customerEmail1;
    		this.customerEmail2 = customerEmail2;
    		this.customerEmail3 = customerEmail3;
    		this.customerEmail4 = customerEmail4;
    		this.customerEmail5 = customerEmail5;
    		this.customerInvoiceName = customerInvoiceName;
    		this.customerInvoiceAddress1 = customerInvoiceAddress1;
    		this.customerInvoiceAddress2 = customerInvoiceAddress2;
    		this.customerInvoiceTown = customerInvoiceTown;
    		this.customerInvoiceCounty = customerInvoiceCounty;
    		this.customerInvoicePostCode = customerInvoicePostCode;
    		this.customerInvoiceCountry = customerInvoiceCountry;
    		this.customerDefermentAccountNo = customerDefermentAccountNo;
    		this.customerBond = customerBond;
    		this.customerBondTrigger = customerBondTrigger;
    		this.customerBondRemaining = customerBondRemaining;
    		this.customerNotes = customerNotes;
    		this.customerCustomerGroupId = customerCustomerGroupId;
    		this.customerRdcocode = customerRdcocode;
    		this.customerVatregNo = customerVatregNo;
    		this.customerIsHoldingAccount = customerIsHoldingAccount;
    		this.tblContactses = tblContactses;
    		this.tblMovementCustomerses = tblMovementCustomerses;
    		this.tblTas2orderConfigsForTas2ocCarrierNumber = tblTas2orderConfigsForTas2ocCarrierNumber;
    		this.tblJournalCustomerses = tblJournalCustomerses;
    		this.tblTas2orderConfigsForTas2ocCustomerNumber = tblTas2orderConfigsForTas2ocCustomerNumber;
    		this.tblSiteses = tblSiteses;
    		this.tblWomovementses = tblWomovementses;
    		this.tblTas2destinationses = tblTas2destinationses;
    		this.tblTas2orderConfigsForTas2ocSupplierNumber = tblTas2orderConfigsForTas2ocSupplierNumber;
    		this.tblTas2orderProducts = tblTas2orderProducts;
    		this.tblCustomerStockses = tblCustomerStockses;
    	}
    
    	@Id
    	@GeneratedValue(strategy = GenerationType.AUTO)
    
    	@Column(name = ""customerId"", unique = true, nullable = false)
    	public Integer getCustomerId() {
    		return this.customerId;
    	}
    
    	public void setCustomerId(Integer customerId) {
    		this.customerId = customerId;
    	}
    	
    	@Column(name = ""customerCode"")
    	public Serializable getCustomerCode() {
    		return this.customerCode;
    	}
    
    	public void setCustomerCode(Serializable customerCode) {
    		this.customerCode = customerCode;
    	}
    
    	@Column(name = ""customerName"")
    	public Serializable getCustomerName() {
    		return this.customerName;
    	}
    
    	public void setCustomerName(Serializable customerName) {
    		this.customerName = customerName;
    	}




","Change the fields in your entity class TblCustomers,  whose type are serializable to String. 

For eg: change  private Serializable customerCode; to private String customerCode;

Change the corresponding setter and getter methods aswell.

Try run your application.","<java><sql-server><hibernate>"
"48008237","48008308","Compare Enum with Class, best practice?","Hello and happy holidays,

In my program I have an Enum divided in ""Group"" like (renamed for clarity):

    public enum FlowSteps
    {
        GROUP1_Step1,
        GROUP1_Step2,
        GROUP2_Step1,
        GROUP1_Step2,
        ...
    }

Then I my views I check the current step like:

    FlowSteps currentStep = ...;
    if (currentStep == GROUP1_Step1) { //Do something }

Now, I wanted to refactor a little this kind of grouping that i don't really like, and I was thiking something like:

    public class FlowSteps
    {
        public enum GROUP1
        {
            Step1,
            Step2
        }
        
        public enum GROUP2
        {
            Step1,
            Step2
        }
     }

Much clearer, but now I cannot compare my currentStep by doing:

    FlowSteps currentStep = ...;
    if (currentStep == FlowSteps.GROUP1.Step1) { //Do something }

Any suggestion on how to keep this kind of grouping of my Enum and being able to compare the class without adding too much complexity?

How would you proceed? 
Thanks","I think a list of enums isn't the right approach here. I would use a set of classes with integers, making them produce unique numbers.

    public static class FlowSteps
    {
        private const int GroupSize = 100;

        public static class Group1
        {
            private const int GroupId = 1;

            public const int Step1 = FlowSteps.GroupSize * GroupId + 1;
            public const int Step2 = FlowSteps.GroupSize * GroupId + 2;
        }

        public static class Group2
        {
            private const int GroupId = 2;

            public const int Step1 = FlowSteps.GroupSize * GroupId + 1;
            public const int Step2 = FlowSteps.GroupSize * GroupId + 2;
        }
    }

As you can see you have 100 steps available per group. If that isn't enough, just increase the group size. And your `currentStep` is just an `int` now.","<c#><enums>"
"48012708","48024317","Apply MVC pattern in ES6 for invoking methods","I am using the Model-View-Controller framework to structure my files for readable, reusable, and refactorable purposes. 

My goal is to invoke methods from two seperate classes while working with one class. In practice; I want to access the methods for example in file `Model.js` and `View.js` from `Controller.js`.

Previously in ES5 I've had one file called `app.js` that used the IIFE approach:


    var View = (function(){

       dump(){
         console.log('Hello World');
       }

     });
     
    var Model = (function(){
      // Code goes here
    });
     
     var Controller = (function(viewCtrl, viewCtrl){

       viewCtrl.dump(); // Invoke method from View

     })(View, Model);

As shown above, I would like to do something similar in ES6 too.  

    import View from './View';
    import Model from './Model';
    
    class Controller {
       
       dump(){
          return viewCtrl.dump(); 
       }
    
       init(){
          console.log('Application has started'); 
          // Make a new object of the class { View, Model }
          let view = new View();
          let model = new Model(); 
       }
    
    }
    
    export default Controller;

In my main.js: 

    import Controller from './Controller';
    
    // Make a new object of the class Controller
    let controller = new Controller(); 
    
    
    // Instantiate App
    controller.init(); 
    
    console.log(
       controller.dump()
    );

But doing so in ES6 I get `error: ReferenceError: viewCtrl is not defined` in main.js. 

I was thinking perhaps pass `View.js` and `Model.js` as arguments in a constructor inside the `Controller.js` in order to declare them. But I guess it might be a better solution that looks cleaner. 

So what I am basically looking for is to apply the MVC pattern using ES6, any recommendations? 

   ","Passing the instances of `View` and `Model` to the constructor of `Controller`  is a clean solution since this would fullfill the dependency-injection-pattern. 
This way you get the ability to change the instances from outside which makes the `Controller` testable.

In a situation where  `View` and `Model` where singletons you could export them as instances instead of classes like

View.js:

    export default new View();

Controller.js:

    import view from ""./View"";
    ...
    view.dump()

Using this way you could spare the work of passing a model and a view to a Controller manually but that would also mean that you loose the ability to test Controller or to change parts of it, like the View. Since this is one of the main benefits of MVC-pattern, I would not recommend to do this.
","<model-view-controller><ecmascript-6><iife>"
"48013188","48014815","Too many database connection php","In my *logout.php* endpoint I'm using 3 different classes. Each of this 3 classes have 

    private $conn;
    private $table_name = ""users"";

    // constructor with $db as database connection
    public function __construct($db)
    {
        $this->conn = $db;
    }

this code in order to connect to database from enpoint while initializing class like so:

    // include needed files
    include_once '../config/database.php';
    include_once '../classes/user.php';
    include_once '../classes/token.php';

    // instantiate database and product object
    $database = new Database();
    $db = $database->getConnection();

    // initialize object
    $user = new user($db);
    $token = new token($db);

In this 3 classes in some functions I sometimes need to use other class so I additionally include [database class][1] once again like in this logout function within *user* class:

    public function logout($receivedToken)
    {
        include_once '../config/database.php';
        include_once '../classes/token.php';

        // instantiate database
        $database = new Database();
        $db = $database->getConnection();

        $token = new token($db);
        if($token->checkToken($receivedToken))

And I'm not sure if it is correct approach I'm debugging my code and trying to refactor it to make more sense. Do I need to include this db once again there in logout function within user class in order to use token class? Or maybe I can somehow use this connection which I did initialize in endpoint via `__contruct` and not include database?


  [1]: https://gist.github.com/anonymous/4031bbc7ce368d02df999a4faca4a293","This is a bad approach, first of all, you should only `include` once at the top of your file. 

There is no need to include it again in the logout method and generally `includes` inside of method bodies are usually a code smell in my opinion, except in some specific cases.

Secondly you are making two many connections to your database, every time you instantiate the Database class `$database = new Database()` and call `$database->getConnection()` you are making a new connection to the database. You should only instantiate Database once, and then inject it  into classes that need DB connection (pass it through constructor or as a method param).

Last but not the least, you should ensure that your `$database->getConnection()` returns a [singleton][1].

You can do that like this

    <?php
        class Database
        {
            // specify your own database credentials
            private $host = ""localhost"";
            private $db_name = ""obiezaca_db"";
            private $username = ""root"";
            private $password = """";
            private $conn;
            // get the database connection

            public function getConnection()
            {
                if (!$this->conn) {
                    try {
                        $this->conn = new PDO(""mysql:host="" . $this->host . "";dbname="" . $this->db_name, $this->username, $this->password);
                        $this->conn->exec(""set names utf8"");
                    } catch(PDOException $exception) {
                        // you shouldn't output exception error message in production
                        // because it can leak sensitive data such as DB username and password
                        echo ""Database error"";
                    }
                }  
                return $this->conn;
            }
        }
    ?>

Or you could make a Singletton factory like this

    <?php
        class Database 
        {
            // specify your own database credentials
            private $host = ""localhost"";
            private $db_name = ""obiezaca_db"";
            private $username = ""root"";
            private $password = """";
            
            private $conn;

            private static $instance;

            private function __construct() {};

            private function __clone() {};

            public static getInstance() 
            {
                if (!static::$instance) {
                    static::$instance = new Database(); 
                } 
                return static::$instance;
            }

            // get the database connection
            public function getConnection()
            {
                if (!$this->conn) {
                    try {
                        $this->conn = new PDO(""mysql:host="" . $this->host . "";dbname="" . $this->db_name, $this->username, $this->password);
                        $this->conn->exec(""set names utf8"");
                    } catch(PDOException $exception) {
                        // you shouldn't output exception error message in production
                        // because it can leak sensitive data such as DB username and password
                        echo ""Database error"";
                    }
                }  
                return $this->conn;
            }
        }

     $database = Database::getInstance();
     $connection = $database->getConnection();

In this approach no matter how many times in your code you call these methods you will always get the same `Database` and `PDO` object instances.

This way you will ensure that you always have one connection to your database, and additionally your database will be globally accessible since it is accessed statically.

  [1]: https://en.wikipedia.org/wiki/Singleton_pattern","<php><database><pdo>"
"48014642","48017042","How to manage spring hierarchy during unit/integration tests?","I am working on a Spring-enabled embedded Tomcat application using annotation-based configuration. The application uses Spring MVC Controllers for its REST endpoints. As a separation of concerns, and to avoid having duplicate beans in separate contexts, the parent context contains all beans that are not REST endpoints, and the Spring Web MVC context contains all beans that are REST endpoints.

I want to write new and refactor old integration tests for these endpoints that are representative of the structure of the app. There are existing test classes like so:


    import com.stuff.web.MyEndpoint;
    
    @Configuration
    @ComponentScan(basePackages = {""com.stuff""})
    public class SpringConfig { ... }
    
    @WebAppConfiguration
    @RunWith(SpringJUnit4ClassRunner.class)
    @ContextConfiguration(classes = {SpringConfig.class})
    public class TestMyEndpoint {
    
        @Autowired
        private MyEndpoint myEndpoint;
    
        private MockMvc mockMvc;
    
        @Before
        public void setUp() {
            mockMvc = MockMvcBuilders
                    .standaloneSetup(myEndpoint)
                    .build();
        }
    
        @Test
        public void testMyEndpoint() throws Exception {
            mockMvc.perform(get(""/myendpoint"")
                            .accept(MediaType.APPLICATION_JSON_VALUE))
                            .andExpect(status().isOk())
                            .andReturn();
        }
    }

The problem is that the context that I am using for this test now has every bean loaded, whereas I would like to ensure that there are not non-REST beans loaded that call into RestController beans during the execution of the tests.

Adding something like 

    @Configuration
    @ComponentScan(basePackages = {""com.stuff""}, 
                   excludeFilters = {
                       @Filter(type = FilterType.REGEX, pattern = ""com.stuff.web.*"")})
    public class SpringConfig { ... }

Would ensure the kind of separation I'm going for, but then I don't have access to the com.stuff.web.MyEndpoint class that I'm trying to test. 

Am I missing something easy? Let me know if I'm explaining the situation clearly. ","10 years ago, the kind of separation you're describing (mvc vs non-mvc) would have made sense, not anymore. Separate your code by functionality/design patterns (web/service/repository etc), and have `@Configuration` classes specific to that layer. The Spring [stereotype annotations](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/stereotype/package-summary.html) are good enough hint how your app should be broken up. Then, put your tests in the same package as your target code, and mock/override any dependencies. 

It doesn't appear you're using Spring Boot (you really should) but they have a great section in the docs for testing ""slices"" of your application.
https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-testing.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-tests
","<java><spring><spring-mvc>"
"48022330","48022679","Redux store reseted when navigating (after I've refactored reducer)","I am trying the refactor my reducer into two ""sub"" reducers and combine them before exporting to store.js. However, when I am navigating in my app the state of my notificationReducer gets reseted, and not the other reducers. I am unsure of what might be the problem and I've followed the guide (sort of) from redux.js.org => 
[Separating Data Handling by Domain][1]

Any thoughts or tips on how you've refactored reducers?
Thanks!

----------


**notificationReducer.js**


    import {
      FETCHING_NOTIFICATION_STATUS, // NOTIFICATION
      FETCHING_NOTIFICATION_STATUS_SUCCESS,
      FETCHING_NOTIFICATION_STATUS_FAILURE,
      FETCHING_NOTIFICATION_DATA, // NOTIFICATION
      FETCHING_NOTIFICATION_DATA_SUCCESS,
      FETCHING_NOTIFICATION_DATA_FAILURE,
      FETCHING_MARK_NOTIFICATION_AS_UNSEEN, // NOTIFICATION
      FETCHING_MARK_NOTIFICATION_AS_UNSEEN_SUCCESS,
      FETCHING_MARK_NOTIFICATION_AS_UNSEEN_FAILURE
    } from '../Actions/actionTypes'
    
    const fetchingData = {
      isFetching: false,
      dataFetched: false,
      error: false,
      errorMsg: '',
    }
    
    const initialState = {
      notificationStatus: {
        ...fetchingData,
        hasNotifications: false,
      },
      notificationData: {
        ...fetchingData,
        data: [],
      }, 
      markNotification: {
        ...fetchingData,
        isUnseen: false,
      }, 
    }
    
    const { notificationStatus, notificationData, markNotification } = initialState
    
    const notificationStatusReducer = (state = notificationStatus, action) => {
      switch(action.type) {
        case FETCHING_NOTIFICATION_STATUS:
          return {
            ...state,
            isFetching: true,
          }
        case FETCHING_NOTIFICATION_STATUS_SUCCESS:
          return {
            ...state,
            isFetching: false,
            dataFetched: true,
            hasNotifications: action.data,
          }
        case FETCHING_NOTIFICATION_STATUS_FAILURE:
          return {
            ...state,
            isFetching: false,
            error: true,
            errorMsg: action.errorMsg,
          }
    
        default:
          return state
      }
    }
    
    const notificationDataReducer = (state = notificationData, action) => {
      switch(action.type) {
        case FETCHING_NOTIFICATION_DATA:
          return {
            ...state,
            isFetching: true
          }
        case FETCHING_NOTIFICATION_DATA_SUCCESS:
          return {
            ...state,
            isFetching: false,
            dataFetched: true,
            data: action.data,
          }
        case FETCHING_NOTIFICATION_DATA_FAILURE:
          return {
            ...state,
            isFetching: false,
            error: true,
            errorMsg: action.errorMsg,
          }
    
        default:
          return state
      }
    }
    
    const markNotificationReducer = (state = markNotification, action) => {
      switch(action.type) {
        case FETCHING_MARK_NOTIFICATION_AS_UNSEEN:
          return {
            ...state,
            isFetching: true
          }
        case FETCHING_MARK_NOTIFICATION_AS_UNSEEN_SUCCESS:
          return {
            ...state,
            isFetching: false,
            dataFetched: true,
            isUnseen: true,
          }
        case FETCHING_MARK_NOTIFICATION_AS_UNSEEN_FAILURE:
          return {
            ...state,
            isFetching: false,
            error: true,
            errorMsg: action.errorMsg,
          }
    
        default:
          return state
      }
    }
    
    const notificationReducer = (state = initialState, action) => {
      return {
          notificationStatusReducer : notificationStatusReducer(state.notificationStatus, action),
          notificationDataReducer : notificationDataReducer(state.notificationStatus, action),
          markNotificationReducer : markNotificationReducer(state.markNotification, action),
      }
    }
    
    export default notificationReducer


  [1]: https://redux.js.org/docs/recipes/reducers/RefactoringReducersExample.html#separating-data-handling-by-domain","You should use [`combineReducers`](https://redux.js.org/docs/recipes/reducers/UsingCombineReducers.html) for such things. So your `notificationReducer` should be the combination of yours three reducers.

    const notificationReducer = combineReducers({
      notificationStatusReducer,
      notificationDataReducer,
      markNotificationReducer 
    })

Hope it will help","<redux><refactoring><state><react-navigation><reducers>"
"48022381","48023076","How to ""Force"" team devs to follow good coding practice","Having a team of 3 developers (4 - with me), I try hard by forcing them to use a good practice in development world (as far as I know what exactly to follow).

Example: 

 1. PHP / JS Developer with 2 years of experience.<br/>
    He never used any of PHP Frameworks.
    I understand that this type of person is not giving much about 
    reading articles, investigating and trying to find a better solution or approach in some bottleneck situations, search for tips, learning best practices
    in development world, etc.<br/><br/>
    **Common problems:** Naming methods in  a non-english way. Not commenting his code. Not respecting readability of the code by usings TABS and SPACES. Code is reduntant.<br/><br/>
    **Question:** How can I make him respect the code guidelines which I wrote

 2. Backend PHP Developer (Student)<br/>
    I like this guy, he is willing and open to learn new things. He is motivated. Every tip I gave to him he respected it and developed much further. Fast-learning guy. He is reading a documentations and discussions about things he faced for the first time.<br/><br/>
    **Common problems:** Each problem is taken into the account, so no much more to say here.<br/><br/>
    **Question:** No questions about him, maybe some good tips from you, guys.

 3. Full-stack PHP developer with 7 years of experience.<br/>
    A lot of experience. Still motivated. <br/><br/>
    **Common problems:** Smart developer, but a big deal to discuss about his code and how it could be improved. Code is almost never commented. Method-naming convetion is horrible.<br/><br/>
    **Question:** How to go in a friendly-way with him, so hi will accept my suggestions to think about and maybe taking them into the implementation.

As a lead-dev (which I became this month) I was always open for recommendations from each developers, even from another programming language world.

I would like that the project we are working on will be well documented, having comments, unit-tests, would be in TDD way and refactored. <br/>
I talked about SOLID principles, using NPM Task managers as Grunt/Gulp/Webpack etc. Gave them a well-described schema of our app we are working on, so they have a better understanding where and which technologies we are going to implement.

I would like to receive a recommendations from you guys, mostly from Lead-devs on how you managed to develop a complex application by having a clean and comprehensible code in a team.
 ","I am not an experienced dev but would like to input my opinion on this issue. First of, every developer whether he/she is new or ninja should be aware of development flows. learning to write code is much easier but doing the job in right manner needs some curves. we cannot do much more instead individuals need to up-to date their skillset and attitudes. 

Secondly With proper workflow and tools you can overcome these problems and encourage team members to use and follow rules while developing. 

**Coding Standards** Spare some time to discuss this issue with your team. they will likely have great suggestions specially senior developers can blow your mind. Decide coding standards that's suitable to your team and project and document those in a form of rules that every developer must follow. so instead of dealing every member in different way one rule-set can be applied to everybody. you can find such examples on web. as a reference [WordPress Coding Standards][1] is one of the best example i can think about.


**Git:** I hope you are already using Git. as a team lead you have full control over `PR's/Commits` so you can force them for corrections before merging codes.

**Documenting Codes** In case of PHP i would like to reference [phpDocumentor][2] hope you can find such tools on other platforms/languages as well


  [1]: https://codex.wordpress.org/WordPress_Coding_Standards
  [2]: https://www.phpdoc.org/

**NPM** finally with loads on NPM Packages/Modules you can almost do anything. like `JSHint` (JS linter), Task runners like `Grunt, Gulp` and Bundlers (`Webpack` etc) are there to help you. turly possibilities are endless  ","<php><tdd><teamcity><phpstorm><agile>"
"48026938","48062653","Add a second return value to a wrapped function without losing backward compatibility","In a third-party framework sources response function is wrapped as following:

    from flask import Response
    
    def wrap_func(func):
        def add_context(*args, **kwargs):
            output_value = func(*args, **kwargs)
        
            return Response(
                output_value
            )
        
        return add_context

And developer can use this decorator to make a custom function something like an entry point:

    @wrap_function
    def hello():
        return '<b>Hello</b>'

Framework creates a response and send it, this functionality is hidden ""under the hood"".

And now I need to set some `Response` parameters such as cookies from my function `hello`. As it seems to be impossible without the wrapper changes, I decided to contribute to the framework.

My very first though was to return an optional value from wrapped function (`hello`) with response parameters and then parse it inside `add_context`. Note, that backward compatibility matters, ""old-styled"" functions should work as well as ""new"", with response parameters. So, alongside with `hello`, wrapper would have to support functions like this:

    @wrap_function
    def ping():
        return '<b>Hello</b>', {'cookies': [('te', 'st')]}

But as for me it's definitely a hack job. Maybe there are some best practices to implement such change or even better approach to modify return of the wrapped function without losing compatibility?



","Finally I decided to make it simple and flexible way. Now the wrapped function should return a markdown as usual or `Response` object with initialized with markdown body. And then, inside the wrapper, different actions performed based on `isinstance`.

    from flask import Response

    def wrap_func(func):
        def add_context(*args, **kwargs):
            output_value = func(*args, **kwargs)
    
            if isinstance(output_value, Response):
                return output_value
            else:
                return Response(
                    output_value
                )
    
        return add_context

Although outside this minimal example wrapper needs to modify response body, it works after creating `CustomResponse` based on `Response` and redefining needed actions. ","<python><flask><refactoring>"
"48029041","48029453","Refactor code to not throw Mockito's UnnecessaryStubbingException","I have a simple view with button that starts `Intent.ACTION_PICK` for result and than displays chosen contact on screen. To do that following steps must be taken:

 - check if `android.permission.READ_CONTACTS` is granted
 - open contact activity
 - select contact and go back to app
 - check for `android.permission.READ_CONTACTS` again
 - find contact by given uri
 - show contact on screen

I want to test scenario when one open contacts than revokes permission and goes back to app with selected contact. Expected result is not to call method that find contacts by its uri. 

Unfortunately current implementation throws:

> org.mockito.exceptions.misusing.UnnecessaryStubbingException:

for:

    whenever(interactor.getContact(any())).thenReturn(Maybe.just(Contact()).doOnSuccess { find = true })

I know that I can replace `StrictStubs` with `Silent` but I'm looking for better solution with refactoring current code.

**All necessary class and test:**

    class Contact
    
    interface View {
    
        val contactClicks: Observable<Any>
    
        fun setContact(contact: Contact)
    }
    
    interface Interactor {
    
        fun getContact(uri: String): Maybe<Contact>
    }
    
    interface Router {
    
        fun goToContacts(): Maybe<String>
    }
    
    interface Permissioner {
    
        fun requestReadContacts(): Single<Boolean>
    }
    
    class Presenter(
            private val view: View,
            private val interactor: Interactor,
            private val router: Router,
            private val permissioner: Permissioner
    ) {
    
        private val disposables: CompositeDisposable = CompositeDisposable()
    
        fun bindView() {
            view.contactClicks
                    .flatMapSingle { permissioner.requestReadContacts() } //ask first time before opening contacts
                    .filter { it }
                    .flatMapMaybe { router.goToContacts() }
                    .flatMapMaybe {
                        permissioner.requestReadContacts() //ask second time before using ContentResolver
                                .filter { granted -> granted }
                                .flatMap { _ -> interactor.getContact(it) }
                    }
                    .subscribeBy { view.setContact(it) }
                    .addTo(disposables)
        }
    }
    
    @RunWith(MockitoJUnitRunner.StrictStubs::class)
    class PresenterTest {
    
        @Mock
        lateinit var view: View
    
        @Mock
        lateinit var router: Router
    
        @Mock
        lateinit var permissioner: Permissioner
    
        @Mock
        lateinit var interactor: Interactor
    
        @InjectMocks
        lateinit var presenter: Presenter
    
        private val contactClickSubject = PublishSubject.create<Any>()
    
        @Before
        fun setUp() {
            whenever(view.contactClicks).thenReturn(contactClickSubject)
        }
    
        @Test
        fun shouldNotFindContactWhenReturnedWithUriAndPermissionNotGrantedSecondTime() {
            var firstTimeAsk = true
            whenever(permissioner.requestReadContacts()).thenReturn(Single.fromCallable {
                if (firstTimeAsk) {
                    firstTimeAsk = false
                    return@fromCallable true
                } else {
                    return@fromCallable false
                }
            })
            whenever(router.goToContacts()).thenReturn(Maybe.just(""contact""))
            var find = false
            whenever(interactor.getContact(any())).thenReturn(Maybe.just(Contact()).doOnSuccess { find = true })
    
            presenter.bindView()
            contactClickSubject.onNext(Any())
    
            assertFalse(find)
        }
    }","`UnnecessaryStubbingException` means you are stubbing something, but not really using it. And that's correct, in your case `interactor.getContact` should be never called in test - this is desired behaviour. So there is no point in stubbing it.

The simplest solution would be to remove unnecessary variable `var find = false` and stubbing - substitute them with assertion at the end of your test:

    verify(interactor, never()).getContact(any())

This is equivalent to your current solution but more straightforward than using helper variables.","<java><android><kotlin><mockito><rx-java>"
"48035922","48036042","Is the invocation of a generic method allowed inside another generic method?","I'm making a RTS game with Unity. There're many types of resources in my game, such as, tree, farm. Each resource is a GameObject and  has it own main script controlling it.

Ex. I want to harvest a tree, I call this.

    gameObject.GetComponent<Tree>().Harvest();

If I want to harvest farm I call the same script but change ""Tree"" to ""Farm"" which is fine but code will be duplicated. So I abstract it by using generics method like this.

    void Harvest<T>(){
        gameObject.GetComponent<T>().Harvest();
    }

But the C# compiler won't let me do that. I want to know is it possible to define generics method that use generics method inside? If not, Is there any way to abstract my code like this? Thank you.
","The problem is that in ...

    void Harvest<T>(){
        gameObject.GetComponent<T>().Harvest();
    }

... the C# compiler does not know of which concrete type `T` will be. Therefore, it cannot know that there will be a method `Harvest` available, nor does it know its exact declaration (does it return `void` or `bool` or something else? Does it have optional arguments?)

The solution is to give the compiler a hint by specifying a generic type constraint. To do this you must declare an interface and let the components with a `Harvest` method implement it.

    public interface IHarvestable
    {
        void Harvest();
    }

Specify the constraint with:

    void Harvest<T>() where T : IHarvestable 
    {
        gameObject.GetComponent<T>().Harvest();
    }
        

","<c#><generics><unity3d><refactoring>"
"48036321","48036462","Azure triggered webjob started processing 2 messages at a time","I have an Azure webjob that is triggered by a queue (inherited, not originally written by me). The queue usually only has one item placed on it at a time, but on the first of every month has many items.

On these occasions it has always processed one queue item at a time, finishing processing before picking up the next.

I noticed, however, that as of a couple of months ago it started processing two files at any one time, which is causing problems. 

Whilst i could refactor the code to allow for this, I really don't have the time, and the return would be minimal. I simply want it to process one item at a time again, but i cant find anything that may have caused this to change.
Are there any settings in the azure portal I should be aware of? I don't beleive any code relating to the trigger itself has changed.

Thank you in advance","Sure, this can be done. Note that a WebJob can be triggered by either a Service Bus Queue or an Azure Storage Queue. Here's info for both. 

**For Azure Storage Queues**

By default, a QueueTrigger will grab 16 messages at a time and process them in parallel. If you don't want this, you need to set the JobHostConfiguration instance's BatchSize property to 1 in your WebJob's static void Main method. Example:

     static void Main(string[] args)
     {
         JobHostConfiguration config = new JobHostConfiguration();
         config.Queues.BatchSize = 8;
         JobHost host = new JobHost(config);
         host.RunAndBlock();
     }

**For Service Bus Queues**

Similarly, you'll set properties in the JobHostConfiguration. If you're using Service Bus, there's a little more setup. Example:

    static void Main(string[] args)
    {    
        JobHostConfiguration config = new JobHostConfiguration();
        ServiceBusConfiguration serviceBusConfig = new ServiceBusConfiguration();
        serviceBusConfig.MessageOptions.MaxConcurrentCalls = 1;
        config.UseServiceBus(serviceBusConfig);
    
        JobHost host = new JobHost(config);
        host.RunAndBlock();
    }","<azure><triggers><azure-webjobs>"